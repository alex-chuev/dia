{"version":3,"sources":["./src/app/rec/rec.module.ts","./src/app/shared/helpers/force-download.ts","./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.ts","./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.html","./worker/src/message-type.ts","./src/app/rec/stores/recorder.store.ts","./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.ts","./src/app/shared/helpers/deferred.ts","./src/app/rec/timeline/timeline.store.ts","./src/app/rec/stores/recorder.store.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline.store.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.html","./src/app/shared/helpers/math.helpers.ts","./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ts","./src/app/rec/entities/recorder.ts","./src/app/rec/entities/player.ts","./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.html","./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.ts","./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.html","./src/app/rec/timeline/timeline-slider/timeline-slider.component.ts","./src/app/rec/timeline/timeline-slider/timeline-slider.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-slider/timeline-slider.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-slider/timeline-slider.component.html","./src/app/shared/helpers/get-intermediate-values.ts","./src/app/rec/timeline/timeline-scale/timeline-scale.component.ts","./src/app/rec/timeline/timeline-scale/timeline-scale.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-scale/timeline-scale.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-scale/timeline-scale.component.html","./src/app/rec/timeline/timeline-canvas/timeline-canvas-process-levels.store.ts","./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.ts","./src/app/rec/timeline/timeline-layer/timeline-layer.component.ts","./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.html","./src/app/shared/directives/horizontal-drag.directive.ts","./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ts","./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.html","./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ts","./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.html","./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.ts","./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.html","./src/app/rec/timeline/timeline-layer/timeline-layer.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layer/timeline-layer.component.html","./src/app/rec/timeline/timeline-layers/timeline-layers.component.ts","./src/app/rec/timeline/timeline-layers/timeline-layers.component.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layers/timeline-layers.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layers/timeline-layers.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-layers/timeline-layers.component.html","./src/app/rec/timeline/timeline.component.ts","./src/app/rec/timeline/timeline.component.ts.pre-build-optimizer.js","./src/app/rec/timeline/timeline.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline.component.html","./src/app/rec/timeline/timeline-block/timeline-block.component.ts","./src/app/rec/timeline/timeline-block/timeline-block.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-block/timeline-block.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/timeline/timeline-block/timeline-block.component.html","./src/app/rec/components/record-buttons/record-buttons.component.ts","./src/app/rec/components/record-buttons/record-buttons.component.ts.pre-build-optimizer.js","./src/app/rec/components/record-buttons/record-buttons.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/record-buttons/record-buttons.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/record-buttons/record-buttons.component.html","./src/app/rec/pipes/milliseconds.pipe.ts","./src/app/rec/components/timer/timer.component.ts","./src/app/rec/components/timer/timer.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/timer/timer.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/timer/timer.component.html","./src/app/shared/components/popup/popup.component.ts","./src/app/shared/components/popup/popup.component.ngfactory.js.pre-build-optimizer.js","./src/app/shared/components/popup/popup.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/shared/components/popup/popup.component.html","./src/app/rec/components/share/share-link/share-link.component.ts","./src/app/rec/services/share.service.ts","./src/app/rec/components/share/share-link/share-link.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/share/share-link/share-link.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/share/share-link/share-link.component.html","./src/app/rec/components/share/share-download/share-download.component.ts","./src/app/rec/components/share/share-download/share-download.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/share/share-download/share-download.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/share/share-download/share-download.component.html","./src/app/rec/components/share/share.component.ts","./src/app/rec/components/share/share.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/share/share.component.styl.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/share/share.component.html","./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.ts","./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.html","./src/app/rec/components/toolbar/toolbar.component.ts","./src/app/rec/components/toolbar/toolbar.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/components/toolbar/toolbar.component.styl.shim.ngstyle.js.pre-build-optimizer.js","./src/app/rec/components/toolbar/toolbar.component.html","./src/app/rec/rec.component.ts","./src/app/rec/rec.component.ts.pre-build-optimizer.js","./src/app/rec/rec.component.ngfactory.js.pre-build-optimizer.js","./src/app/rec/rec.component.styl.ngstyle.js.pre-build-optimizer.js","./src/app/rec/rec.component.html","./src/app/rec/factories/web-audio.factory.ts","./src/app/rec/rec-routing.module.ts","./src/app/rec/rec.module.ngfactory.js.pre-build-optimizer.js"],"names":["RecModule","openWindow","href","filename","link","document","createElement","target","download","body","appendChild","click","removeChild","share_link_modal_component_ShareLinkModalComponent","ShareLinkModalComponent","this","copied","prototype","ngOnInit","onInputFocus","inputElement","nativeElement","select","onCopyButtonClick","_this","execCommand","err","setTimeout","onOpenButtonClick","recordUrl","RenderType_ShareLinkModalComponent","core","encapsulation","styles","data","View_ShareLinkModalComponent_1","_l","View_ShareLinkModalComponent_2","View_ShareLinkModalComponent_0","_v","en","$event","ad","component","common","ngIf","_ck","_co","MessageType","instance","TimelineLayerAddComponent","recorderStore","timelineStore","onButtonClick","addLayer","then","selectLastLayer","Deferred","state","promise","Promise","resolve","reject","_promiseResolve","_promiseReject","value","isPending","Error","reason","isResolved","isFulfilled","isRejected","timeline_store_instance","recorder_store_RecorderStore","RecorderStore","zone","worker","Worker","queue","recordData","length","layerIds","constants","historyData","appliedTransactionsNumber","rollbackTransactionsNumber","onRecordChange","onLayerChange","onSampleFinish","onHistoryChange","addEventListener","event","run","onMessage","subscribe","Object","defineProperty","get","enumerable","configurable","undo","postMessage","UNDO","redo","REDO","getLevels","payload","postPromiseMessage","GET_LEVELS","getRecordLength","GET_RECORD_LENGTH","addRecordingProgress","float32Array","ADD_RECORDING_PROGRESS","startRecording","START_RECORDING","ADD_LAYER","removeLayer","layerId","REMOVE_LAYER","stopRecording","postPromiseEventMessage","STOP_RECORDING","messageType","eventName","emit","getRecordData","startPosition","GET_RECORD_DATA","getCompiledRecord","GET_COMPILED_RECORD","setLayerVolume","SET_LAYER_VOLUME","type","deferred","push","ON_RECORD_CHANGE","ON_LAYER_CHANGE","ON_HISTORY_CHANGE","shift","timeline_store_TimelineStore","TimelineStore","player","_currentPosition","_zoom","_width","currentPositionChange","zoomChange","widthChange","change","selectedLayerId","sampleData","currentPosition","endPosition","onPlaybackStart","playbackConfig","onPlaybackStop","onPlaybackFinish","indexOf","lastLayerId","playbackPreviousTime","Date","now","requestPlaybackAnimationFrame","playbackAnimate","currentTime","playbackRequestAnimationFrameId","requestAnimationFrame","cancelPlaybackAnimationFrame","cancelAnimationFrame","isMaxZoom","isMinZoom","convertPixelsToMilliseconds","set","Math","round","position","step","convertMillisecondsToPixels","halfWidthInMilliseconds","startVisiblePosition","width","halfWidth","pixels","zoom","milliseconds","RenderType_TimelineLayerAddComponent","View_TimelineLayerAddComponent_0","lowerDividend","divider","floor","nearestDividend","recorder_instance","player_instance","timeline_buttons_component_TimelineButtonsComponent","TimelineButtonsComponent","recorder","inButtonIsDisabled","outButtonIsDisabled","zoomChangeSubscriber","onZoomChange","ngOnDestroy","unsubscribe","updateButtonStates","onZoomOutButtonClick","onZoomInButtonClick","recording","playback","onStartButtonClick","onEndButtonClick","onBackwardButtonClick","roundedCurrentPosition","onForwardButtonClick","recorder_Recorder","Recorder","messageService","webAudioFactory","scriptProcessorBufferSize","recordingChange","onProgress","onAudioProcess","bind","setRecording","stopCollectAudioData","config","hasInfrastructureToBePrepared","prepareInfrastructure","preStartCollectAudioData","error","showError","undefined","mediaStreamAudioSource","requestStream","createContext","createScriptProcessor","createMediaStreamAudioSource","audioContext","getAudioContext","browserError","scriptProcessor","createMediaStreamSource","mediaStream","navigator","getUserMedia","audio","processRequestStreamError","resume","startCollectAudioData","connect","destination","disconnect","removeEventListener","inputBuffer","getChannelData","levels","player_Player","Player","onPlaybackEnd","play","playRecordData","Float32Array","showBrowserError","buffer","createBuffer","copyToChannel","bufferSource","createBufferSource","onended","finish","start","stop","repeat","clearData","RenderType_TimelineButtonsComponent","View_TimelineButtonsComponent_0","startButtonIsDisabled","backwardButtonIsDisabled","endButtonIsDisabled","TimelineScaleTickComponent","positionInPixels","updatePositionInPixels","getPositionInPixels","RenderType_TimelineScaleTickComponent","View_TimelineScaleTickComponent_0","seconds_pipe","TimelineSliderComponent","updatePosition","changeSubscriber","element","style","left","getPosition","currentPositionInPixels","RenderType_TimelineSliderComponent","View_TimelineSliderComponent_0","getIntermediateValues","startValue","endValue","values","timeline_scale_component_TimelineScaleComponent","TimelineScaleComponent","tickPositions","updateTickPositions","timelineChangeSubscriber","getTickPositions","endVisiblePosition","shouldPositionsUpdate","previousStep","previousStartValue","previousEndValue","RenderType_TimelineScaleComponent","View_TimelineScaleComponent_1","context","$implicit","View_TimelineScaleComponent_0","ngForOf","timeline_canvas_process_levels_store_instance","timeline_canvas_component_TimelineCanvasComponent","TimelineCanvasComponent","timelineLayerComponent","timelineCanvasProcessLevelsStore","height","update","zoomValue","onLayerChangeSubscriber","layerData","renderLevelSubscriber","renderLevel","level","onRenderLevel","ngAfterViewInit","initCanvasContext","requestLevels","canvasContext","canvasElement","getContext","createRecorderWorkerLevelsRequest","renderLevels","clearRect","beginPath","lineWidth","strokeStyle","forEach","index","x","y","moveTo","lineTo","stroke","closePath","isIncludedPosition","renderRecordedLevel","updatePositions","TimelineLayerComponent","onHorizontalDragStart","dragEventHasHappened","onHorizontalDrag","deltaX","onHorizontalDragEnd","timeline_canvas_process_levels_store_TimelineCanvasProcessLevelsStore","TimelineCanvasProcessLevelsStore","shouldTimelineMove","onRecordingProgress","onRecordingChange","previousTime","stopAnimation","requestAnimationFrameId","animate","moveTimeline","lastLevel","pop","RenderType_TimelineCanvasComponent","View_TimelineCanvasComponent_0","horizontal_drag_directive_HorizontalDragDirective","HorizontalDragDirective","documentService","onMouseMove","onTouchMove","endDrag","removeDocumentListeners","onMouseDown","startDrag","clientX","onTouchStart","changedTouches","stopPropagation","addDocumentListeners","addDocumentNoUserSelectClass","drag","removeDocumentNoUserSelectClass","TimelineLayerSelectComponent","onClick","RenderType_TimelineLayerSelectComponent","View_TimelineLayerSelectComponent_1","View_TimelineLayerSelectComponent_2","View_TimelineLayerSelectComponent_0","selected","timeline_layer_volume_component_TimelineLayerVolumeComponent","TimelineLayerVolumeComponent","volumeChangeStep","volume","volumeBeforeMute","onWheel","preventDefault","deltaY","decreaseVolume","increaseVolume","moveToClientX","track","trackElement","trackLeftPadding","parseInt","getComputedStyle","paddingLeft","replace","trackClientRect","getBoundingClientRect","trackClientLeft","trackClientWidth","setVolume","onIconClick","muteOrUnmute","mute","unmute","onKeyDown","keyCode","RenderType_TimelineLayerVolumeComponent","View_TimelineLayerVolumeComponent_1","View_TimelineLayerVolumeComponent_2","View_TimelineLayerVolumeComponent_3","View_TimelineLayerVolumeComponent_4","View_TimelineLayerVolumeComponent_0","buttonElement","iconElement","sliderElement","document_service","volumeIsHigh","volumeIsMedium","volumeIsLow","volumeIsMuted","sliderHandlePosition","TimelineLayerRemoveComponent","RenderType_TimelineLayerRemoveComponent","View_TimelineLayerRemoveComponent_0","RenderType_TimelineLayerComponent","View_TimelineLayerComponent_1","View_TimelineLayerComponent_0","canvasPositions","timeline_layers_component_TimelineLayersComponent","TimelineLayersComponent","updateCanvasPositions","getCanvasPositions","RenderType_TimelineLayersComponent","View_TimelineLayersComponent_1","View_TimelineLayersComponent_0","TimelineComponent","RenderType_TimelineComponent","View_TimelineComponent_0","TimelineBlockComponent","window","RenderType_TimelineBlockComponent","View_TimelineBlockComponent_0","RecordButtonsComponent","onUndoButtonClick","onRedoButtonClick","onRepeatButtonClick","onPlaybackButtonClick","togglePlayback","recordLength","onRecordingButtonClick","toggleRecording","recordingConfig","RenderType_RecordButtonsComponent","View_RecordButtonsComponent_0","repeatButtonIsDisabled","playbackButtonIsDisabled","recordingButtonIsDisabled","undoButtonDisabled","redoButtonDisabled","MillisecondsPipe","transform","hours","getHours","minutes","getMinutes","seconds","getSeconds","padNumber","number","string","toString","TimelineTimerComponent","updateMilliseconds","subscriber","RenderType_TimelineTimerComponent","View_TimelineTimerComponent_0","popup_component_PopupComponent","PopupComponent","elementRef","displayChange","onDocumentMouseDown","contains","RenderType_PopupComponent","View_PopupComponent_0","ShareLinkComponent","shareService","processing","mp3Data","upload","catch","showServerError","share_service_ShareService","ShareService","http","router","onRecordUrl","sendResponse","map","response","url","getRecordUrl","toPromise","post","environment","apiUrl","createFormData","localStorage","setItem","token","blob","Blob","file","File","formData","FormData","getItem","append","location","protocol","host","pathname","createUrlTree","id","RenderType_ShareLinkComponent","View_ShareLinkComponent_1","View_ShareLinkComponent_2","View_ShareLinkComponent_0","share_download_component_ShareDownloadComponent","ShareDownloadComponent","URL","createObjectURL","RenderType_ShareDownloadComponent","View_ShareDownloadComponent_1","View_ShareDownloadComponent_2","View_ShareDownloadComponent_0","ShareComponent","RenderType_ShareComponent","View_ShareComponent_0","message_service","ToolbarShareComponent","popupIsDisplayed","RenderType_ToolbarShareComponent","View_ToolbarShareComponent_1","display","View_ToolbarShareComponent_0","ToolbarComponent","RenderType_ToolbarComponent","View_ToolbarComponent_0","RecComponent","onRecordUrlSubscriber","shareModal","openModal","RenderType_RecComponent","View_RecComponent_1","View_RecComponent_0","meta_component_ngfactory","meta_component","platform_browser","title","description","keywords","modal_component_ngfactory","modal_component","closeOnBackgroundClick","singleLayer","noRecord","RecComponentNgFactory","AudioContext","WebAudioFactory","RecRoutingModule","__webpack_require__","d","__webpack_exports__","RecModuleNgFactory","esm5_forms","esm5_http","p0_0","api_service","esm5_router","shared_module","path"],"mappings":"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","file":"1.c5824ba1f87f1b612dde.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { RecComponent } from './rec.component';\r\nimport { RecRoutingModule } from './rec-routing.module';\r\nimport { ShareService } from './services/share.service';\r\nimport { WebAudioFactory } from './factories/web-audio.factory';\r\nimport { Player } from './entities/player';\r\nimport { TimelineCanvasProcessLevelsStore } from './timeline/timeline-canvas/timeline-canvas-process-levels.store';\r\nimport { RecorderStore } from './stores/recorder.store';\r\nimport { TimelineStore } from './timeline/timeline.store';\r\nimport { Recorder } from './entities/recorder';\r\nimport { TimelineTimerComponent } from './components/timer/timer.component';\r\nimport { MillisecondsPipe } from './pipes/milliseconds.pipe';\r\nimport { TimelineComponent } from './timeline/timeline.component';\r\nimport { TimelineScaleComponent } from './timeline/timeline-scale/timeline-scale.component';\r\nimport { TimelineLayerComponent } from './timeline/timeline-layer/timeline-layer.component';\r\nimport { TimelineLayersComponent } from './timeline/timeline-layers/timeline-layers.component';\r\nimport { TimelineScaleTickComponent } from './timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component';\r\nimport { TimelineButtonsComponent } from './timeline/timeline-buttons/timeline-buttons.component';\r\nimport { TimelineSliderComponent } from './timeline/timeline-slider/timeline-slider.component';\r\nimport { TimelineCanvasComponent } from './timeline/timeline-canvas/timeline-canvas.component';\r\nimport { TimelineLayerAddComponent } from './timeline/timeline-layer-add/timeline-layer-add.component';\r\nimport { ToolbarComponent } from './components/toolbar/toolbar.component';\r\nimport { TimelineLayerVolumeComponent } from './timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component';\r\nimport { TimelineLayerSelectComponent } from './timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component';\r\nimport { TimelineLayerRemoveComponent } from './timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component';\r\nimport { ShareDownloadComponent } from './components/share/share-download/share-download.component';\r\nimport { ShareLinkComponent } from './components/share/share-link/share-link.component';\r\nimport { ShareComponent } from './components/share/share.component';\r\nimport { RecordButtonsComponent } from './components/record-buttons/record-buttons.component';\r\nimport { ToolbarShareComponent } from './components/toolbar/toolbar-share/toolbar-share.component';\r\nimport { ShareLinkModalComponent } from './components/share/share-link/share-link-modal/share-link-modal.component';\r\nimport { TimelineBlockComponent } from './timeline/timeline-block/timeline-block.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RecRoutingModule,\r\n  ],\r\n  declarations: [\r\n    RecComponent,\r\n    TimelineTimerComponent,\r\n    MillisecondsPipe,\r\n    TimelineComponent,\r\n    TimelineScaleComponent,\r\n    TimelineLayerComponent,\r\n    TimelineLayersComponent,\r\n    TimelineScaleTickComponent,\r\n    TimelineButtonsComponent,\r\n    TimelineSliderComponent,\r\n    TimelineCanvasComponent,\r\n    TimelineLayerAddComponent,\r\n    ToolbarComponent,\r\n    TimelineLayerVolumeComponent,\r\n    TimelineLayerSelectComponent,\r\n    TimelineLayerRemoveComponent,\r\n    ShareDownloadComponent,\r\n    ShareLinkComponent,\r\n    ShareComponent,\r\n    RecordButtonsComponent,\r\n    ToolbarShareComponent,\r\n    ShareLinkModalComponent,\r\n    TimelineBlockComponent,\r\n  ],\r\n  providers: [\r\n    Recorder,\r\n    TimelineStore,\r\n    RecorderStore,\r\n    TimelineCanvasProcessLevelsStore,\r\n    Player,\r\n    WebAudioFactory,\r\n    ShareService,\r\n  ],\r\n})\r\nexport class RecModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.module.ts","export function forceDataDownload(data: any, type: string, filename: string) {\r\n  const url = URL.createObjectURL(new Blob(data, {type: type}));\r\n\r\n  openWindow(url, filename);\r\n}\r\n\r\nexport function openWindow(href: string, filename: string = '') {\r\n  const link = document.createElement('a');\r\n  link.href = href;\r\n  link.target = '_blank';\r\n\r\n  if (filename) {\r\n    link.download = filename;\r\n  }\r\n\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/helpers/force-download.ts","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { RecordUrl } from '../../../../../types';\r\nimport { openWindow } from '../../../../../shared/helpers/force-download';\r\n\r\n@Component({\r\n  selector: 'app-share-link-modal',\r\n  templateUrl: './share-link-modal.component.html',\r\n  styleUrls: ['./share-link-modal.component.styl']\r\n})\r\nexport class ShareLinkModalComponent implements OnInit {\r\n  @Input() recordUrl: RecordUrl;\r\n  copied = false;\r\n\r\n  @ViewChild('inputElement') inputElement: ElementRef;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onInputFocus() {\r\n    this.inputElement.nativeElement.select();\r\n  }\r\n\r\n  onCopyButtonClick() {\r\n    this.inputElement.nativeElement.select();\r\n\r\n    try {\r\n      this.copied = document.execCommand('copy');\r\n    } catch (err) {\r\n    }\r\n\r\n    setTimeout(() => this.copied = false, 2000);\r\n  }\r\n\r\n  onOpenButtonClick() {\r\n    openWindow(this.recordUrl);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./share-link-modal.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"./share-link-modal.component\";\r\nvar styles_ShareLinkModalComponent = [i0.styles];\r\nvar RenderType_ShareLinkModalComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_ShareLinkModalComponent, data: {} });\r\nexport { RenderType_ShareLinkModalComponent as RenderType_ShareLinkModalComponent };\r\nfunction View_ShareLinkModalComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, null, null, null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u041A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]))], null, null); }\r\nfunction View_ShareLinkModalComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, null, null, null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043E\"]))], null, null); }\r\nexport function View_ShareLinkModalComponent_0(_l) { return i1.ɵvid(0, [i1.ɵqud(402653184, 1, { inputElement: 0 }), (_l()(), i1.ɵeld(1, 0, null, null, 27, \"div\", [[\"class\", \"share-link-modal\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"h3\", [[\"class\", \"share-link-modal__title\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(6, 0, null, null, 18, \"div\", [[\"class\", \"share-link-modal-link\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(8, 0, [[1, 0], [\"inputElement\", 1]], null, 0, \"input\", [[\"class\", \"share-link-modal-link__input\"], [\"type\", \"text\"]], [[8, \"value\", 0]], [[null, \"focus\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"focus\" === en)) {\r\n        var pd_0 = (_co.onInputFocus() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(10, 0, null, null, 13, \"div\", [[\"class\", \"share-link-modal-link__buttons\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(12, 0, null, null, 7, \"button\", [[\"class\", \"share-link-modal-link__button share-link-modal-link__button--copy\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onCopyButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n        \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareLinkModalComponent_1)), i1.ɵdid(15, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n        \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareLinkModalComponent_2)), i1.ɵdid(18, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(21, 0, null, null, 1, \"button\", [[\"class\", \"share-link-modal-link__button share-link-modal-link__button--open\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onOpenButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C\"])), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(26, 0, null, null, 1, \"div\", [[\"class\", \"share-link-modal__text\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0417\\u0430\\u043F\\u0438\\u0441\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\\u0441\\u044F 2 \\u043D\\u0435\\u0434\\u0435\\u043B\\u0438 \\u0441 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430 \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0435\\u0433\\u043E \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u043A \\u043D\\u0435\\u0439. \\u041E\\u0431\\u0449\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F \\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u044F \\u043D\\u0435 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u043E.\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_1 = (_co.copied === false); _ck(_v, 15, 0, currVal_1); var currVal_2 = (_co.copied === true); _ck(_v, 18, 0, currVal_2); }, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.recordUrl; _ck(_v, 8, 0, currVal_0); }); }\r\nexport function View_ShareLinkModalComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-share-link-modal\", [], null, null, null, View_ShareLinkModalComponent_0, RenderType_ShareLinkModalComponent)), i1.ɵdid(1, 114688, null, 0, i3.ShareLinkModalComponent, [], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar ShareLinkModalComponentNgFactory = i1.ɵccf(\"app-share-link-modal\", i3.ShareLinkModalComponent, View_ShareLinkModalComponent_Host_0, { recordUrl: \"recordUrl\" }, {}, []);\r\nexport { ShareLinkModalComponentNgFactory as ShareLinkModalComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".share-link-modal[_ngcontent-%COMP%]{max-width:400px;min-width:280px;padding:20px;border-radius:6px;background:#fff;color:#333;text-align:left}.share-link-modal__title[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px}.share-link-modal-link[_ngcontent-%COMP%]{position:relative;margin:20px 0}.share-link-modal-link__button[_ngcontent-%COMP%], .share-link-modal-link__input[_ngcontent-%COMP%]{line-height:18px;border:none;border-radius:3px}.share-link-modal-link__input[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 12px;-webkit-box-sizing:border-box;box-sizing:border-box;background:#f2f2f2;font-size:14px}.share-link-modal-link__buttons[_ngcontent-%COMP%]{position:absolute;top:3px;right:3px}.share-link-modal-link__button[_ngcontent-%COMP%]{padding:5px 12px;background:#3d9fea;color:#fff;font-size:14px}.share-link-modal-link__button--open[_ngcontent-%COMP%]{background:#4caf50}.share-link-modal__text[_ngcontent-%COMP%]{line-height:18px;margin:20px 0 0;font-size:12px;color:#666}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"share-link-modal\">\r\n  <h3 class=\"share-link-modal__title\" i18n>Link to the recorded sound</h3>\r\n\r\n  <div class=\"share-link-modal-link\">\r\n    <input type=\"text\" class=\"share-link-modal-link__input\" [value]=\"recordUrl\" (focus)=\"onInputFocus()\" #inputElement>\r\n\r\n    <div class=\"share-link-modal-link__buttons\">\r\n      <button class=\"share-link-modal-link__button share-link-modal-link__button--copy\" (click)=\"onCopyButtonClick()\">\r\n        <ng-container *ngIf=\"copied === false\" i18n>Copy</ng-container>\r\n        <ng-container *ngIf=\"copied === true\" i18n>Copied</ng-container>\r\n      </button>\r\n      <button class=\"share-link-modal-link__button share-link-modal-link__button--open\" (click)=\"onOpenButtonClick()\" i18n>Open</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"share-link-modal__text\" i18n>\r\n    The recording will be stored 2 weeks from the date of last access to it. The total storage time is unlimited.\r\n  </div>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link-modal/share-link-modal.component.html","export enum MessageType {\r\n  ADD_RECORDING_PROGRESS,\r\n  ADD_LAYER,\r\n  REMOVE_LAYER,\r\n  GET_LEVELS,\r\n  START_RECORDING,\r\n  STOP_RECORDING,\r\n  GET_RECORD_DATA,\r\n  GET_COMPILED_RECORD,\r\n  SET_LAYER_VOLUME,\r\n  GET_RECORD_LENGTH,\r\n  UNDO,\r\n  REDO,\r\n  ON_LAYER_CHANGE,\r\n  ON_RECORD_CHANGE,\r\n  ON_HISTORY_CHANGE,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./worker/src/message-type.ts","import { EventEmitter, Injectable, NgZone } from '@angular/core';\r\nimport { TimelineCanvasLevel } from '../timeline/timeline-canvas/timeline-canvas-level';\r\nimport { Deferred } from '../../shared/helpers/deferred';\r\nimport { RecordData } from '../interfaces/record-data';\r\nimport { FIRST_LAYER_ID } from '../../constants';\r\nimport { HistoryData } from '../interfaces/history-data';\r\nimport { LayerData } from '../interfaces/layer-data';\r\nimport { SampleData } from '../interfaces/sample-data';\r\nimport { LayerId, Level, Milliseconds, Mp3Data } from '../../types';\r\nimport { MessageType } from '../../../../worker/src/message-type';\r\nimport { LayerLevelsRequest } from '../interfaces/layer-levels-range';\r\nimport { RecordingConfig } from '../interfaces/recording-config';\r\nimport { LayerVolume } from '../interfaces/layer-volume';\r\nimport { MessageData } from '../../../../worker/src/message-data';\r\n\r\nlet instance: RecorderStore;\r\n\r\n@Injectable()\r\nexport class RecorderStore {\r\n  private worker = new Worker('assets/worker.js');\r\n  private queue: Deferred<any>[] = [];\r\n\r\n  recordData: RecordData = {\r\n    length: 0,\r\n    layerIds: [\r\n      FIRST_LAYER_ID,\r\n    ],\r\n  };\r\n\r\n  historyData: HistoryData = {\r\n    appliedTransactionsNumber: 0,\r\n    rollbackTransactionsNumber: 0,\r\n  };\r\n\r\n  onRecordChange: EventEmitter<RecordData> = new EventEmitter();\r\n  onLayerChange: EventEmitter<LayerData> = new EventEmitter();\r\n  onSampleFinish: EventEmitter<SampleData> = new EventEmitter();\r\n  onHistoryChange: EventEmitter<HistoryData> = new EventEmitter();\r\n\r\n  constructor(zone: NgZone) {\r\n    if (instance) {\r\n      return instance;\r\n    } else {\r\n      instance = this;\r\n    }\r\n\r\n    this.worker.addEventListener('message', event => zone.run(() => {\r\n      this.onMessage(event);\r\n    }));\r\n\r\n    this.onRecordChange.subscribe(recordData => this.recordData = recordData);\r\n    this.onHistoryChange.subscribe(historyData => this.historyData = historyData);\r\n  }\r\n\r\n  get lastLayerId(): LayerId {\r\n    const layerIds = this.recordData.layerIds;\r\n\r\n    return layerIds[layerIds.length - 1];\r\n  }\r\n\r\n  undo() {\r\n    return this.postMessage(MessageType.UNDO);\r\n  }\r\n\r\n  redo() {\r\n    return this.postMessage(MessageType.REDO);\r\n  }\r\n\r\n  getLevels(payload: LayerLevelsRequest): Promise<Level[]> {\r\n    return this.postPromiseMessage(MessageType.GET_LEVELS, payload);\r\n  }\r\n\r\n  getRecordLength(): Promise<Milliseconds> {\r\n    return this.postPromiseMessage(MessageType.GET_RECORD_LENGTH);\r\n  }\r\n\r\n  addRecordingProgress(float32Array: Float32Array): Promise<TimelineCanvasLevel[]> {\r\n    return this.postPromiseMessage(MessageType.ADD_RECORDING_PROGRESS, float32Array);\r\n  }\r\n\r\n  startRecording(payload: RecordingConfig) {\r\n    this.postMessage(MessageType.START_RECORDING, payload);\r\n  }\r\n\r\n  addLayer(): Promise<LayerId[]> {\r\n    return this.postPromiseMessage(MessageType.ADD_LAYER);\r\n  }\r\n\r\n  removeLayer(layerId: LayerId): Promise<LayerId[]> {\r\n    return this.postPromiseMessage(MessageType.REMOVE_LAYER, layerId);\r\n  }\r\n\r\n  stopRecording(): Promise<SampleData> {\r\n    return this.postPromiseEventMessage(MessageType.STOP_RECORDING, 'onSampleFinish');\r\n  }\r\n\r\n  postPromiseEventMessage(messageType: MessageType, eventName: string, payload?: any): Promise<any> {\r\n    const promise = this.postPromiseMessage(messageType, payload);\r\n    promise.then(data => this[eventName].emit(data));\r\n    return promise;\r\n  }\r\n\r\n  getRecordData(startPosition: Milliseconds): Promise<Float32Array> {\r\n    return this.postPromiseMessage(MessageType.GET_RECORD_DATA, startPosition);\r\n  }\r\n\r\n  getCompiledRecord(): Promise<Mp3Data> {\r\n    return this.postPromiseMessage(MessageType.GET_COMPILED_RECORD);\r\n  }\r\n\r\n  setLayerVolume(payload: LayerVolume) {\r\n    this.postMessage(MessageType.SET_LAYER_VOLUME, payload);\r\n  }\r\n\r\n  private postPromiseMessage(type: MessageType, payload?: any): Promise<any> {\r\n    const deferred = new Deferred();\r\n\r\n    this.queue.push(deferred);\r\n    this.postMessage(type, payload);\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  private postMessage(type: MessageType, payload?: any) {\r\n    this.worker.postMessage({type, payload} as MessageData);\r\n  }\r\n\r\n  private onMessage(event: MessageEvent) {\r\n    if (!event.data) {\r\n      return;\r\n    }\r\n\r\n    const data: MessageData = event.data;\r\n\r\n    switch (data.type) {\r\n      case MessageType.ON_RECORD_CHANGE:\r\n        this.onRecordChange.emit(data.payload as RecordData);\r\n        break;\r\n      case MessageType.ON_LAYER_CHANGE:\r\n        this.onLayerChange.emit(data.payload as LayerData);\r\n        break;\r\n      case MessageType.ON_HISTORY_CHANGE:\r\n        this.onHistoryChange.emit(data.payload as HistoryData);\r\n        break;\r\n      default:\r\n        this.queue.shift()\r\n          .resolve(data.payload);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/stores/recorder.store.ts","import { Component } from '@angular/core';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nimport { TimelineStore } from '../timeline.store';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layer-add',\r\n  templateUrl: './timeline-layer-add.component.html',\r\n  styleUrls: ['./timeline-layer-add.component.styl']\r\n})\r\nexport class TimelineLayerAddComponent {\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n    private timelineStore: TimelineStore,\r\n  ) {\r\n  }\r\n\r\n  onButtonClick() {\r\n    this.addLayer();\r\n  }\r\n\r\n  addLayer() {\r\n    this.recorderStore.addLayer()\r\n      .then(() => this.timelineStore.selectLastLayer());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.ts","export class Deferred<T> {\r\n  public promise: Promise<T>;\r\n\r\n  private state: 'pending' | 'fulfilled' | 'rejected' = 'pending';\r\n\r\n  private _promiseResolve: Function;\r\n  private _promiseReject: Function;\r\n\r\n  constructor() {\r\n    this.promise = new Promise((resolve, reject) => {\r\n      this._promiseResolve = resolve;\r\n      this._promiseReject = reject;\r\n    });\r\n\r\n    this.promise.then(\r\n      () => this.state = 'fulfilled',\r\n      () => this.state = 'rejected'\r\n    );\r\n  }\r\n\r\n  resolve(value?: any) {\r\n    if (this.isPending()) {\r\n      this._promiseResolve(value);\r\n    } else {\r\n      throw new Error('Deferred cannot be resolved twice');\r\n    }\r\n  }\r\n\r\n  reject(reason?: any) {\r\n    if (this.isPending()) {\r\n      this._promiseReject(reason);\r\n    } else {\r\n      throw new Error('Deferred cannot be resolved twice');\r\n    }\r\n  }\r\n\r\n  isResolved() {\r\n    return this.state !== 'pending';\r\n  }\r\n\r\n  isPending() {\r\n    return this.state === 'pending';\r\n  }\r\n\r\n  isFulfilled() {\r\n    return this.state === 'fulfilled';\r\n  }\r\n\r\n  isRejected() {\r\n    return this.state === 'rejected';\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/helpers/deferred.ts","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { LayerId, Milliseconds, Pixels, ZoomValue } from '../../types';\r\nimport {\r\n  FIRST_LAYER_ID, TIMELINE_CANVAS_LEVEL_STEP, TIMELINE_DEFAULT_WIDTH, TIMELINE_DEFAULT_ZOOM, TIMELINE_MAX_ZOOM,\r\n  TIMELINE_MIN_ZOOM\r\n} from '../../constants';\r\nimport { Player } from '../entities/player';\r\nimport { RecorderStore } from '../stores/recorder.store';\r\nimport { RecordData } from '../interfaces/record-data';\r\nimport { PlaybackConfig } from '../interfaces/playback-config';\r\nimport { RecordingConfig } from '../interfaces/recording-config';\r\n\r\nlet instance: TimelineStore;\r\n\r\n@Injectable()\r\nexport class TimelineStore {\r\n  private _currentPosition: Milliseconds = 0;\r\n  private _zoom: ZoomValue = TIMELINE_DEFAULT_ZOOM;\r\n  private _width: Pixels = TIMELINE_DEFAULT_WIDTH;\r\n\r\n  private playbackPreviousTime: number;\r\n  private playbackRequestAnimationFrameId: number;\r\n\r\n  public currentPositionChange: EventEmitter<Milliseconds> = new EventEmitter();\r\n  public zoomChange: EventEmitter<ZoomValue> = new EventEmitter();\r\n  public widthChange: EventEmitter<Pixels> = new EventEmitter();\r\n  public change = new EventEmitter();\r\n\r\n  public selectedLayerId: LayerId = FIRST_LAYER_ID;\r\n\r\n  constructor(\r\n    private player: Player,\r\n    private recorderStore: RecorderStore,\r\n  ) {\r\n    if (instance) {\r\n      return instance;\r\n    } else {\r\n      instance = this;\r\n    }\r\n\r\n    recorderStore.onSampleFinish\r\n      .subscribe(sampleData => this.currentPosition = sampleData.endPosition);\r\n\r\n    recorderStore.onRecordChange\r\n      .subscribe(recordData => this.onRecordChange(recordData));\r\n\r\n    player.onPlaybackStart\r\n      .subscribe((playbackConfig) => this.onPlaybackStart(playbackConfig));\r\n\r\n    player.onPlaybackStop\r\n      .subscribe(() => this.onPlaybackStop());\r\n\r\n    player.onPlaybackFinish\r\n      .subscribe((playbackConfig) => this.onPlaybackFinish(playbackConfig));\r\n  }\r\n\r\n  private onRecordChange(recordData: RecordData) {\r\n    if (recordData.layerIds.indexOf(this.selectedLayerId) === -1) {\r\n      this.selectLastLayer();\r\n    }\r\n  }\r\n\r\n  selectLastLayer() {\r\n    this.selectedLayerId = this.recorderStore.lastLayerId;\r\n  }\r\n\r\n  private onPlaybackStart(playbackConfig: PlaybackConfig) {\r\n    this.currentPosition = playbackConfig.startPosition;\r\n    this.playbackPreviousTime = Date.now();\r\n\r\n    this.requestPlaybackAnimationFrame();\r\n  }\r\n\r\n  private playbackAnimate() {\r\n    const currentTime = Date.now();\r\n\r\n    this.currentPosition += currentTime - this.playbackPreviousTime;\r\n    this.playbackPreviousTime = currentTime;\r\n\r\n    this.requestPlaybackAnimationFrame();\r\n  }\r\n\r\n  private requestPlaybackAnimationFrame() {\r\n    this.playbackRequestAnimationFrameId = requestAnimationFrame(() => this.playbackAnimate());\r\n  }\r\n\r\n  private cancelPlaybackAnimationFrame() {\r\n    cancelAnimationFrame(this.playbackRequestAnimationFrameId);\r\n  }\r\n\r\n  private onPlaybackStop() {\r\n    this.cancelPlaybackAnimationFrame();\r\n  }\r\n\r\n  private onPlaybackFinish(playbackConfig: PlaybackConfig) {\r\n    this.cancelPlaybackAnimationFrame();\r\n    this.currentPosition = playbackConfig.endPosition;\r\n  }\r\n\r\n  isMaxZoom() {\r\n    return this._zoom === TIMELINE_MAX_ZOOM;\r\n  }\r\n\r\n  isMinZoom() {\r\n    return this._zoom === TIMELINE_MIN_ZOOM;\r\n  }\r\n\r\n  get step() {\r\n    return this.convertPixelsToMilliseconds(TIMELINE_CANVAS_LEVEL_STEP);\r\n  }\r\n\r\n  set currentPosition(value) {\r\n    if (value < 0) {\r\n      value = 0;\r\n    } else {\r\n      value = Math.round(value);\r\n    }\r\n\r\n    if (this._currentPosition !== value) {\r\n      this._currentPosition = value;\r\n      this.currentPositionChange.emit(value);\r\n      this.change.emit();\r\n    }\r\n  }\r\n\r\n  get currentPosition(): Milliseconds {\r\n    return this._currentPosition;\r\n  }\r\n\r\n  get recordingConfig(): RecordingConfig {\r\n    return {\r\n      layerId: this.selectedLayerId,\r\n      position: this.currentPosition,\r\n      step: this.step,\r\n    };\r\n  }\r\n\r\n  set zoom(value) {\r\n    if (value > TIMELINE_MAX_ZOOM) {\r\n      value = TIMELINE_MAX_ZOOM;\r\n    } else if (value < TIMELINE_MIN_ZOOM) {\r\n      value = TIMELINE_MIN_ZOOM;\r\n    }\r\n\r\n    this._zoom = value;\r\n    this.zoomChange.emit(value);\r\n    this.change.emit();\r\n  }\r\n\r\n  get zoom(): ZoomValue {\r\n    return this._zoom;\r\n  }\r\n\r\n  set width(value) {\r\n    this._width = value;\r\n    this.widthChange.emit(value);\r\n    this.change.emit();\r\n  }\r\n\r\n  get width(): Pixels {\r\n    return this._width;\r\n  }\r\n\r\n  get currentPositionInPixels(): Pixels {\r\n    return this.convertMillisecondsToPixels(this.currentPosition);\r\n  }\r\n\r\n  get startVisiblePosition(): Milliseconds {\r\n    return this.currentPosition - this.halfWidthInMilliseconds;\r\n  }\r\n\r\n  get startVisiblePositionInPixels(): Pixels {\r\n    return this.convertMillisecondsToPixels(this.startVisiblePosition);\r\n  }\r\n\r\n  get endVisiblePosition(): Milliseconds {\r\n    return this.currentPosition + this.halfWidthInMilliseconds;\r\n  }\r\n\r\n  get widthInMilliseconds(): Milliseconds {\r\n    return this.convertPixelsToMilliseconds(this.width);\r\n  }\r\n\r\n  get halfWidthInMilliseconds(): Milliseconds {\r\n    return this.convertPixelsToMilliseconds(this.halfWidth);\r\n  }\r\n\r\n  get halfWidth(): Pixels {\r\n    return this.width / 2;\r\n  }\r\n\r\n  convertPixelsToMilliseconds(pixels: Pixels): Milliseconds {\r\n    return pixels / this.zoom;\r\n  }\r\n\r\n  convertMillisecondsToPixels(milliseconds: Milliseconds): Pixels {\r\n    return Math.round(milliseconds * this.zoom);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.store.ts","import { EventEmitter, NgZone } from '@angular/core';\r\nimport { Deferred } from '../../shared/helpers/deferred';\r\nimport { FIRST_LAYER_ID } from '../../constants';\r\nimport { MessageType } from '../../../../worker/src/message-type';\r\nvar instance;\r\nvar RecorderStore = /** @class */ (function () {\r\n    function RecorderStore(zone) {\r\n        var _this = this;\r\n        this.worker = new Worker('assets/worker.js');\r\n        this.queue = [];\r\n        this.recordData = {\r\n            length: 0,\r\n            layerIds: [\r\n                FIRST_LAYER_ID,\r\n            ],\r\n        };\r\n        this.historyData = {\r\n            appliedTransactionsNumber: 0,\r\n            rollbackTransactionsNumber: 0,\r\n        };\r\n        this.onRecordChange = new EventEmitter();\r\n        this.onLayerChange = new EventEmitter();\r\n        this.onSampleFinish = new EventEmitter();\r\n        this.onHistoryChange = new EventEmitter();\r\n        if (instance) {\r\n            return instance;\r\n        }\r\n        else {\r\n            instance = this;\r\n        }\r\n        this.worker.addEventListener('message', function (event) { return zone.run(function () {\r\n            _this.onMessage(event);\r\n        }); });\r\n        this.onRecordChange.subscribe(function (recordData) { return _this.recordData = recordData; });\r\n        this.onHistoryChange.subscribe(function (historyData) { return _this.historyData = historyData; });\r\n    }\r\n    Object.defineProperty(RecorderStore.prototype, \"lastLayerId\", {\r\n        get: function () {\r\n            var layerIds = this.recordData.layerIds;\r\n            return layerIds[layerIds.length - 1];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecorderStore.prototype.undo = function () {\r\n        return this.postMessage(MessageType.UNDO);\r\n    };\r\n    RecorderStore.prototype.redo = function () {\r\n        return this.postMessage(MessageType.REDO);\r\n    };\r\n    RecorderStore.prototype.getLevels = function (payload) {\r\n        return this.postPromiseMessage(MessageType.GET_LEVELS, payload);\r\n    };\r\n    RecorderStore.prototype.getRecordLength = function () {\r\n        return this.postPromiseMessage(MessageType.GET_RECORD_LENGTH);\r\n    };\r\n    RecorderStore.prototype.addRecordingProgress = function (float32Array) {\r\n        return this.postPromiseMessage(MessageType.ADD_RECORDING_PROGRESS, float32Array);\r\n    };\r\n    RecorderStore.prototype.startRecording = function (payload) {\r\n        this.postMessage(MessageType.START_RECORDING, payload);\r\n    };\r\n    RecorderStore.prototype.addLayer = function () {\r\n        return this.postPromiseMessage(MessageType.ADD_LAYER);\r\n    };\r\n    RecorderStore.prototype.removeLayer = function (layerId) {\r\n        return this.postPromiseMessage(MessageType.REMOVE_LAYER, layerId);\r\n    };\r\n    RecorderStore.prototype.stopRecording = function () {\r\n        return this.postPromiseEventMessage(MessageType.STOP_RECORDING, 'onSampleFinish');\r\n    };\r\n    RecorderStore.prototype.postPromiseEventMessage = function (messageType, eventName, payload) {\r\n        var _this = this;\r\n        var promise = this.postPromiseMessage(messageType, payload);\r\n        promise.then(function (data) { return _this[eventName].emit(data); });\r\n        return promise;\r\n    };\r\n    RecorderStore.prototype.getRecordData = function (startPosition) {\r\n        return this.postPromiseMessage(MessageType.GET_RECORD_DATA, startPosition);\r\n    };\r\n    RecorderStore.prototype.getCompiledRecord = function () {\r\n        return this.postPromiseMessage(MessageType.GET_COMPILED_RECORD);\r\n    };\r\n    RecorderStore.prototype.setLayerVolume = function (payload) {\r\n        this.postMessage(MessageType.SET_LAYER_VOLUME, payload);\r\n    };\r\n    RecorderStore.prototype.postPromiseMessage = function (type, payload) {\r\n        var deferred = new Deferred();\r\n        this.queue.push(deferred);\r\n        this.postMessage(type, payload);\r\n        return deferred.promise;\r\n    };\r\n    RecorderStore.prototype.postMessage = function (type, payload) {\r\n        this.worker.postMessage({ type: type, payload: payload });\r\n    };\r\n    RecorderStore.prototype.onMessage = function (event) {\r\n        if (!event.data) {\r\n            return;\r\n        }\r\n        var data = event.data;\r\n        switch (data.type) {\r\n            case MessageType.ON_RECORD_CHANGE:\r\n                this.onRecordChange.emit(data.payload);\r\n                break;\r\n            case MessageType.ON_LAYER_CHANGE:\r\n                this.onLayerChange.emit(data.payload);\r\n                break;\r\n            case MessageType.ON_HISTORY_CHANGE:\r\n                this.onHistoryChange.emit(data.payload);\r\n                break;\r\n            default:\r\n                this.queue.shift()\r\n                    .resolve(data.payload);\r\n        }\r\n    };\r\n    return RecorderStore;\r\n}());\r\nexport { RecorderStore };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/stores/recorder.store.ts.pre-build-optimizer.js","import { EventEmitter } from '@angular/core';\r\nimport { FIRST_LAYER_ID, TIMELINE_CANVAS_LEVEL_STEP, TIMELINE_DEFAULT_WIDTH, TIMELINE_DEFAULT_ZOOM, TIMELINE_MAX_ZOOM, TIMELINE_MIN_ZOOM } from '../../constants';\r\nimport { Player } from '../entities/player';\r\nimport { RecorderStore } from '../stores/recorder.store';\r\nvar instance;\r\nvar TimelineStore = /** @class */ (function () {\r\n    function TimelineStore(player, recorderStore) {\r\n        var _this = this;\r\n        this.player = player;\r\n        this.recorderStore = recorderStore;\r\n        this._currentPosition = 0;\r\n        this._zoom = TIMELINE_DEFAULT_ZOOM;\r\n        this._width = TIMELINE_DEFAULT_WIDTH;\r\n        this.currentPositionChange = new EventEmitter();\r\n        this.zoomChange = new EventEmitter();\r\n        this.widthChange = new EventEmitter();\r\n        this.change = new EventEmitter();\r\n        this.selectedLayerId = FIRST_LAYER_ID;\r\n        if (instance) {\r\n            return instance;\r\n        }\r\n        else {\r\n            instance = this;\r\n        }\r\n        recorderStore.onSampleFinish\r\n            .subscribe(function (sampleData) { return _this.currentPosition = sampleData.endPosition; });\r\n        recorderStore.onRecordChange\r\n            .subscribe(function (recordData) { return _this.onRecordChange(recordData); });\r\n        player.onPlaybackStart\r\n            .subscribe(function (playbackConfig) { return _this.onPlaybackStart(playbackConfig); });\r\n        player.onPlaybackStop\r\n            .subscribe(function () { return _this.onPlaybackStop(); });\r\n        player.onPlaybackFinish\r\n            .subscribe(function (playbackConfig) { return _this.onPlaybackFinish(playbackConfig); });\r\n    }\r\n    TimelineStore.prototype.onRecordChange = function (recordData) {\r\n        if (recordData.layerIds.indexOf(this.selectedLayerId) === -1) {\r\n            this.selectLastLayer();\r\n        }\r\n    };\r\n    TimelineStore.prototype.selectLastLayer = function () {\r\n        this.selectedLayerId = this.recorderStore.lastLayerId;\r\n    };\r\n    TimelineStore.prototype.onPlaybackStart = function (playbackConfig) {\r\n        this.currentPosition = playbackConfig.startPosition;\r\n        this.playbackPreviousTime = Date.now();\r\n        this.requestPlaybackAnimationFrame();\r\n    };\r\n    TimelineStore.prototype.playbackAnimate = function () {\r\n        var currentTime = Date.now();\r\n        this.currentPosition += currentTime - this.playbackPreviousTime;\r\n        this.playbackPreviousTime = currentTime;\r\n        this.requestPlaybackAnimationFrame();\r\n    };\r\n    TimelineStore.prototype.requestPlaybackAnimationFrame = function () {\r\n        var _this = this;\r\n        this.playbackRequestAnimationFrameId = requestAnimationFrame(function () { return _this.playbackAnimate(); });\r\n    };\r\n    TimelineStore.prototype.cancelPlaybackAnimationFrame = function () {\r\n        cancelAnimationFrame(this.playbackRequestAnimationFrameId);\r\n    };\r\n    TimelineStore.prototype.onPlaybackStop = function () {\r\n        this.cancelPlaybackAnimationFrame();\r\n    };\r\n    TimelineStore.prototype.onPlaybackFinish = function (playbackConfig) {\r\n        this.cancelPlaybackAnimationFrame();\r\n        this.currentPosition = playbackConfig.endPosition;\r\n    };\r\n    TimelineStore.prototype.isMaxZoom = function () {\r\n        return this._zoom === TIMELINE_MAX_ZOOM;\r\n    };\r\n    TimelineStore.prototype.isMinZoom = function () {\r\n        return this._zoom === TIMELINE_MIN_ZOOM;\r\n    };\r\n    Object.defineProperty(TimelineStore.prototype, \"step\", {\r\n        get: function () {\r\n            return this.convertPixelsToMilliseconds(TIMELINE_CANVAS_LEVEL_STEP);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"currentPosition\", {\r\n        get: function () {\r\n            return this._currentPosition;\r\n        },\r\n        set: function (value) {\r\n            if (value < 0) {\r\n                value = 0;\r\n            }\r\n            else {\r\n                value = Math.round(value);\r\n            }\r\n            if (this._currentPosition !== value) {\r\n                this._currentPosition = value;\r\n                this.currentPositionChange.emit(value);\r\n                this.change.emit();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"recordingConfig\", {\r\n        get: function () {\r\n            return {\r\n                layerId: this.selectedLayerId,\r\n                position: this.currentPosition,\r\n                step: this.step,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"zoom\", {\r\n        get: function () {\r\n            return this._zoom;\r\n        },\r\n        set: function (value) {\r\n            if (value > TIMELINE_MAX_ZOOM) {\r\n                value = TIMELINE_MAX_ZOOM;\r\n            }\r\n            else if (value < TIMELINE_MIN_ZOOM) {\r\n                value = TIMELINE_MIN_ZOOM;\r\n            }\r\n            this._zoom = value;\r\n            this.zoomChange.emit(value);\r\n            this.change.emit();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"width\", {\r\n        get: function () {\r\n            return this._width;\r\n        },\r\n        set: function (value) {\r\n            this._width = value;\r\n            this.widthChange.emit(value);\r\n            this.change.emit();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"currentPositionInPixels\", {\r\n        get: function () {\r\n            return this.convertMillisecondsToPixels(this.currentPosition);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"startVisiblePosition\", {\r\n        get: function () {\r\n            return this.currentPosition - this.halfWidthInMilliseconds;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"startVisiblePositionInPixels\", {\r\n        get: function () {\r\n            return this.convertMillisecondsToPixels(this.startVisiblePosition);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"endVisiblePosition\", {\r\n        get: function () {\r\n            return this.currentPosition + this.halfWidthInMilliseconds;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"widthInMilliseconds\", {\r\n        get: function () {\r\n            return this.convertPixelsToMilliseconds(this.width);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"halfWidthInMilliseconds\", {\r\n        get: function () {\r\n            return this.convertPixelsToMilliseconds(this.halfWidth);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineStore.prototype, \"halfWidth\", {\r\n        get: function () {\r\n            return this.width / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineStore.prototype.convertPixelsToMilliseconds = function (pixels) {\r\n        return pixels / this.zoom;\r\n    };\r\n    TimelineStore.prototype.convertMillisecondsToPixels = function (milliseconds) {\r\n        return Math.round(milliseconds * this.zoom);\r\n    };\r\n    return TimelineStore;\r\n}());\r\nexport { TimelineStore };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.store.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layer-add.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-layer-add.component\";\r\nimport * as i3 from \"../../stores/recorder.store\";\r\nimport * as i4 from \"../timeline.store\";\r\nvar styles_TimelineLayerAddComponent = [i0.styles];\r\nvar RenderType_TimelineLayerAddComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayerAddComponent, data: {} });\r\nexport { RenderType_TimelineLayerAddComponent as RenderType_TimelineLayerAddComponent };\r\nexport function View_TimelineLayerAddComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"button\", [[\"class\", \"timeline-layer-add hide-on-recording hide-on-playback\"], [\"title\", \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043B\\u043E\\u0439\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 0, \"span\", [[\"class\", \"timeline-layer-add__icon icon-add-box\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(4, 0, null, null, 1, \"span\", [], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043B\\u043E\\u0439\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_TimelineLayerAddComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer-add\", [], null, null, null, View_TimelineLayerAddComponent_0, RenderType_TimelineLayerAddComponent)), i1.ɵdid(1, 49152, null, 0, i2.TimelineLayerAddComponent, [i3.RecorderStore, i4.TimelineStore], null, null)], null, null); }\r\nvar TimelineLayerAddComponentNgFactory = i1.ɵccf(\"app-timeline-layer-add\", i2.TimelineLayerAddComponent, View_TimelineLayerAddComponent_Host_0, {}, {}, []);\r\nexport { TimelineLayerAddComponentNgFactory as TimelineLayerAddComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-layer-add[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:36px;padding:0 12px 0 42px;margin:0 auto;border:none;border-radius:3px;background:rgba(0,0,0,.2);color:#fff;font-size:14px}.timeline-layer-add[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.25)}.timeline-layer-add[_ngcontent-%COMP%]:active{background-color:rgba(0,0,0,.3)}.timeline-layer-add__icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;margin-top:-12px;font-size:24px}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<button\r\n  class=\"timeline-layer-add hide-on-recording hide-on-playback\"\r\n  (click)=\"onButtonClick()\"\r\n  title=\"Add a new layer\"\r\n  i18n-title\r\n>\r\n  <span class=\"timeline-layer-add__icon icon-add-box\"></span>\r\n  <span i18n>Add a new layer</span>\r\n</button>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer-add/timeline-layer-add.component.html","export function lowerDividend(value: number, divider: number): number {\r\n  return Math.floor(value / divider) * divider;\r\n}\r\n\r\nexport function nearestDividend(value: number, divider: number): number {\r\n  return Math.round(value / divider) * divider;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/helpers/math.helpers.ts","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nimport { TIMELINE_TICK_WIDTH } from '../../../constants';\r\nimport { nearestDividend } from '../../../shared/helpers/math.helpers';\r\nimport { Player } from '../../entities/player';\r\nimport { Recorder } from '../../entities/recorder';\r\n\r\n@Component({\r\n  selector: 'app-timeline-buttons',\r\n  templateUrl: 'timeline-buttons.component.html',\r\n  styleUrls: ['timeline-buttons.component.styl']\r\n})\r\nexport class TimelineButtonsComponent implements OnInit, OnDestroy {\r\n  public inButtonIsDisabled = false;\r\n  public outButtonIsDisabled = false;\r\n\r\n  private zoomChangeSubscriber: Subscriber<number>;\r\n\r\n  constructor(\r\n    public timelineStore: TimelineStore,\r\n    public recorderStore: RecorderStore,\r\n    private recorder: Recorder,\r\n    private player: Player\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.zoomChangeSubscriber = this.timelineStore.zoomChange\r\n      .subscribe(() => this.onZoomChange());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zoomChangeSubscriber.unsubscribe();\r\n  }\r\n\r\n  private onZoomChange() {\r\n    this.updateButtonStates();\r\n  }\r\n\r\n  private updateButtonStates() {\r\n    this.outButtonIsDisabled = this.timelineStore.isMinZoom();\r\n    this.inButtonIsDisabled = this.timelineStore.isMaxZoom();\r\n  }\r\n\r\n  onZoomOutButtonClick() {\r\n    this.timelineStore.zoom /= 2;\r\n  }\r\n\r\n  onZoomInButtonClick() {\r\n    this.timelineStore.zoom *= 2;\r\n  }\r\n\r\n  get startButtonIsDisabled(): boolean {\r\n    return this.recorder.recording || this.player.playback || this.timelineStore.currentPosition === 0;\r\n  }\r\n\r\n  onStartButtonClick() {\r\n    this.timelineStore.currentPosition = 0;\r\n  }\r\n\r\n  get endButtonIsDisabled(): boolean {\r\n    return this.recorder.recording ||\r\n      this.player.playback ||\r\n      this.recorderStore.recordData.length === 0 ||\r\n      this.timelineStore.currentPosition === this.recorderStore.recordData.length;\r\n  }\r\n\r\n  onEndButtonClick() {\r\n    this.timelineStore.currentPosition = this.recorderStore.recordData.length;\r\n  }\r\n\r\n  get backwardButtonIsDisabled(): boolean {\r\n    return this.timelineStore.currentPosition === 0;\r\n  }\r\n\r\n  onBackwardButtonClick() {\r\n    const step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_TICK_WIDTH);\r\n    const currentPosition = this.timelineStore.currentPosition;\r\n    const roundedCurrentPosition = nearestDividend(this.timelineStore.currentPosition, step);\r\n\r\n    if (currentPosition > roundedCurrentPosition) {\r\n      this.timelineStore.currentPosition = roundedCurrentPosition;\r\n    } else {\r\n      this.timelineStore.currentPosition = roundedCurrentPosition - step;\r\n    }\r\n  }\r\n\r\n  onForwardButtonClick() {\r\n    const step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_TICK_WIDTH);\r\n    const currentPosition = this.timelineStore.currentPosition;\r\n    const roundedCurrentPosition = nearestDividend(this.timelineStore.currentPosition, step);\r\n\r\n    if (currentPosition < roundedCurrentPosition) {\r\n      this.timelineStore.currentPosition = roundedCurrentPosition;\r\n    } else {\r\n      this.timelineStore.currentPosition = roundedCurrentPosition + step;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ts","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { TimelineCanvasLevel } from '../timeline/timeline-canvas/timeline-canvas-level';\r\nimport { RecorderStore } from '../stores/recorder.store';\r\nimport { RecordingConfig } from '../interfaces/recording-config';\r\nimport { SCRIPT_PROCESSOR_BUFFER_SIZE } from '../../constants';\r\nimport { MessageService } from '../../shared/services/message.service';\r\nimport { WebAudioFactory } from '../factories/web-audio.factory';\r\nimport { Deferred } from '../../shared/helpers/deferred';\r\n\r\nlet instance: Recorder;\r\n\r\n@Injectable()\r\nexport class Recorder {\r\n  private scriptProcessorBufferSize = SCRIPT_PROCESSOR_BUFFER_SIZE;\r\n  private audioContext: AudioContext;\r\n  private scriptProcessor: ScriptProcessorNode;\r\n  private mediaStream: MediaStream;\r\n  private mediaStreamAudioSource: MediaStreamAudioSourceNode;\r\n\r\n  public recording = false;\r\n  public recordingChange: EventEmitter<boolean> = new EventEmitter();\r\n\r\n  onProgress: EventEmitter<TimelineCanvasLevel[]> = new EventEmitter();\r\n\r\n  public config: RecordingConfig;\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n    private messageService: MessageService,\r\n    private webAudioFactory: WebAudioFactory,\r\n  ) {\r\n    if (instance) {\r\n      return instance;\r\n    } else {\r\n      instance = this;\r\n    }\r\n\r\n    this.onAudioProcess = this.onAudioProcess.bind(this);\r\n  }\r\n\r\n  private setRecording(value: boolean) {\r\n    this.recording = value;\r\n    this.recordingChange.emit(value);\r\n  }\r\n\r\n  stopRecording() {\r\n    this.stopCollectAudioData();\r\n  }\r\n\r\n  startRecording(config: RecordingConfig) {\r\n    this.config = config;\r\n\r\n    if (this.hasInfrastructureToBePrepared()) {\r\n      this.prepareInfrastructure()\r\n        .then(\r\n          () => this.preStartCollectAudioData(),\r\n          error => this.messageService.showError(error),\r\n        );\r\n    } else {\r\n      this.preStartCollectAudioData();\r\n    }\r\n  }\r\n\r\n  private hasInfrastructureToBePrepared(): boolean {\r\n    return this.mediaStreamAudioSource === undefined;\r\n  }\r\n\r\n  private prepareInfrastructure(): Promise<any> {\r\n    return this.requestStream()\r\n      .then(() => this.createContext())\r\n      .then(() => this.createScriptProcessor())\r\n      .then(() => this.createMediaStreamAudioSource());\r\n  }\r\n\r\n  private createContext(): Promise<any> {\r\n    this.audioContext = this.webAudioFactory.getAudioContext();\r\n\r\n    if (this.audioContext) {\r\n      return Promise.resolve();\r\n    } else {\r\n      return Promise.reject(this.messageService.browserError);\r\n    }\r\n  }\r\n\r\n  private createScriptProcessor(): Promise<any> {\r\n    if (this.audioContext.createScriptProcessor) {\r\n      this.scriptProcessor = this.audioContext.createScriptProcessor(this.scriptProcessorBufferSize, 1, 1);\r\n\r\n      return Promise.resolve();\r\n    } else {\r\n      return Promise.reject(this.messageService.browserError);\r\n    }\r\n  }\r\n\r\n  private createMediaStreamAudioSource(): Promise<any> {\r\n    this.mediaStreamAudioSource = this.audioContext.createMediaStreamSource(this.mediaStream);\r\n    return Promise.resolve();\r\n  }\r\n\r\n  private requestStream(): Promise<any> {\r\n    navigator.getUserMedia = navigator.getUserMedia ||\r\n      navigator['webkitGetUserMedia'] ||\r\n      navigator['mozGetUserMedia'] ||\r\n      navigator['msGetUserMedia'];\r\n\r\n    if (!navigator.getUserMedia) {\r\n      return Promise.reject(this.messageService.browserError);\r\n    }\r\n\r\n    const deferred = new Deferred;\r\n\r\n    navigator.getUserMedia(\r\n      {audio: true},\r\n      mediaStream => deferred.resolve(this.mediaStream = mediaStream),\r\n      error => deferred.reject(this.processRequestStreamError(error)),\r\n    );\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  private processRequestStreamError(error: Error): Error {\r\n    switch (error.name) {\r\n      default:\r\n        return error;\r\n    }\r\n  }\r\n\r\n  private preStartCollectAudioData() {\r\n    if (this.audioContext.state === 'suspended') {\r\n      this.audioContext.resume()\r\n        .then(() => this.startCollectAudioData());\r\n    } else {\r\n      this.startCollectAudioData();\r\n    }\r\n  }\r\n\r\n  private startCollectAudioData() {\r\n    this.mediaStreamAudioSource.connect(this.scriptProcessor);\r\n    this.scriptProcessor.connect(this.audioContext.destination);\r\n    this.scriptProcessor.addEventListener('audioprocess', this.onAudioProcess);\r\n\r\n    this.recorderStore.startRecording(this.config);\r\n\r\n    this.setRecording(true);\r\n  }\r\n\r\n  private stopCollectAudioData() {\r\n    this.mediaStreamAudioSource.disconnect(this.scriptProcessor);\r\n    this.scriptProcessor.disconnect(this.audioContext.destination);\r\n    this.scriptProcessor.removeEventListener('audioprocess', this.onAudioProcess);\r\n\r\n    this.recorderStore.stopRecording();\r\n\r\n    this.setRecording(false);\r\n  }\r\n\r\n  private onAudioProcess(event: AudioProcessingEvent) {\r\n    this.recorderStore.addRecordingProgress(event.inputBuffer.getChannelData(0))\r\n      .then(levels => this.onProgress.emit(levels));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/entities/recorder.ts","import { Injectable, EventEmitter, NgZone } from '@angular/core';\r\nimport { RecorderStore } from '../stores/recorder.store';\r\nimport { PlaybackConfig } from '../interfaces/playback-config';\r\nimport { WebAudioFactory } from '../factories/web-audio.factory';\r\nimport { MessageService } from '../../shared/services/message.service';\r\n\r\nlet instance: Player;\r\n\r\n@Injectable()\r\nexport class Player {\r\n  private audioContext: AudioContext;\r\n  private bufferSource: AudioBufferSourceNode;\r\n  private playbackConfig: PlaybackConfig;\r\n  private recordData: Float32Array;\r\n\r\n  playback = false;\r\n\r\n  onPlaybackStart: EventEmitter<PlaybackConfig> = new EventEmitter();\r\n  onPlaybackStop = new EventEmitter();\r\n  onPlaybackFinish = new EventEmitter();\r\n  onPlaybackEnd = new EventEmitter();\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n    private webAudioFactory: WebAudioFactory,\r\n    private messageService: MessageService,\r\n    private zone: NgZone\r\n  ) {\r\n    if (instance) {\r\n      return instance;\r\n    } else {\r\n      instance = this;\r\n    }\r\n  }\r\n\r\n  play(playbackConfig: PlaybackConfig) {\r\n    this.playbackConfig = playbackConfig;\r\n\r\n    this.getRecordData()\r\n      .then(() => this.playRecordData());\r\n  }\r\n\r\n  private getRecordData(): Promise<Float32Array> {\r\n    return this.recorderStore.getRecordData(this.playbackConfig.startPosition)\r\n      .then(data => this.recordData = data);\r\n  }\r\n\r\n  private playRecordData() {\r\n    if (false === this.recordData instanceof Float32Array) {\r\n      return;\r\n    }\r\n\r\n    if (this.recordData.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.audioContext === undefined) {\r\n      this.audioContext = this.webAudioFactory.getAudioContext();\r\n    }\r\n\r\n    if (this.audioContext === undefined) {\r\n      return this.messageService.showBrowserError();\r\n    }\r\n\r\n    const buffer: AudioBuffer = this.audioContext.createBuffer(1, this.recordData.length, 44100);\r\n    buffer.copyToChannel(this.recordData, 0);\r\n\r\n    this.bufferSource = this.audioContext.createBufferSource();\r\n    this.bufferSource.onended = () => this.zone.run(() => this.finish());\r\n    this.bufferSource.buffer = buffer;\r\n    this.bufferSource.connect(this.audioContext.destination);\r\n    this.bufferSource.start();\r\n\r\n    this.playback = true;\r\n    this.onPlaybackStart.emit(this.playbackConfig);\r\n  }\r\n\r\n  stop() {\r\n    // To emit finish action only when playback was finished naturally\r\n    this.bufferSource.onended = null;\r\n    this.bufferSource.stop();\r\n\r\n    this.playback = false;\r\n\r\n    this.onPlaybackStop.emit();\r\n    this.onPlaybackEnd.emit();\r\n  }\r\n\r\n  private finish() {\r\n    this.playback = false;\r\n\r\n    this.onPlaybackFinish.emit(this.playbackConfig);\r\n    this.onPlaybackEnd.emit();\r\n\r\n    if (this.playbackConfig.repeat) {\r\n      this.playRecordData();\r\n    } else {\r\n      this.clearData();\r\n    }\r\n  }\r\n\r\n  private clearData() {\r\n    delete this.recordData;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/entities/player.ts","import { TimelineStore } from '../timeline.store';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nimport { TIMELINE_TICK_WIDTH } from '../../../constants';\r\nimport { nearestDividend } from '../../../shared/helpers/math.helpers';\r\nimport { Player } from '../../entities/player';\r\nimport { Recorder } from '../../entities/recorder';\r\nvar TimelineButtonsComponent = /** @class */ (function () {\r\n    function TimelineButtonsComponent(timelineStore, recorderStore, recorder, player) {\r\n        this.timelineStore = timelineStore;\r\n        this.recorderStore = recorderStore;\r\n        this.recorder = recorder;\r\n        this.player = player;\r\n        this.inButtonIsDisabled = false;\r\n        this.outButtonIsDisabled = false;\r\n    }\r\n    TimelineButtonsComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.zoomChangeSubscriber = this.timelineStore.zoomChange\r\n            .subscribe(function () { return _this.onZoomChange(); });\r\n    };\r\n    TimelineButtonsComponent.prototype.ngOnDestroy = function () {\r\n        this.zoomChangeSubscriber.unsubscribe();\r\n    };\r\n    TimelineButtonsComponent.prototype.onZoomChange = function () {\r\n        this.updateButtonStates();\r\n    };\r\n    TimelineButtonsComponent.prototype.updateButtonStates = function () {\r\n        this.outButtonIsDisabled = this.timelineStore.isMinZoom();\r\n        this.inButtonIsDisabled = this.timelineStore.isMaxZoom();\r\n    };\r\n    TimelineButtonsComponent.prototype.onZoomOutButtonClick = function () {\r\n        this.timelineStore.zoom /= 2;\r\n    };\r\n    TimelineButtonsComponent.prototype.onZoomInButtonClick = function () {\r\n        this.timelineStore.zoom *= 2;\r\n    };\r\n    Object.defineProperty(TimelineButtonsComponent.prototype, \"startButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.recorder.recording || this.player.playback || this.timelineStore.currentPosition === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineButtonsComponent.prototype.onStartButtonClick = function () {\r\n        this.timelineStore.currentPosition = 0;\r\n    };\r\n    Object.defineProperty(TimelineButtonsComponent.prototype, \"endButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.recorder.recording ||\r\n                this.player.playback ||\r\n                this.recorderStore.recordData.length === 0 ||\r\n                this.timelineStore.currentPosition === this.recorderStore.recordData.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineButtonsComponent.prototype.onEndButtonClick = function () {\r\n        this.timelineStore.currentPosition = this.recorderStore.recordData.length;\r\n    };\r\n    Object.defineProperty(TimelineButtonsComponent.prototype, \"backwardButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.timelineStore.currentPosition === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineButtonsComponent.prototype.onBackwardButtonClick = function () {\r\n        var step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_TICK_WIDTH);\r\n        var currentPosition = this.timelineStore.currentPosition;\r\n        var roundedCurrentPosition = nearestDividend(this.timelineStore.currentPosition, step);\r\n        if (currentPosition > roundedCurrentPosition) {\r\n            this.timelineStore.currentPosition = roundedCurrentPosition;\r\n        }\r\n        else {\r\n            this.timelineStore.currentPosition = roundedCurrentPosition - step;\r\n        }\r\n    };\r\n    TimelineButtonsComponent.prototype.onForwardButtonClick = function () {\r\n        var step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_TICK_WIDTH);\r\n        var currentPosition = this.timelineStore.currentPosition;\r\n        var roundedCurrentPosition = nearestDividend(this.timelineStore.currentPosition, step);\r\n        if (currentPosition < roundedCurrentPosition) {\r\n            this.timelineStore.currentPosition = roundedCurrentPosition;\r\n        }\r\n        else {\r\n            this.timelineStore.currentPosition = roundedCurrentPosition + step;\r\n        }\r\n    };\r\n    return TimelineButtonsComponent;\r\n}());\r\nexport { TimelineButtonsComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-buttons.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-buttons.component\";\r\nimport * as i3 from \"../timeline.store\";\r\nimport * as i4 from \"../../stores/recorder.store\";\r\nimport * as i5 from \"../../entities/recorder\";\r\nimport * as i6 from \"../../entities/player\";\r\nvar styles_TimelineButtonsComponent = [i0.styles];\r\nvar RenderType_TimelineButtonsComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineButtonsComponent, data: {} });\r\nexport { RenderType_TimelineButtonsComponent as RenderType_TimelineButtonsComponent };\r\nexport function View_TimelineButtonsComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 37, \"div\", [[\"class\", \"timeline-buttons hide-on-recording hide-on-playback\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 21, \"div\", [[\"class\", \"timeline-buttons__group\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(4, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043D\\u0430\\u0447\\u0430\\u043B\\u0443 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onStartButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(6, 0, null, null, 0, \"span\", [[\"class\", \"icon-start\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(9, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041D\\u0435\\u043C\\u043D\\u043E\\u0433\\u043E \\u043D\\u0430\\u0437\\u0430\\u0434\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onBackwardButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(11, 0, null, null, 0, \"span\", [[\"class\", \"icon-backward\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(14, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041D\\u0435\\u043C\\u043D\\u043E\\u0433\\u043E \\u0432\\u043F\\u0435\\u0440\\u0435\\u0434\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onForwardButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(16, 0, null, null, 0, \"span\", [[\"class\", \"icon-forward\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(19, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043A\\u043E\\u043D\\u0446\\u0443 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onEndButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(21, 0, null, null, 0, \"span\", [[\"class\", \"icon-end\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(25, 0, null, null, 11, \"div\", [[\"class\", \"timeline-buttons__group\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(27, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041E\\u0442\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onZoomOutButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(29, 0, null, null, 0, \"span\", [[\"class\", \"icon-zoom-out\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(32, 0, null, null, 3, \"button\", [[\"class\", \"timeline-buttons__button\"], [\"title\", \"\\u041F\\u0440\\u0438\\u0431\\u043B\\u0438\\u0437\\u0438\\u0442\\u044C\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onZoomInButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(34, 0, null, null, 0, \"span\", [[\"class\", \"icon-zoom-in\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.startButtonIsDisabled; _ck(_v, 4, 0, currVal_0); var currVal_1 = _co.backwardButtonIsDisabled; _ck(_v, 9, 0, currVal_1); var currVal_2 = _co.endButtonIsDisabled; _ck(_v, 19, 0, currVal_2); var currVal_3 = _co.outButtonIsDisabled; _ck(_v, 27, 0, currVal_3); var currVal_4 = _co.inButtonIsDisabled; _ck(_v, 32, 0, currVal_4); }); }\r\nexport function View_TimelineButtonsComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-buttons\", [], null, null, null, View_TimelineButtonsComponent_0, RenderType_TimelineButtonsComponent)), i1.ɵdid(1, 245760, null, 0, i2.TimelineButtonsComponent, [i3.TimelineStore, i4.RecorderStore, i5.Recorder, i6.Player], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineButtonsComponentNgFactory = i1.ɵccf(\"app-timeline-buttons\", i2.TimelineButtonsComponent, View_TimelineButtonsComponent_Host_0, {}, {}, []);\r\nexport { TimelineButtonsComponentNgFactory as TimelineButtonsComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-buttons[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}.timeline-buttons__group[_ngcontent-%COMP%]{margin-left:6px;float:left;opacity:.95}.timeline-buttons__group[_ngcontent-%COMP%]:hover{opacity:1}.timeline-buttons__button[_ngcontent-%COMP%]{display:block;width:32px;height:26px;padding:0;border:none;float:left;font-size:12px;font-family:Verdana;background:center center no-repeat #fff;color:#333;cursor:pointer}.timeline-buttons__button[_ngcontent-%COMP%] + .timeline-buttons__button[_ngcontent-%COMP%]{margin-left:1px}.timeline-buttons__button[_ngcontent-%COMP%]:first-child{border-top-left-radius:3px;border-bottom-left-radius:3px}.timeline-buttons__button[_ngcontent-%COMP%]:last-child{border-top-right-radius:3px;border-bottom-right-radius:3px}.timeline-buttons__button[_ngcontent-%COMP%]:focus, .timeline-buttons__button[_ngcontent-%COMP%]:hover{color:#000}.timeline-buttons__button[_ngcontent-%COMP%]:active{opacity:.95}.timeline-buttons__button[_ngcontent-%COMP%]:disabled{opacity:.5}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-buttons hide-on-recording hide-on-playback\">\r\n  <div class=\"timeline-buttons__group\">\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onStartButtonClick()\"\r\n      [disabled]=\"startButtonIsDisabled\"\r\n      title=\"Go to the beginning of the record\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-start\"></span>\r\n    </button>\r\n\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onBackwardButtonClick()\"\r\n      [disabled]=\"backwardButtonIsDisabled\"\r\n      title=\"Move back a bit\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-backward\"></span>\r\n    </button>\r\n\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onForwardButtonClick()\"\r\n      title=\"Move a little forward\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-forward\"></span>\r\n    </button>\r\n\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onEndButtonClick()\"\r\n      [disabled]=\"endButtonIsDisabled\"\r\n      title=\"Go to the end of the record\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-end\"></span>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"timeline-buttons__group\">\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onZoomOutButtonClick()\"\r\n      [disabled]=\"outButtonIsDisabled\"\r\n      title=\"Zoom out\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-zoom-out\"></span>\r\n    </button>\r\n\r\n    <button\r\n      class=\"timeline-buttons__button\"\r\n      (click)=\"onZoomInButtonClick()\"\r\n      [disabled]=\"inButtonIsDisabled\"\r\n      title=\"Zoom in\"\r\n      i18n-title\r\n    >\r\n      <span class=\"icon-zoom-in\"></span>\r\n    </button>\r\n  </div>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-buttons/timeline-buttons.component.html","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport { TimelineStore } from '../../timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { Milliseconds, Pixels, ZoomValue } from '../../../../types';\r\n\r\n@Component({\r\n  selector: 'app-timeline-scale-tick',\r\n  templateUrl: './timeline-scale-tick.component.html',\r\n  styleUrls: ['./timeline-scale-tick.component.styl']\r\n})\r\nexport class TimelineScaleTickComponent implements OnInit, OnDestroy {\r\n  @Input() position: Milliseconds;\r\n\r\n  public positionInPixels: Pixels = 0;\r\n\r\n  public zoomChangeSubscriber: Subscriber<ZoomValue>;\r\n\r\n  constructor(public timelineStore: TimelineStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updatePositionInPixels();\r\n\r\n    this.zoomChangeSubscriber = this.timelineStore.zoomChange\r\n      .subscribe(() => this.updatePositionInPixels());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zoomChangeSubscriber.unsubscribe();\r\n  }\r\n\r\n  updatePositionInPixels() {\r\n    this.positionInPixels = this.getPositionInPixels();\r\n  }\r\n\r\n  getPositionInPixels() {\r\n    return this.timelineStore.convertMillisecondsToPixels(this.position);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-scale-tick.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"../../../../shared/pipes/seconds.pipe\";\r\nimport * as i3 from \"./timeline-scale-tick.component\";\r\nimport * as i4 from \"../../timeline.store\";\r\nvar styles_TimelineScaleTickComponent = [i0.styles];\r\nvar RenderType_TimelineScaleTickComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineScaleTickComponent, data: {} });\r\nexport { RenderType_TimelineScaleTickComponent as RenderType_TimelineScaleTickComponent };\r\nexport function View_TimelineScaleTickComponent_0(_l) { return i1.ɵvid(0, [i1.ɵpid(0, i2.SecondsPipe, []), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"timeline-scale-tick\"]], [[4, \"left\", \"px\"]], null, null, null, null)), (_l()(), i1.ɵted(2, null, [\"\", \"\"])), i1.ɵppd(3, 1), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.positionInPixels; _ck(_v, 1, 0, currVal_0); var currVal_1 = i1.ɵunv(_v, 2, 0, _ck(_v, 3, 0, i1.ɵnov(_v, 0), _co.position)); _ck(_v, 2, 0, currVal_1); }); }\r\nexport function View_TimelineScaleTickComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-scale-tick\", [], null, null, null, View_TimelineScaleTickComponent_0, RenderType_TimelineScaleTickComponent)), i1.ɵdid(1, 245760, null, 0, i3.TimelineScaleTickComponent, [i4.TimelineStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineScaleTickComponentNgFactory = i1.ɵccf(\"app-timeline-scale-tick\", i3.TimelineScaleTickComponent, View_TimelineScaleTickComponent_Host_0, { position: \"position\" }, {}, []);\r\nexport { TimelineScaleTickComponentNgFactory as TimelineScaleTickComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-scale-tick[_ngcontent-%COMP%]{position:absolute;bottom:0;display:block;height:14px;line-height:12px;padding-left:4px;margin-left:-1px;border-left:1px solid #86bce3}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-scale-tick\" [style.left.px]=\"positionInPixels\">{{position | seconds}}</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale-tick/timeline-scale-tick.component.html","import { Component, OnInit, OnDestroy, ElementRef, ViewChild } from '@angular/core';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\n\r\n@Component({\r\n  selector: 'app-timeline-slider',\r\n  templateUrl: './timeline-slider.component.html',\r\n  styleUrls: ['./timeline-slider.component.styl']\r\n})\r\nexport class TimelineSliderComponent implements OnInit, OnDestroy {\r\n  public changeSubscriber: Subscriber<number>;\r\n\r\n  @ViewChild('element') element: ElementRef;\r\n\r\n  constructor(private timelineStore: TimelineStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updatePosition();\r\n    this.changeSubscriber = this.timelineStore.change\r\n      .subscribe(() => this.updatePosition());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.changeSubscriber.unsubscribe();\r\n  }\r\n\r\n  updatePosition() {\r\n    this.element.nativeElement.style.left = this.getPosition() + 'px';\r\n  }\r\n\r\n  getPosition() {\r\n    return this.timelineStore.halfWidth - this.timelineStore.currentPositionInPixels;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-slider/timeline-slider.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-slider.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-slider.component\";\r\nimport * as i3 from \"../timeline.store\";\r\nvar styles_TimelineSliderComponent = [i0.styles];\r\nvar RenderType_TimelineSliderComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineSliderComponent, data: {} });\r\nexport { RenderType_TimelineSliderComponent as RenderType_TimelineSliderComponent };\r\nexport function View_TimelineSliderComponent_0(_l) { return i1.ɵvid(0, [i1.ɵqud(402653184, 1, { element: 0 }), (_l()(), i1.ɵeld(1, 0, [[1, 0], [\"element\", 1]], null, 3, \"div\", [[\"class\", \"timeline-slider\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), i1.ɵncd(null, 0), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_TimelineSliderComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-slider\", [], null, null, null, View_TimelineSliderComponent_0, RenderType_TimelineSliderComponent)), i1.ɵdid(1, 245760, null, 0, i2.TimelineSliderComponent, [i3.TimelineStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineSliderComponentNgFactory = i1.ɵccf(\"app-timeline-slider\", i2.TimelineSliderComponent, View_TimelineSliderComponent_Host_0, {}, {}, [\"*\"]);\r\nexport { TimelineSliderComponentNgFactory as TimelineSliderComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-slider/timeline-slider.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-slider/timeline-slider.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-slider\" #element>\r\n  <ng-content></ng-content>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-slider/timeline-slider.component.html","export function getIntermediateValues(startValue: number, endValue: number, step: number) {\r\n  const values: number[] = [];\r\n\r\n  let value = startValue < 0 ? 0 : startValue;\r\n\r\n  while (value <= endValue) {\r\n    values.push(value);\r\n\r\n    value += step;\r\n  }\r\n\r\n  return values;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/helpers/get-intermediate-values.ts","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { TIMELINE_TICK_WIDTH } from '../../../constants';\r\nimport { getIntermediateValues } from '../../../shared/helpers/get-intermediate-values';\r\nimport { lowerDividend } from '../../../shared/helpers/math.helpers';\r\nimport { Milliseconds } from '../../../types';\r\n\r\n@Component({\r\n  selector: 'app-timeline-scale',\r\n  templateUrl: './timeline-scale.component.html',\r\n  styleUrls: ['./timeline-scale.component.styl']\r\n})\r\nexport class TimelineScaleComponent implements OnInit, OnDestroy {\r\n  public tickPositions: Milliseconds[] = [];\r\n\r\n  public timelineChangeSubscriber: Subscriber<number>;\r\n\r\n  private previousStartValue: Milliseconds;\r\n  private previousEndValue: Milliseconds;\r\n  private previousStep: Milliseconds;\r\n\r\n  constructor(public timelineStore: TimelineStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateTickPositions();\r\n\r\n    this.timelineChangeSubscriber = this.timelineStore.change\r\n      .subscribe(() => this.updateTickPositions());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.timelineChangeSubscriber.unsubscribe();\r\n  }\r\n\r\n  private updateTickPositions() {\r\n    this.tickPositions = this.getTickPositions();\r\n  }\r\n\r\n  private getTickPositions() {\r\n    const step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_TICK_WIDTH);\r\n    const startValue = lowerDividend(this.timelineStore.startVisiblePosition, step);\r\n    const endValue = lowerDividend(this.timelineStore.endVisiblePosition, step);\r\n\r\n    if (this.shouldPositionsUpdate(startValue, endValue, step)) {\r\n      this.previousStep = step;\r\n      this.previousStartValue = startValue;\r\n      this.previousEndValue = endValue;\r\n\r\n      return getIntermediateValues(startValue, endValue, step);\r\n    } else {\r\n      return this.tickPositions;\r\n    }\r\n  }\r\n\r\n  private shouldPositionsUpdate(startValue: Milliseconds, endValue: Milliseconds, step: Milliseconds): boolean {\r\n    return startValue !== this.previousStartValue ||\r\n      endValue !== this.previousEndValue ||\r\n      step !== this.previousStep;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-scale.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-scale-tick/timeline-scale-tick.component.ngfactory\";\r\nimport * as i3 from \"./timeline-scale-tick/timeline-scale-tick.component\";\r\nimport * as i4 from \"../timeline.store\";\r\nimport * as i5 from \"../timeline-slider/timeline-slider.component.ngfactory\";\r\nimport * as i6 from \"../timeline-slider/timeline-slider.component\";\r\nimport * as i7 from \"@angular/common\";\r\nimport * as i8 from \"./timeline-scale.component\";\r\nvar styles_TimelineScaleComponent = [i0.styles];\r\nvar RenderType_TimelineScaleComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineScaleComponent, data: {} });\r\nexport { RenderType_TimelineScaleComponent as RenderType_TimelineScaleComponent };\r\nfunction View_TimelineScaleComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-scale-tick\", [], null, null, null, i2.View_TimelineScaleTickComponent_0, i2.RenderType_TimelineScaleTickComponent)), i1.ɵdid(1, 245760, null, 0, i3.TimelineScaleTickComponent, [i4.TimelineStore], { position: [0, \"position\"] }, null)], function (_ck, _v) { var currVal_0 = _v.context.$implicit; _ck(_v, 1, 0, currVal_0); }, null); }\r\nexport function View_TimelineScaleComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 8, \"div\", [[\"class\", \"timeline-scale\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 5, \"app-timeline-slider\", [], null, null, null, i5.View_TimelineSliderComponent_0, i5.RenderType_TimelineSliderComponent)), i1.ɵdid(3, 245760, null, 0, i6.TimelineSliderComponent, [i4.TimelineStore], null, null), (_l()(), i1.ɵted(-1, 0, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, 0, 1, null, View_TimelineScaleComponent_1)), i1.ɵdid(6, 802816, null, 0, i7.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null), (_l()(), i1.ɵted(-1, 0, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; _ck(_v, 3, 0); var currVal_0 = _co.tickPositions; _ck(_v, 6, 0, currVal_0); }, null); }\r\nexport function View_TimelineScaleComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-scale\", [], null, null, null, View_TimelineScaleComponent_0, RenderType_TimelineScaleComponent)), i1.ɵdid(1, 245760, null, 0, i8.TimelineScaleComponent, [i4.TimelineStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineScaleComponentNgFactory = i1.ɵccf(\"app-timeline-scale\", i8.TimelineScaleComponent, View_TimelineScaleComponent_Host_0, {}, {}, []);\r\nexport { TimelineScaleComponentNgFactory as TimelineScaleComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-scale[_ngcontent-%COMP%]{position:relative;width:100%;height:20px;margin-bottom:6px;background:#3d9fea;border-radius:2px;font-size:10px;color:#fff;overflow:hidden}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-scale\">\r\n  <app-timeline-slider>\r\n    <app-timeline-scale-tick *ngFor=\"let position of tickPositions\" [position]=\"position\"></app-timeline-scale-tick>\r\n  </app-timeline-slider>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-scale/timeline-scale.component.html","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { TimelineCanvasLevel } from './timeline-canvas-level';\r\nimport { Milliseconds, RequestAnimationFrameId } from '../../../types';\r\nimport { Recorder } from '../../entities/recorder';\r\nimport { TimelineStore } from '../timeline.store';\r\n\r\nlet instance: TimelineCanvasProcessLevelsStore;\r\n\r\n@Injectable()\r\nexport class TimelineCanvasProcessLevelsStore {\r\n  levels: TimelineCanvasLevel[] = [];\r\n  renderLevel: EventEmitter<TimelineCanvasLevel> = new EventEmitter();\r\n  previousTime: Milliseconds;\r\n\r\n  private requestAnimationFrameId: RequestAnimationFrameId;\r\n  private shouldTimelineMove = false;\r\n\r\n  constructor(private recorder: Recorder, private timelineStore: TimelineStore) {\r\n    if (instance) {\r\n      return instance;\r\n    } else {\r\n      instance = this;\r\n    }\r\n\r\n    recorder.onProgress\r\n      .subscribe(levels => this.onRecordingProgress(levels));\r\n\r\n    recorder.recordingChange\r\n      .subscribe(recording => this.onRecordingChange(recording));\r\n  }\r\n\r\n  private onRecordingChange(recording: boolean) {\r\n    if (recording) {\r\n      this.previousTime = Date.now();\r\n      this.shouldTimelineMove = false;\r\n      this.requestAnimationFrame();\r\n    } else {\r\n      this.stopAnimation();\r\n      this.shouldTimelineMove = false;\r\n    }\r\n  }\r\n\r\n  private requestAnimationFrame() {\r\n    this.requestAnimationFrameId = requestAnimationFrame(() => this.animate());\r\n  }\r\n\r\n  private stopAnimation() {\r\n    cancelAnimationFrame(this.requestAnimationFrameId);\r\n  }\r\n\r\n  private animate() {\r\n    if (this.shouldTimelineMove) {\r\n      this.moveTimeline();\r\n    }\r\n\r\n    this.renderLevels();\r\n    this.requestAnimationFrame();\r\n  }\r\n\r\n  private moveTimeline() {\r\n    const lastLevel: TimelineCanvasLevel = this.levels[this.levels.length - 1];\r\n    const currentTime = Date.now();\r\n\r\n    if (lastLevel) {\r\n      this.timelineStore.currentPosition = lastLevel.endPosition;\r\n    } else {\r\n      this.timelineStore.currentPosition += (currentTime - this.previousTime);\r\n    }\r\n\r\n    this.previousTime = currentTime;\r\n  }\r\n\r\n  private renderLevels() {\r\n    let level: TimelineCanvasLevel;\r\n\r\n    while (level = this.levels.pop()) {\r\n      this.renderLevel.emit(level);\r\n    }\r\n  }\r\n\r\n  private onRecordingProgress(levels: TimelineCanvasLevel[]) {\r\n    this.shouldTimelineMove = true;\r\n\r\n    if (levels && levels.forEach) {\r\n      levels.forEach(level => this.levels.push(level));\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-canvas/timeline-canvas-process-levels.store.ts","import { Component, OnInit, Input, OnDestroy, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport {\r\n  TIMELINE_CANVAS_WIDTH,\r\n  TIMELINE_CANVAS_HEIGHT,\r\n  TIMELINE_CANVAS_LEVEL_WIDTH,\r\n  TIMELINE_CANVAS_LEVEL_COLOR,\r\n  TIMELINE_CANVAS_LEVEL_HEIGHT,\r\n  TIMELINE_CANVAS_RECORDED_LEVEL_COLOR,\r\n  TIMELINE_CANVAS_LEVEL_STEP\r\n} from '../../../constants';\r\nimport { TimelineLayerComponent } from '../timeline-layer/timeline-layer.component';\r\nimport { LayerLevelsRequest } from '../../interfaces/layer-levels-range';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nimport { Level, Milliseconds, ZoomValue } from '../../../types';\r\nimport { TimelineCanvasLevel } from './timeline-canvas-level';\r\nimport { TimelineCanvasProcessLevelsStore } from './timeline-canvas-process-levels.store';\r\nimport { LayerData } from '../../interfaces/layer-data';\r\n\r\n@Component({\r\n  selector: 'app-timeline-canvas',\r\n  templateUrl: './timeline-canvas.component.html',\r\n  styleUrls: ['./timeline-canvas.component.styl']\r\n})\r\nexport class TimelineCanvasComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() position: Milliseconds;\r\n  @ViewChild('canvas') canvasElement: ElementRef;\r\n\r\n  public width = TIMELINE_CANVAS_WIDTH;\r\n  public height = TIMELINE_CANVAS_HEIGHT;\r\n  public endPosition: Milliseconds;\r\n  public positionInPixels = 0;\r\n\r\n  private zoomChangeSubscriber: Subscriber<ZoomValue>;\r\n  private onLayerChangeSubscriber: Subscriber<LayerData>;\r\n  private renderLevelSubscriber: Subscriber<TimelineCanvasLevel>;\r\n\r\n  private canvasContext: CanvasRenderingContext2D;\r\n\r\n  constructor(\r\n    private timelineStore: TimelineStore,\r\n    private timelineLayerComponent: TimelineLayerComponent,\r\n    private recorderStore: RecorderStore,\r\n    private timelineCanvasProcessLevelsStore: TimelineCanvasProcessLevelsStore,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.update();\r\n\r\n    this.zoomChangeSubscriber = this.timelineStore.zoomChange\r\n      .subscribe(zoomValue => this.update());\r\n\r\n    this.onLayerChangeSubscriber = this.recorderStore.onLayerChange\r\n      .subscribe(layerData => this.onLayerChange(layerData));\r\n\r\n    this.renderLevelSubscriber = this.timelineCanvasProcessLevelsStore.renderLevel\r\n      .subscribe(level => this.onRenderLevel(level));\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.initCanvasContext();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zoomChangeSubscriber.unsubscribe();\r\n    this.renderLevelSubscriber.unsubscribe();\r\n  }\r\n\r\n  onLayerChange(layerData: LayerData) {\r\n    if (this.timelineLayerComponent.layerId === layerData.layerId) {\r\n      this.requestLevels();\r\n    }\r\n  }\r\n\r\n  private initCanvasContext() {\r\n    this.canvasContext = this.canvasElement.nativeElement.getContext('2d');\r\n  }\r\n\r\n  requestLevels() {\r\n    this.recorderStore.getLevels(this.createRecorderWorkerLevelsRequest())\r\n      .then(levels => this.renderLevels(levels));\r\n  }\r\n\r\n  createRecorderWorkerLevelsRequest(): LayerLevelsRequest {\r\n    return {\r\n      layerId: this.timelineLayerComponent.layerId,\r\n      startPosition: this.position,\r\n      length: this.timelineStore.convertPixelsToMilliseconds(TIMELINE_CANVAS_WIDTH),\r\n      step: this.timelineStore.convertPixelsToMilliseconds(TIMELINE_CANVAS_LEVEL_STEP),\r\n    };\r\n  }\r\n\r\n  renderLevels(levels: Level[]) {\r\n    const context = this.canvasContext;\r\n    const step = TIMELINE_CANVAS_LEVEL_STEP;\r\n\r\n    context.clearRect(0, 0, TIMELINE_CANVAS_WIDTH, TIMELINE_CANVAS_HEIGHT);\r\n    context.beginPath();\r\n    context.lineWidth = TIMELINE_CANVAS_LEVEL_WIDTH;\r\n    context.strokeStyle = TIMELINE_CANVAS_LEVEL_COLOR;\r\n\r\n    levels.forEach(function (level, index) {\r\n      const x = index * step + 1;\r\n      const height = TIMELINE_CANVAS_LEVEL_HEIGHT * level;\r\n      const y = (TIMELINE_CANVAS_HEIGHT - height) / 2;\r\n\r\n      context.moveTo(x, y);\r\n      context.lineTo(x, y + height);\r\n    });\r\n\r\n    context.stroke();\r\n    context.closePath();\r\n  }\r\n\r\n  onRenderLevel(level: TimelineCanvasLevel) {\r\n    if (level.layerId === this.timelineLayerComponent.layerId) {\r\n      if (this.isIncludedPosition(level.startPosition)) {\r\n        this.renderRecordedLevel(level);\r\n      }\r\n    }\r\n  }\r\n\r\n  isIncludedPosition(position: Milliseconds): boolean {\r\n    return position >= this.position && position <= this.endPosition;\r\n  }\r\n\r\n  renderRecordedLevel(level: TimelineCanvasLevel) {\r\n    const context = this.canvasContext;\r\n    const x = this.timelineStore.convertMillisecondsToPixels(level.startPosition - this.position);\r\n    const height = TIMELINE_CANVAS_LEVEL_HEIGHT * level.level;\r\n    const y = (TIMELINE_CANVAS_HEIGHT - height) / 2;\r\n\r\n    context.beginPath();\r\n    context.lineWidth = TIMELINE_CANVAS_LEVEL_WIDTH;\r\n    context.strokeStyle = TIMELINE_CANVAS_RECORDED_LEVEL_COLOR;\r\n    context.moveTo(x, y);\r\n    context.lineTo(x, y + height);\r\n    context.stroke();\r\n    context.closePath();\r\n  }\r\n\r\n  private update() {\r\n    this.requestLevels();\r\n    this.updatePositions();\r\n  }\r\n\r\n  private updatePositions() {\r\n    this.positionInPixels = this.timelineStore.convertMillisecondsToPixels(this.position);\r\n    this.endPosition = this.position + this.timelineStore.convertPixelsToMilliseconds(this.width);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.ts","import { Component, Input } from '@angular/core';\r\nimport { LayerId, Milliseconds } from '../../../types';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport { Recorder } from '../../entities/recorder';\r\nimport { HorizontalDragEvent } from '../../../shared/directives/horizontal-drag-event';\r\nimport { HorizontalDragEndEvent } from '../../../shared/directives/horizontal-drag-end-event';\r\nimport { HorizontalDragStartEvent } from '../../../shared/directives/horizontal-drag-start-event';\r\nimport { Player } from '../../entities/player';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layer',\r\n  templateUrl: './timeline-layer.component.html',\r\n  styleUrls: ['./timeline-layer.component.styl']\r\n})\r\nexport class TimelineLayerComponent {\r\n  @Input() layerId: LayerId;\r\n  @Input() canvasPositions: Milliseconds[];\r\n\r\n  private dragEventHasHappened: boolean;\r\n\r\n  constructor(\r\n    public timelineStore: TimelineStore,\r\n    public recorder: Recorder,\r\n    public player: Player,\r\n  ) {\r\n  }\r\n\r\n  onHorizontalDragStart(event: HorizontalDragStartEvent) {\r\n    this.dragEventHasHappened = false;\r\n  }\r\n\r\n  onHorizontalDrag(event: HorizontalDragEvent) {\r\n    this.dragEventHasHappened = true;\r\n\r\n    if (false === this.recorder.recording && false === this.player.playback) {\r\n      this.timelineStore.currentPosition -= this.timelineStore.convertPixelsToMilliseconds(event.deltaX);\r\n    }\r\n  }\r\n\r\n  onHorizontalDragEnd(event: HorizontalDragEndEvent) {\r\n    if (false === this.dragEventHasHappened) {\r\n      this.timelineStore.selectedLayerId = this.layerId;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-canvas.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-canvas.component\";\r\nimport * as i3 from \"../timeline.store\";\r\nimport * as i4 from \"../timeline-layer/timeline-layer.component\";\r\nimport * as i5 from \"../../stores/recorder.store\";\r\nimport * as i6 from \"./timeline-canvas-process-levels.store\";\r\nvar styles_TimelineCanvasComponent = [i0.styles];\r\nvar RenderType_TimelineCanvasComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineCanvasComponent, data: {} });\r\nexport { RenderType_TimelineCanvasComponent as RenderType_TimelineCanvasComponent };\r\nexport function View_TimelineCanvasComponent_0(_l) { return i1.ɵvid(0, [i1.ɵqud(402653184, 1, { canvasElement: 0 }), (_l()(), i1.ɵeld(1, 0, [[1, 0], [\"canvas\", 1]], null, 0, \"canvas\", [[\"class\", \"timeline-canvas\"]], [[1, \"width\", 0], [1, \"height\", 0], [4, \"left\", \"px\"]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.width; var currVal_1 = _co.height; var currVal_2 = _co.positionInPixels; _ck(_v, 1, 0, currVal_0, currVal_1, currVal_2); }); }\r\nexport function View_TimelineCanvasComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-canvas\", [], null, null, null, View_TimelineCanvasComponent_0, RenderType_TimelineCanvasComponent)), i1.ɵdid(1, 4440064, null, 0, i2.TimelineCanvasComponent, [i3.TimelineStore, i4.TimelineLayerComponent, i5.RecorderStore, i6.TimelineCanvasProcessLevelsStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineCanvasComponentNgFactory = i1.ɵccf(\"app-timeline-canvas\", i2.TimelineCanvasComponent, View_TimelineCanvasComponent_Host_0, { position: \"position\" }, {}, []);\r\nexport { TimelineCanvasComponentNgFactory as TimelineCanvasComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<canvas\r\n  class=\"timeline-canvas\"\r\n  [attr.width.px]=\"width\"\r\n  [attr.height.px]=\"height\"\r\n  [style.left.px]=\"positionInPixels\"\r\n  #canvas\r\n></canvas>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-canvas/timeline-canvas.component.html","import { Directive, EventEmitter, HostListener, OnDestroy, Output } from '@angular/core';\r\nimport { HorizontalDragEvent } from './horizontal-drag-event';\r\nimport { DocumentService } from '../services/document.service';\r\nimport { HorizontalDragStartEvent } from './horizontal-drag-start-event';\r\nimport { HorizontalDragEndEvent } from './horizontal-drag-end-event';\r\nimport { Pixels } from '../../types';\r\n\r\n@Directive({\r\n  selector: '[appHorizontalDrag]'\r\n})\r\nexport class HorizontalDragDirective implements OnDestroy {\r\n  @Output('onHorizontalDragStart') onHorizontalDragStart: EventEmitter<HorizontalDragStartEvent> = new EventEmitter();\r\n  @Output('onHorizontalDrag') onHorizontalDrag: EventEmitter<HorizontalDragEvent> = new EventEmitter();\r\n  @Output('onHorizontalDragEnd') onHorizontalDragEnd: EventEmitter<HorizontalDragEndEvent> = new EventEmitter();\r\n\r\n  private clientX: Pixels;\r\n\r\n  constructor(private documentService: DocumentService) {\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onTouchMove = this.onTouchMove.bind(this);\r\n    this.endDrag = this.endDrag.bind(this);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.removeDocumentListeners();\r\n  }\r\n\r\n  @HostListener('mousedown', ['$event']) onMouseDown(event: MouseEvent) {\r\n    this.startDrag(event, event.clientX);\r\n  }\r\n\r\n  @HostListener('touchstart', ['$event']) onTouchStart(event: TouchEvent) {\r\n    this.startDrag(event, event.changedTouches[0].clientX);\r\n  }\r\n\r\n  private startDrag(event: MouseEvent | TouchEvent, clientX: Pixels) {\r\n    event.stopPropagation();\r\n\r\n    this.clientX = clientX;\r\n\r\n    this.addDocumentListeners();\r\n    this.documentService.addDocumentNoUserSelectClass();\r\n\r\n    this.onHorizontalDragStart.emit({clientX, event});\r\n  }\r\n\r\n  private addDocumentListeners() {\r\n    document.addEventListener('mousemove', this.onMouseMove);\r\n    document.addEventListener('touchmove', this.onTouchMove);\r\n\r\n    document.addEventListener('mouseup', this.endDrag);\r\n    document.addEventListener('touchend', this.endDrag);\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent) {\r\n    this.drag(event, event.clientX);\r\n  }\r\n\r\n  private onTouchMove(event: TouchEvent) {\r\n    this.drag(event, event.changedTouches[0].clientX);\r\n  }\r\n\r\n  private drag(event: MouseEvent | TouchEvent, clientX: Pixels) {\r\n    const deltaX = clientX - this.clientX;\r\n\r\n    if (deltaX) {\r\n      this.onHorizontalDrag.emit({clientX, deltaX, event});\r\n\r\n      this.clientX = clientX;\r\n    }\r\n  }\r\n\r\n  private endDrag(event: MouseEvent | TouchEvent) {\r\n    this.removeDocumentListeners();\r\n    this.documentService.removeDocumentNoUserSelectClass();\r\n    this.onHorizontalDragEnd.emit({event});\r\n  }\r\n\r\n  private removeDocumentListeners() {\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n    document.removeEventListener('touchmove', this.onTouchMove);\r\n\r\n    document.removeEventListener('mouseup', this.endDrag);\r\n    document.removeEventListener('touchend', this.endDrag);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/directives/horizontal-drag.directive.ts","import { Component, Input, OnInit } from '@angular/core';\r\nimport { LayerId } from '../../../../types';\r\nimport { TimelineStore } from '../../timeline.store';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layer-select',\r\n  templateUrl: './timeline-layer-select.component.html',\r\n  styleUrls: ['./timeline-layer-select.component.styl']\r\n})\r\nexport class TimelineLayerSelectComponent implements OnInit {\r\n  @Input() layerId: LayerId;\r\n\r\n  constructor(private timelineStore: TimelineStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  get selected(): boolean {\r\n    return this.timelineStore.selectedLayerId === this.layerId;\r\n  }\r\n\r\n  onClick() {\r\n    this.timelineStore.selectedLayerId = this.layerId;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ts","import { TimelineStore } from '../../timeline.store';\r\nvar TimelineLayerSelectComponent = /** @class */ (function () {\r\n    function TimelineLayerSelectComponent(timelineStore) {\r\n        this.timelineStore = timelineStore;\r\n    }\r\n    TimelineLayerSelectComponent.prototype.ngOnInit = function () {\r\n    };\r\n    Object.defineProperty(TimelineLayerSelectComponent.prototype, \"selected\", {\r\n        get: function () {\r\n            return this.timelineStore.selectedLayerId === this.layerId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineLayerSelectComponent.prototype.onClick = function () {\r\n        this.timelineStore.selectedLayerId = this.layerId;\r\n    };\r\n    return TimelineLayerSelectComponent;\r\n}());\r\nexport { TimelineLayerSelectComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layer-select.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"./timeline-layer-select.component\";\r\nimport * as i4 from \"../../timeline.store\";\r\nvar styles_TimelineLayerSelectComponent = [i0.styles];\r\nvar RenderType_TimelineLayerSelectComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayerSelectComponent, data: {} });\r\nexport { RenderType_TimelineLayerSelectComponent as RenderType_TimelineLayerSelectComponent };\r\nfunction View_TimelineLayerSelectComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, null, null, null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\"]))], null, null); }\r\nfunction View_TimelineLayerSelectComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, null, null, null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C\"]))], null, null); }\r\nexport function View_TimelineLayerSelectComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 7, \"button\", [[\"class\", \"timeline-layer-select\"], [\"title\", \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0441\\u043B\\u043E\\u0439\"]], [[2, \"timeline-layer-select--active\", null]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerSelectComponent_1)), i1.ɵdid(3, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerSelectComponent_2)), i1.ɵdid(6, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_1 = _co.selected; _ck(_v, 3, 0, currVal_1); var currVal_2 = (_co.selected === false); _ck(_v, 6, 0, currVal_2); }, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.selected; _ck(_v, 0, 0, currVal_0); }); }\r\nexport function View_TimelineLayerSelectComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer-select\", [], null, null, null, View_TimelineLayerSelectComponent_0, RenderType_TimelineLayerSelectComponent)), i1.ɵdid(1, 114688, null, 0, i3.TimelineLayerSelectComponent, [i4.TimelineStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineLayerSelectComponentNgFactory = i1.ɵccf(\"app-timeline-layer-select\", i3.TimelineLayerSelectComponent, View_TimelineLayerSelectComponent_Host_0, { layerId: \"layerId\" }, {}, []);\r\nexport { TimelineLayerSelectComponentNgFactory as TimelineLayerSelectComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-layer-select[_ngcontent-%COMP%]{display:block;height:20px;line-height:20px;padding:0 8px;margin-right:4px;border:none;float:left;border-radius:2px;font-size:10px;text-transform:uppercase;background:#77bcf0;color:#fff;cursor:pointer}.timeline-layer-select--active[_ngcontent-%COMP%]{background:#3d9fea}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<button\r\n  class=\"timeline-layer-select\"\r\n  [class.timeline-layer-select--active]=\"selected\"\r\n  (click)=\"onClick()\"\r\n  title=\"Select the layer\"\r\n  i18n-title\r\n>\r\n  <ng-container *ngIf=\"selected\" i18n>Selected</ng-container>\r\n  <ng-container *ngIf=\"selected === false\" i18n>Select</ng-container>\r\n</button>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-select/timeline-layer-select.component.html","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { LayerId, Volume } from '../../../../types';\r\nimport { RecorderStore } from '../../../stores/recorder.store';\r\nimport { HorizontalDragStartEvent } from '../../../../shared/directives/horizontal-drag-start-event';\r\nimport { HorizontalDragEvent } from '../../../../shared/directives/horizontal-drag-event';\r\nimport {\r\n  KEYBOARD_ARROW_DOWN_KEY_CODE, KEYBOARD_ARROW_LEFT_KEY_CODE, KEYBOARD_ARROW_RIGHT_KEY_CODE,\r\n  KEYBOARD_ARROW_UP_KEY_CODE, KEYBOARD_ENTER_KEY_CODE\r\n} from '../../../../constants';\r\nimport { nearestDividend } from '../../../../shared/helpers/math.helpers';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layer-volume',\r\n  templateUrl: './timeline-layer-volume.component.html',\r\n  styleUrls: ['./timeline-layer-volume.component.styl']\r\n})\r\nexport class TimelineLayerVolumeComponent implements OnInit {\r\n  @Input() layerId: LayerId;\r\n\r\n  @ViewChild('buttonElement') buttonElement: ElementRef;\r\n  @ViewChild('iconElement') iconElement: ElementRef;\r\n  @ViewChild('sliderElement') sliderElement: ElementRef;\r\n  @ViewChild('trackElement') trackElement: ElementRef;\r\n\r\n  private volumeBeforeMute: Volume;\r\n  private volumeChangeStep = .1;\r\n  private volume = 1;\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.volumeBeforeMute = this.volume;\r\n  }\r\n\r\n  get sliderHandlePosition(): number {\r\n    return this.volume * 100;\r\n  }\r\n\r\n  get volumeIsHigh(): boolean {\r\n    return this.volume === 1;\r\n  }\r\n\r\n  get volumeIsMedium(): boolean {\r\n    return this.volume < 1 && this.volume >= .5;\r\n  }\r\n\r\n  get volumeIsLow(): boolean {\r\n    return this.volume > 0 && this.volume < .5;\r\n  }\r\n\r\n  get volumeIsMuted(): boolean {\r\n    return this.volume === 0;\r\n  }\r\n\r\n  onWheel(event: WheelEvent) {\r\n    event.preventDefault();\r\n\r\n    if (event.deltaY > 0) {\r\n      this.decreaseVolume();\r\n    } else {\r\n      this.increaseVolume();\r\n    }\r\n  }\r\n\r\n  onHorizontalDragStart(event: HorizontalDragStartEvent) {\r\n    this.moveToClientX(event.clientX);\r\n  }\r\n\r\n  onHorizontalDrag(event: HorizontalDragEvent) {\r\n    this.moveToClientX(event.clientX);\r\n  }\r\n\r\n  private moveToClientX(clientX: number) {\r\n    const track: HTMLElement = this.trackElement.nativeElement;\r\n    const trackLeftPadding = parseInt(getComputedStyle(track).paddingLeft.replace('px', ''), 10);\r\n    const trackClientRect: ClientRect = track.getBoundingClientRect();\r\n    const trackClientLeft: number = trackClientRect.left + trackLeftPadding;\r\n    const trackClientWidth: number = trackClientRect.width;\r\n\r\n    if (clientX < trackClientLeft) {\r\n      this.setVolume(0);\r\n    } else if (clientX > trackClientLeft + trackClientWidth) {\r\n      this.setVolume(1);\r\n    } else {\r\n      this.setVolume((clientX - trackClientLeft) / trackClientWidth);\r\n    }\r\n  }\r\n\r\n  onIconClick() {\r\n    this.muteOrUnmute();\r\n  }\r\n\r\n  private muteOrUnmute() {\r\n    if (this.volume) {\r\n      this.mute();\r\n    } else {\r\n      this.unmute();\r\n    }\r\n  }\r\n\r\n  private mute() {\r\n    this.volumeBeforeMute = this.volume;\r\n    this.setVolume(0);\r\n  }\r\n\r\n  private unmute() {\r\n    if (this.volumeBeforeMute) {\r\n      this.setVolume(this.volumeBeforeMute);\r\n    } else {\r\n      this.setVolume(1);\r\n    }\r\n  }\r\n\r\n  onKeyDown(event: KeyboardEvent) {\r\n    switch (event.keyCode) {\r\n      case KEYBOARD_ARROW_UP_KEY_CODE:\r\n      case KEYBOARD_ARROW_RIGHT_KEY_CODE:\r\n        event.preventDefault();\r\n        this.increaseVolume();\r\n        break;\r\n      case KEYBOARD_ARROW_DOWN_KEY_CODE:\r\n      case KEYBOARD_ARROW_LEFT_KEY_CODE:\r\n        event.preventDefault();\r\n        this.decreaseVolume();\r\n        break;\r\n      case KEYBOARD_ENTER_KEY_CODE:\r\n        event.preventDefault();\r\n        this.muteOrUnmute();\r\n        break;\r\n    }\r\n  }\r\n\r\n  private increaseVolume() {\r\n    const volume = this.volume + this.volumeChangeStep;\r\n\r\n    if (volume > 1) {\r\n      this.setVolume(1);\r\n    } else {\r\n      this.setVolume(volume);\r\n    }\r\n  }\r\n\r\n  private decreaseVolume() {\r\n    const volume = this.volume - this.volumeChangeStep;\r\n\r\n    if (volume < 0) {\r\n      this.setVolume(0);\r\n    } else {\r\n      this.setVolume(volume);\r\n    }\r\n  }\r\n\r\n  private setVolume(volume) {\r\n    const layerId = this.layerId;\r\n\r\n    volume = nearestDividend(volume, .01);\r\n\r\n    this.volume = volume;\r\n    this.recorderStore.setLayerVolume({layerId, volume});\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ts","import { ElementRef } from '@angular/core';\r\nimport { RecorderStore } from '../../../stores/recorder.store';\r\nimport { KEYBOARD_ARROW_DOWN_KEY_CODE, KEYBOARD_ARROW_LEFT_KEY_CODE, KEYBOARD_ARROW_RIGHT_KEY_CODE, KEYBOARD_ARROW_UP_KEY_CODE, KEYBOARD_ENTER_KEY_CODE } from '../../../../constants';\r\nimport { nearestDividend } from '../../../../shared/helpers/math.helpers';\r\nvar TimelineLayerVolumeComponent = /** @class */ (function () {\r\n    function TimelineLayerVolumeComponent(recorderStore) {\r\n        this.recorderStore = recorderStore;\r\n        this.volumeChangeStep = .1;\r\n        this.volume = 1;\r\n    }\r\n    TimelineLayerVolumeComponent.prototype.ngOnInit = function () {\r\n        this.volumeBeforeMute = this.volume;\r\n    };\r\n    Object.defineProperty(TimelineLayerVolumeComponent.prototype, \"sliderHandlePosition\", {\r\n        get: function () {\r\n            return this.volume * 100;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineLayerVolumeComponent.prototype, \"volumeIsHigh\", {\r\n        get: function () {\r\n            return this.volume === 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineLayerVolumeComponent.prototype, \"volumeIsMedium\", {\r\n        get: function () {\r\n            return this.volume < 1 && this.volume >= .5;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineLayerVolumeComponent.prototype, \"volumeIsLow\", {\r\n        get: function () {\r\n            return this.volume > 0 && this.volume < .5;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimelineLayerVolumeComponent.prototype, \"volumeIsMuted\", {\r\n        get: function () {\r\n            return this.volume === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineLayerVolumeComponent.prototype.onWheel = function (event) {\r\n        event.preventDefault();\r\n        if (event.deltaY > 0) {\r\n            this.decreaseVolume();\r\n        }\r\n        else {\r\n            this.increaseVolume();\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.onHorizontalDragStart = function (event) {\r\n        this.moveToClientX(event.clientX);\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.onHorizontalDrag = function (event) {\r\n        this.moveToClientX(event.clientX);\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.moveToClientX = function (clientX) {\r\n        var track = this.trackElement.nativeElement;\r\n        var trackLeftPadding = parseInt(getComputedStyle(track).paddingLeft.replace('px', ''), 10);\r\n        var trackClientRect = track.getBoundingClientRect();\r\n        var trackClientLeft = trackClientRect.left + trackLeftPadding;\r\n        var trackClientWidth = trackClientRect.width;\r\n        if (clientX < trackClientLeft) {\r\n            this.setVolume(0);\r\n        }\r\n        else if (clientX > trackClientLeft + trackClientWidth) {\r\n            this.setVolume(1);\r\n        }\r\n        else {\r\n            this.setVolume((clientX - trackClientLeft) / trackClientWidth);\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.onIconClick = function () {\r\n        this.muteOrUnmute();\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.muteOrUnmute = function () {\r\n        if (this.volume) {\r\n            this.mute();\r\n        }\r\n        else {\r\n            this.unmute();\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.mute = function () {\r\n        this.volumeBeforeMute = this.volume;\r\n        this.setVolume(0);\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.unmute = function () {\r\n        if (this.volumeBeforeMute) {\r\n            this.setVolume(this.volumeBeforeMute);\r\n        }\r\n        else {\r\n            this.setVolume(1);\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.onKeyDown = function (event) {\r\n        switch (event.keyCode) {\r\n            case KEYBOARD_ARROW_UP_KEY_CODE:\r\n            case KEYBOARD_ARROW_RIGHT_KEY_CODE:\r\n                event.preventDefault();\r\n                this.increaseVolume();\r\n                break;\r\n            case KEYBOARD_ARROW_DOWN_KEY_CODE:\r\n            case KEYBOARD_ARROW_LEFT_KEY_CODE:\r\n                event.preventDefault();\r\n                this.decreaseVolume();\r\n                break;\r\n            case KEYBOARD_ENTER_KEY_CODE:\r\n                event.preventDefault();\r\n                this.muteOrUnmute();\r\n                break;\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.increaseVolume = function () {\r\n        var volume = this.volume + this.volumeChangeStep;\r\n        if (volume > 1) {\r\n            this.setVolume(1);\r\n        }\r\n        else {\r\n            this.setVolume(volume);\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.decreaseVolume = function () {\r\n        var volume = this.volume - this.volumeChangeStep;\r\n        if (volume < 0) {\r\n            this.setVolume(0);\r\n        }\r\n        else {\r\n            this.setVolume(volume);\r\n        }\r\n    };\r\n    TimelineLayerVolumeComponent.prototype.setVolume = function (volume) {\r\n        var layerId = this.layerId;\r\n        volume = nearestDividend(volume, .01);\r\n        this.volume = volume;\r\n        this.recorderStore.setLayerVolume({ layerId: layerId, volume: volume });\r\n    };\r\n    return TimelineLayerVolumeComponent;\r\n}());\r\nexport { TimelineLayerVolumeComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layer-volume.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"../../../../shared/directives/horizontal-drag.directive\";\r\nimport * as i4 from \"../../../../shared/services/document.service\";\r\nimport * as i5 from \"./timeline-layer-volume.component\";\r\nimport * as i6 from \"../../../stores/recorder.store\";\r\nvar styles_TimelineLayerVolumeComponent = [i0.styles];\r\nvar RenderType_TimelineLayerVolumeComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayerVolumeComponent, data: {} });\r\nexport { RenderType_TimelineLayerVolumeComponent as RenderType_TimelineLayerVolumeComponent };\r\nfunction View_TimelineLayerVolumeComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 0, \"span\", [[\"class\", \"icon-volume-high\"]], null, null, null, null, null))], null, null); }\r\nfunction View_TimelineLayerVolumeComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 0, \"span\", [[\"class\", \"icon-volume-medium\"]], null, null, null, null, null))], null, null); }\r\nfunction View_TimelineLayerVolumeComponent_3(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 0, \"span\", [[\"class\", \"icon-volume-low\"]], null, null, null, null, null))], null, null); }\r\nfunction View_TimelineLayerVolumeComponent_4(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 0, \"span\", [[\"class\", \"icon-volume-mute\"]], null, null, null, null, null))], null, null); }\r\nexport function View_TimelineLayerVolumeComponent_0(_l) { return i1.ɵvid(0, [i1.ɵqud(402653184, 1, { buttonElement: 0 }), i1.ɵqud(402653184, 2, { iconElement: 0 }), i1.ɵqud(402653184, 3, { sliderElement: 0 }), i1.ɵqud(402653184, 4, { trackElement: 0 }), (_l()(), i1.ɵeld(4, 0, [[1, 0], [\"buttonElement\", 1]], null, 25, \"button\", [[\"class\", \"timeline-layer-volume\"], [\"title\", \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0433\\u0440\\u043E\\u043C\\u043A\\u043E\\u0441\\u0442\\u0438 \\u0441\\u043B\\u043E\\u044F\"]], null, [[null, \"wheel\"], [null, \"keydown\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"wheel\" === en)) {\r\n        var pd_0 = (_co.onWheel($event) !== false);\r\n        ad = (pd_0 && ad);\r\n    } if ((\"keydown\" === en)) {\r\n        var pd_1 = (_co.onKeyDown($event) !== false);\r\n        ad = (pd_1 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(6, 0, [[2, 0], [\"iconElement\", 1]], null, 13, \"span\", [[\"class\", \"timeline-layer-volume__icon\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onIconClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerVolumeComponent_1)), i1.ɵdid(9, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerVolumeComponent_2)), i1.ɵdid(12, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerVolumeComponent_3)), i1.ɵdid(15, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayerVolumeComponent_4)), i1.ɵdid(18, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(21, 0, [[3, 0], [\"sliderElement\", 1]], null, 7, \"span\", [[\"appHorizontalDrag\", \"\"], [\"class\", \"timeline-layer-volume-slider\"]], null, [[null, \"onHorizontalDragStart\"], [null, \"onHorizontalDrag\"], [null, \"mousedown\"], [null, \"touchstart\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"mousedown\" === en)) {\r\n        var pd_0 = (i1.ɵnov(_v, 22).onMouseDown($event) !== false);\r\n        ad = (pd_0 && ad);\r\n    } if ((\"touchstart\" === en)) {\r\n        var pd_1 = (i1.ɵnov(_v, 22).onTouchStart($event) !== false);\r\n        ad = (pd_1 && ad);\r\n    } if ((\"onHorizontalDragStart\" === en)) {\r\n        var pd_2 = (_co.onHorizontalDragStart($event) !== false);\r\n        ad = (pd_2 && ad);\r\n    } if ((\"onHorizontalDrag\" === en)) {\r\n        var pd_3 = (_co.onHorizontalDrag($event) !== false);\r\n        ad = (pd_3 && ad);\r\n    } return ad; }, null, null)), i1.ɵdid(22, 147456, null, 0, i3.HorizontalDragDirective, [i4.DocumentService], null, { onHorizontalDragStart: \"onHorizontalDragStart\", onHorizontalDrag: \"onHorizontalDrag\" }), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(24, 0, [[4, 0], [\"trackElement\", 1]], null, 3, \"span\", [[\"class\", \"timeline-layer-volume-slider-track\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(26, 0, null, null, 0, \"span\", [[\"class\", \"timeline-layer-volume-slider-track__handle\"]], [[4, \"left\", \"%\"]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.volumeIsHigh; _ck(_v, 9, 0, currVal_0); var currVal_1 = _co.volumeIsMedium; _ck(_v, 12, 0, currVal_1); var currVal_2 = _co.volumeIsLow; _ck(_v, 15, 0, currVal_2); var currVal_3 = _co.volumeIsMuted; _ck(_v, 18, 0, currVal_3); }, function (_ck, _v) { var _co = _v.component; var currVal_4 = _co.sliderHandlePosition; _ck(_v, 26, 0, currVal_4); }); }\r\nexport function View_TimelineLayerVolumeComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer-volume\", [], null, null, null, View_TimelineLayerVolumeComponent_0, RenderType_TimelineLayerVolumeComponent)), i1.ɵdid(1, 114688, null, 0, i5.TimelineLayerVolumeComponent, [i6.RecorderStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineLayerVolumeComponentNgFactory = i1.ɵccf(\"app-timeline-layer-volume\", i5.TimelineLayerVolumeComponent, View_TimelineLayerVolumeComponent_Host_0, { layerId: \"layerId\" }, {}, []);\r\nexport { TimelineLayerVolumeComponentNgFactory as TimelineLayerVolumeComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-layer-volume[_ngcontent-%COMP%]{position:relative;display:block;padding:0;border:none;float:left;background:#b06ab3;border-radius:2px;cursor:pointer}.timeline-layer-volume__icon[_ngcontent-%COMP%]{display:block;width:25px;height:20px;line-height:22px;float:left;text-align:center;font-size:12px;color:#fff}.timeline-layer-volume-slider[_ngcontent-%COMP%]{position:relative;display:none;width:60px;height:4px;padding:8px 10px 8px 5px;-webkit-box-sizing:content-box;box-sizing:content-box;float:left;border:none;background:0 0;cursor:pointer}.timeline-layer-volume[_ngcontent-%COMP%]:focus   .timeline-layer-volume-slider[_ngcontent-%COMP%], .timeline-layer-volume[_ngcontent-%COMP%]:hover   .timeline-layer-volume-slider[_ngcontent-%COMP%]{display:block}.timeline-layer-volume-slider-track[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:4px;border-radius:2px;background:#fff}.timeline-layer-volume-slider-track__handle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:block;width:12px;height:12px;padding:0;margin:-6px 0 0 -6px;border-radius:50%;background:#fff}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<button\r\n  class=\"timeline-layer-volume\"\r\n  (wheel)=\"onWheel($event)\"\r\n  (keydown)=\"onKeyDown($event)\"\r\n  #buttonElement\r\n  title=\"Change the volume of the layer\"\r\n  i18n-title\r\n>\r\n  <span\r\n    class=\"timeline-layer-volume__icon\"\r\n    (click)=\"onIconClick()\"\r\n    #iconElement\r\n  >\r\n    <span class=\"icon-volume-high\" *ngIf=\"volumeIsHigh\"></span>\r\n    <span class=\"icon-volume-medium\" *ngIf=\"volumeIsMedium\"></span>\r\n    <span class=\"icon-volume-low\" *ngIf=\"volumeIsLow\"></span>\r\n    <span class=\"icon-volume-mute\" *ngIf=\"volumeIsMuted\"></span>\r\n  </span>\r\n\r\n  <span\r\n    class=\"timeline-layer-volume-slider\"\r\n    #sliderElement\r\n    appHorizontalDrag\r\n    (onHorizontalDragStart)=\"onHorizontalDragStart($event)\"\r\n    (onHorizontalDrag)=\"onHorizontalDrag($event)\"\r\n  >\r\n    <span class=\"timeline-layer-volume-slider-track\" #trackElement>\r\n      <span\r\n        class=\"timeline-layer-volume-slider-track__handle\"\r\n        [style.left.%]=\"sliderHandlePosition\"\r\n      ></span>\r\n    </span>\r\n  </span>\r\n</button>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-volume/timeline-layer-volume.component.html","import { Component, Input } from '@angular/core';\r\nimport { LayerId } from '../../../../types';\r\nimport { RecorderStore } from '../../../stores/recorder.store';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layer-remove',\r\n  templateUrl: './timeline-layer-remove.component.html',\r\n  styleUrls: ['./timeline-layer-remove.component.styl']\r\n})\r\nexport class TimelineLayerRemoveComponent {\r\n  @Input() layerId: LayerId;\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n  ) {\r\n  }\r\n\r\n  onClick() {\r\n    this.recorderStore.removeLayer(this.layerId);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layer-remove.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-layer-remove.component\";\r\nimport * as i3 from \"../../../stores/recorder.store\";\r\nvar styles_TimelineLayerRemoveComponent = [i0.styles];\r\nvar RenderType_TimelineLayerRemoveComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayerRemoveComponent, data: {} });\r\nexport { RenderType_TimelineLayerRemoveComponent as RenderType_TimelineLayerRemoveComponent };\r\nexport function View_TimelineLayerRemoveComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 3, \"button\", [[\"class\", \"timeline-layer-remove hide-on-single-layer hide-on-playback hide-on-recording\"], [\"title\", \"\\u0423\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0441\\u043B\\u043E\\u044F\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 0, \"span\", [[\"class\", \"icon-remove\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_TimelineLayerRemoveComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer-remove\", [], null, null, null, View_TimelineLayerRemoveComponent_0, RenderType_TimelineLayerRemoveComponent)), i1.ɵdid(1, 49152, null, 0, i2.TimelineLayerRemoveComponent, [i3.RecorderStore], null, null)], null, null); }\r\nvar TimelineLayerRemoveComponentNgFactory = i1.ɵccf(\"app-timeline-layer-remove\", i2.TimelineLayerRemoveComponent, View_TimelineLayerRemoveComponent_Host_0, { layerId: \"layerId\" }, {}, []);\r\nexport { TimelineLayerRemoveComponentNgFactory as TimelineLayerRemoveComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-layer-remove[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;padding:0;border:none;background:0 0;font-size:20px;color:#d2d2d2}.timeline-layer-remove[_ngcontent-%COMP%]:focus, .timeline-layer-remove[_ngcontent-%COMP%]:hover{color:#ea3d3d}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<button\r\n  class=\"timeline-layer-remove hide-on-single-layer hide-on-playback hide-on-recording\"\r\n  (click)=\"onClick()\"\r\n  title=\"Remove the layer\"\r\n  i18n-title\r\n>\r\n  <span class=\"icon-remove\"></span>\r\n</button>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer-remove/timeline-layer-remove.component.html","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layer.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"../timeline-canvas/timeline-canvas.component.ngfactory\";\r\nimport * as i3 from \"../timeline-canvas/timeline-canvas.component\";\r\nimport * as i4 from \"../timeline.store\";\r\nimport * as i5 from \"./timeline-layer.component\";\r\nimport * as i6 from \"../../stores/recorder.store\";\r\nimport * as i7 from \"../timeline-canvas/timeline-canvas-process-levels.store\";\r\nimport * as i8 from \"../../../shared/directives/horizontal-drag.directive\";\r\nimport * as i9 from \"../../../shared/services/document.service\";\r\nimport * as i10 from \"../timeline-slider/timeline-slider.component.ngfactory\";\r\nimport * as i11 from \"../timeline-slider/timeline-slider.component\";\r\nimport * as i12 from \"@angular/common\";\r\nimport * as i13 from \"./timeline-layer-select/timeline-layer-select.component.ngfactory\";\r\nimport * as i14 from \"./timeline-layer-select/timeline-layer-select.component\";\r\nimport * as i15 from \"./timeline-layer-volume/timeline-layer-volume.component.ngfactory\";\r\nimport * as i16 from \"./timeline-layer-volume/timeline-layer-volume.component\";\r\nimport * as i17 from \"./timeline-layer-remove/timeline-layer-remove.component.ngfactory\";\r\nimport * as i18 from \"./timeline-layer-remove/timeline-layer-remove.component\";\r\nimport * as i19 from \"../../entities/recorder\";\r\nimport * as i20 from \"../../entities/player\";\r\nvar styles_TimelineLayerComponent = [i0.styles];\r\nvar RenderType_TimelineLayerComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayerComponent, data: {} });\r\nexport { RenderType_TimelineLayerComponent as RenderType_TimelineLayerComponent };\r\nfunction View_TimelineLayerComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-canvas\", [], null, null, null, i2.View_TimelineCanvasComponent_0, i2.RenderType_TimelineCanvasComponent)), i1.ɵdid(1, 4440064, null, 0, i3.TimelineCanvasComponent, [i4.TimelineStore, i5.TimelineLayerComponent, i6.RecorderStore, i7.TimelineCanvasProcessLevelsStore], { position: [0, \"position\"] }, null)], function (_ck, _v) { var currVal_0 = _v.context.$implicit; _ck(_v, 1, 0, currVal_0); }, null); }\r\nexport function View_TimelineLayerComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 24, \"div\", [[\"class\", \"timeline-layer\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 9, \"div\", [[\"appHorizontalDrag\", \"\"], [\"class\", \"timeline-layer__slider\"]], null, [[null, \"onHorizontalDragStart\"], [null, \"onHorizontalDrag\"], [null, \"onHorizontalDragEnd\"], [null, \"mousedown\"], [null, \"touchstart\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"mousedown\" === en)) {\r\n        var pd_0 = (i1.ɵnov(_v, 3).onMouseDown($event) !== false);\r\n        ad = (pd_0 && ad);\r\n    } if ((\"touchstart\" === en)) {\r\n        var pd_1 = (i1.ɵnov(_v, 3).onTouchStart($event) !== false);\r\n        ad = (pd_1 && ad);\r\n    } if ((\"onHorizontalDragStart\" === en)) {\r\n        var pd_2 = (_co.onHorizontalDragStart($event) !== false);\r\n        ad = (pd_2 && ad);\r\n    } if ((\"onHorizontalDrag\" === en)) {\r\n        var pd_3 = (_co.onHorizontalDrag($event) !== false);\r\n        ad = (pd_3 && ad);\r\n    } if ((\"onHorizontalDragEnd\" === en)) {\r\n        var pd_4 = (_co.onHorizontalDragEnd($event) !== false);\r\n        ad = (pd_4 && ad);\r\n    } return ad; }, null, null)), i1.ɵdid(3, 147456, null, 0, i8.HorizontalDragDirective, [i9.DocumentService], null, { onHorizontalDragStart: \"onHorizontalDragStart\", onHorizontalDrag: \"onHorizontalDrag\", onHorizontalDragEnd: \"onHorizontalDragEnd\" }), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(5, 0, null, null, 5, \"app-timeline-slider\", [], null, null, null, i10.View_TimelineSliderComponent_0, i10.RenderType_TimelineSliderComponent)), i1.ɵdid(6, 245760, null, 0, i11.TimelineSliderComponent, [i4.TimelineStore], null, null), (_l()(), i1.ɵted(-1, 0, [\"\\n      \"])), (_l()(), i1.ɵand(16777216, null, 0, 1, null, View_TimelineLayerComponent_1)), i1.ɵdid(9, 802816, null, 0, i12.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null), (_l()(), i1.ɵted(-1, 0, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(13, 0, null, null, 7, \"div\", [[\"class\", \"timeline-layer-buttons\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(15, 0, null, null, 1, \"app-timeline-layer-select\", [], null, null, null, i13.View_TimelineLayerSelectComponent_0, i13.RenderType_TimelineLayerSelectComponent)), i1.ɵdid(16, 114688, null, 0, i14.TimelineLayerSelectComponent, [i4.TimelineStore], { layerId: [0, \"layerId\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"app-timeline-layer-volume\", [], null, null, null, i15.View_TimelineLayerVolumeComponent_0, i15.RenderType_TimelineLayerVolumeComponent)), i1.ɵdid(19, 114688, null, 0, i16.TimelineLayerVolumeComponent, [i6.RecorderStore], { layerId: [0, \"layerId\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(22, 0, null, null, 1, \"app-timeline-layer-remove\", [], null, null, null, i17.View_TimelineLayerRemoveComponent_0, i17.RenderType_TimelineLayerRemoveComponent)), i1.ɵdid(23, 49152, null, 0, i18.TimelineLayerRemoveComponent, [i6.RecorderStore], { layerId: [0, \"layerId\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; _ck(_v, 6, 0); var currVal_0 = _co.canvasPositions; _ck(_v, 9, 0, currVal_0); var currVal_1 = _co.layerId; _ck(_v, 16, 0, currVal_1); var currVal_2 = _co.layerId; _ck(_v, 19, 0, currVal_2); var currVal_3 = _co.layerId; _ck(_v, 23, 0, currVal_3); }, null); }\r\nexport function View_TimelineLayerComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer\", [], null, null, null, View_TimelineLayerComponent_0, RenderType_TimelineLayerComponent)), i1.ɵdid(1, 49152, null, 0, i5.TimelineLayerComponent, [i4.TimelineStore, i19.Recorder, i20.Player], null, null)], null, null); }\r\nvar TimelineLayerComponentNgFactory = i1.ɵccf(\"app-timeline-layer\", i5.TimelineLayerComponent, View_TimelineLayerComponent_Host_0, { layerId: \"layerId\", canvasPositions: \"canvasPositions\" }, {}, []);\r\nexport { TimelineLayerComponentNgFactory as TimelineLayerComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-layer[_ngcontent-%COMP%]{position:relative;height:91px;margin-top:6px;background:#fff;border-radius:2px;overflow:hidden}.timeline-layer[_ngcontent-%COMP%]:before{content:'';position:absolute;top:45px;left:0;display:block;width:100%;height:1px;background:#e5e5e5}.timeline-layer__slider[_ngcontent-%COMP%]{position:relative;height:100%;cursor:-webkit-grabbing;cursor:grabbing}.timeline-layer__slider[_ngcontent-%COMP%]:focus, .timeline-layer__slider[_ngcontent-%COMP%]:hover{color:#ea3d3d}.timeline-layer-buttons[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:4px;-webkit-box-sizing:border-box;box-sizing:border-box}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div\r\n  class=\"timeline-layer\"\r\n>\r\n  <div\r\n    class=\"timeline-layer__slider\"\r\n    appHorizontalDrag\r\n    (onHorizontalDragStart)=\"onHorizontalDragStart($event)\"\r\n    (onHorizontalDrag)=\"onHorizontalDrag($event)\"\r\n    (onHorizontalDragEnd)=\"onHorizontalDragEnd($event)\"\r\n  >\r\n    <app-timeline-slider>\r\n      <app-timeline-canvas *ngFor=\"let position of canvasPositions\" [position]=\"position\"></app-timeline-canvas>\r\n    </app-timeline-slider>\r\n  </div>\r\n\r\n  <div class=\"timeline-layer-buttons\">\r\n    <app-timeline-layer-select [layerId]=\"layerId\"></app-timeline-layer-select>\r\n    <app-timeline-layer-volume [layerId]=\"layerId\"></app-timeline-layer-volume>\r\n  </div>\r\n\r\n  <app-timeline-layer-remove [layerId]=\"layerId\"></app-timeline-layer-remove>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layer/timeline-layer.component.html","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { TimelineStore } from '../timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { TIMELINE_CANVAS_WIDTH } from '../../../constants';\r\nimport { LayerId, Milliseconds } from '../../../types';\r\nimport { getIntermediateValues } from '../../../shared/helpers/get-intermediate-values';\r\nimport { lowerDividend } from '../../../shared/helpers/math.helpers';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\n\r\n@Component({\r\n  selector: 'app-timeline-layers',\r\n  templateUrl: './timeline-layers.component.html',\r\n  styleUrls: ['./timeline-layers.component.styl']\r\n})\r\nexport class TimelineLayersComponent implements OnInit, OnDestroy {\r\n  public canvasPositions: Milliseconds[] = [];\r\n\r\n  private timelineChangeSubscriber: Subscriber<number>;\r\n\r\n  private previousStartValue: Milliseconds;\r\n  private previousEndValue: Milliseconds;\r\n  private previousStep: Milliseconds;\r\n\r\n  constructor(\r\n    private timelineStore: TimelineStore,\r\n    private recorderStore: RecorderStore,\r\n  ) {\r\n  }\r\n\r\n  get layerIds(): LayerId[] {\r\n    return this.recorderStore.recordData.layerIds;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateCanvasPositions();\r\n\r\n    this.timelineChangeSubscriber = this.timelineStore.change\r\n      .subscribe(() => this.updateCanvasPositions());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.timelineChangeSubscriber.unsubscribe();\r\n  }\r\n\r\n  private updateCanvasPositions() {\r\n    this.canvasPositions = this.getCanvasPositions();\r\n  }\r\n\r\n  private getCanvasPositions() {\r\n    const step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_CANVAS_WIDTH);\r\n    const startValue = lowerDividend(this.timelineStore.startVisiblePosition, step);\r\n    const endValue = lowerDividend(this.timelineStore.endVisiblePosition, step);\r\n\r\n    if (this.shouldPositionsUpdate(startValue, endValue, step)) {\r\n      this.previousStep = step;\r\n      this.previousStartValue = startValue;\r\n      this.previousEndValue = endValue;\r\n\r\n      return getIntermediateValues(startValue, endValue, step);\r\n    } else {\r\n      return this.canvasPositions;\r\n    }\r\n  }\r\n\r\n  private shouldPositionsUpdate(startValue: Milliseconds, endValue: Milliseconds, step: Milliseconds): boolean {\r\n    return startValue !== this.previousStartValue ||\r\n      endValue !== this.previousEndValue ||\r\n      step !== this.previousStep;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layers/timeline-layers.component.ts","import { TimelineStore } from '../timeline.store';\r\nimport { TIMELINE_CANVAS_WIDTH } from '../../../constants';\r\nimport { getIntermediateValues } from '../../../shared/helpers/get-intermediate-values';\r\nimport { lowerDividend } from '../../../shared/helpers/math.helpers';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nvar TimelineLayersComponent = /** @class */ (function () {\r\n    function TimelineLayersComponent(timelineStore, recorderStore) {\r\n        this.timelineStore = timelineStore;\r\n        this.recorderStore = recorderStore;\r\n        this.canvasPositions = [];\r\n    }\r\n    Object.defineProperty(TimelineLayersComponent.prototype, \"layerIds\", {\r\n        get: function () {\r\n            return this.recorderStore.recordData.layerIds;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TimelineLayersComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.updateCanvasPositions();\r\n        this.timelineChangeSubscriber = this.timelineStore.change\r\n            .subscribe(function () { return _this.updateCanvasPositions(); });\r\n    };\r\n    TimelineLayersComponent.prototype.ngOnDestroy = function () {\r\n        this.timelineChangeSubscriber.unsubscribe();\r\n    };\r\n    TimelineLayersComponent.prototype.updateCanvasPositions = function () {\r\n        this.canvasPositions = this.getCanvasPositions();\r\n    };\r\n    TimelineLayersComponent.prototype.getCanvasPositions = function () {\r\n        var step = this.timelineStore.convertPixelsToMilliseconds(TIMELINE_CANVAS_WIDTH);\r\n        var startValue = lowerDividend(this.timelineStore.startVisiblePosition, step);\r\n        var endValue = lowerDividend(this.timelineStore.endVisiblePosition, step);\r\n        if (this.shouldPositionsUpdate(startValue, endValue, step)) {\r\n            this.previousStep = step;\r\n            this.previousStartValue = startValue;\r\n            this.previousEndValue = endValue;\r\n            return getIntermediateValues(startValue, endValue, step);\r\n        }\r\n        else {\r\n            return this.canvasPositions;\r\n        }\r\n    };\r\n    TimelineLayersComponent.prototype.shouldPositionsUpdate = function (startValue, endValue, step) {\r\n        return startValue !== this.previousStartValue ||\r\n            endValue !== this.previousEndValue ||\r\n            step !== this.previousStep;\r\n    };\r\n    return TimelineLayersComponent;\r\n}());\r\nexport { TimelineLayersComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layers/timeline-layers.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-layers.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"../timeline-layer/timeline-layer.component.ngfactory\";\r\nimport * as i3 from \"../timeline-layer/timeline-layer.component\";\r\nimport * as i4 from \"../timeline.store\";\r\nimport * as i5 from \"../../entities/recorder\";\r\nimport * as i6 from \"../../entities/player\";\r\nimport * as i7 from \"@angular/common\";\r\nimport * as i8 from \"./timeline-layers.component\";\r\nimport * as i9 from \"../../stores/recorder.store\";\r\nvar styles_TimelineLayersComponent = [i0.styles];\r\nvar RenderType_TimelineLayersComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineLayersComponent, data: {} });\r\nexport { RenderType_TimelineLayersComponent as RenderType_TimelineLayersComponent };\r\nfunction View_TimelineLayersComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layer\", [], null, null, null, i2.View_TimelineLayerComponent_0, i2.RenderType_TimelineLayerComponent)), i1.ɵdid(1, 49152, null, 0, i3.TimelineLayerComponent, [i4.TimelineStore, i5.Recorder, i6.Player], { layerId: [0, \"layerId\"], canvasPositions: [1, \"canvasPositions\"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _v.context.$implicit; var currVal_1 = _co.canvasPositions; _ck(_v, 1, 0, currVal_0, currVal_1); }, null); }\r\nexport function View_TimelineLayersComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"timeline-layers\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_TimelineLayersComponent_1)), i1.ɵdid(3, 802816, null, 0, i7.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.layerIds; _ck(_v, 3, 0, currVal_0); }, null); }\r\nexport function View_TimelineLayersComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-layers\", [], null, null, null, View_TimelineLayersComponent_0, RenderType_TimelineLayersComponent)), i1.ɵdid(1, 245760, null, 0, i8.TimelineLayersComponent, [i4.TimelineStore, i9.RecorderStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineLayersComponentNgFactory = i1.ɵccf(\"app-timeline-layers\", i8.TimelineLayersComponent, View_TimelineLayersComponent_Host_0, {}, {}, []);\r\nexport { TimelineLayersComponentNgFactory as TimelineLayersComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layers/timeline-layers.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\"\\n/*# sourceMappingURL=src/app/rec/timeline/timeline-layers/timeline-layers.component.css.map */\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layers/timeline-layers.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-layers\">\r\n  <app-timeline-layer\r\n    *ngFor=\"let layerId of layerIds\"\r\n    [layerId]=\"layerId\"\r\n    [canvasPositions]=\"canvasPositions\"\r\n  ></app-timeline-layer>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-layers/timeline-layers.component.html","import { Component } from '@angular/core';\r\nimport { TimelineStore } from './timeline.store';\r\n\r\n@Component({\r\n  selector: 'app-timeline',\r\n  templateUrl: './timeline.component.html',\r\n  styleUrls: ['./timeline.component.styl']\r\n})\r\nexport class TimelineComponent {\r\n  constructor(private timelineStore: TimelineStore) {\r\n  }\r\n\r\n  get width() {\r\n    return this.timelineStore.width;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.component.ts","import { TimelineStore } from './timeline.store';\r\nvar TimelineComponent = /** @class */ (function () {\r\n    function TimelineComponent(timelineStore) {\r\n        this.timelineStore = timelineStore;\r\n    }\r\n    Object.defineProperty(TimelineComponent.prototype, \"width\", {\r\n        get: function () {\r\n            return this.timelineStore.width;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return TimelineComponent;\r\n}());\r\nexport { TimelineComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-layer-add/timeline-layer-add.component.ngfactory\";\r\nimport * as i3 from \"./timeline-layer-add/timeline-layer-add.component\";\r\nimport * as i4 from \"../stores/recorder.store\";\r\nimport * as i5 from \"./timeline.store\";\r\nimport * as i6 from \"./timeline-buttons/timeline-buttons.component.ngfactory\";\r\nimport * as i7 from \"./timeline-buttons/timeline-buttons.component\";\r\nimport * as i8 from \"../entities/recorder\";\r\nimport * as i9 from \"../entities/player\";\r\nimport * as i10 from \"./timeline-scale/timeline-scale.component.ngfactory\";\r\nimport * as i11 from \"./timeline-scale/timeline-scale.component\";\r\nimport * as i12 from \"./timeline-layers/timeline-layers.component.ngfactory\";\r\nimport * as i13 from \"./timeline-layers/timeline-layers.component\";\r\nimport * as i14 from \"./timeline.component\";\r\nvar styles_TimelineComponent = [i0.styles];\r\nvar RenderType_TimelineComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineComponent, data: {} });\r\nexport { RenderType_TimelineComponent as RenderType_TimelineComponent };\r\nexport function View_TimelineComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 21, \"div\", [[\"class\", \"timeline\"]], [[4, \"width\", \"px\"]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 7, \"div\", [[\"class\", \"timeline__header\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(4, 0, null, null, 1, \"app-timeline-layer-add\", [], null, null, null, i2.View_TimelineLayerAddComponent_0, i2.RenderType_TimelineLayerAddComponent)), i1.ɵdid(5, 49152, null, 0, i3.TimelineLayerAddComponent, [i4.RecorderStore, i5.TimelineStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(7, 0, null, null, 1, \"app-timeline-buttons\", [], null, null, null, i6.View_TimelineButtonsComponent_0, i6.RenderType_TimelineButtonsComponent)), i1.ɵdid(8, 245760, null, 0, i7.TimelineButtonsComponent, [i5.TimelineStore, i4.RecorderStore, i8.Recorder, i9.Player], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(11, 0, null, null, 9, \"div\", [[\"class\", \"timeline__content\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(13, 0, null, null, 0, \"div\", [[\"class\", \"timeline__cursor\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n\\n    \"])), (_l()(), i1.ɵeld(15, 0, null, null, 1, \"app-timeline-scale\", [], null, null, null, i10.View_TimelineScaleComponent_0, i10.RenderType_TimelineScaleComponent)), i1.ɵdid(16, 245760, null, 0, i11.TimelineScaleComponent, [i5.TimelineStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"app-timeline-layers\", [], null, null, null, i12.View_TimelineLayersComponent_0, i12.RenderType_TimelineLayersComponent)), i1.ɵdid(19, 245760, null, 0, i13.TimelineLayersComponent, [i5.TimelineStore, i4.RecorderStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { _ck(_v, 8, 0); _ck(_v, 16, 0); _ck(_v, 19, 0); }, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.width; _ck(_v, 0, 0, currVal_0); }); }\r\nexport function View_TimelineComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline\", [], null, null, null, View_TimelineComponent_0, RenderType_TimelineComponent)), i1.ɵdid(1, 49152, null, 0, i14.TimelineComponent, [i5.TimelineStore], null, null)], null, null); }\r\nvar TimelineComponentNgFactory = i1.ɵccf(\"app-timeline\", i14.TimelineComponent, View_TimelineComponent_Host_0, {}, {}, []);\r\nexport { TimelineComponentNgFactory as TimelineComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline[_ngcontent-%COMP%]{position:relative;margin:60px 0 40px}.timeline__header[_ngcontent-%COMP%]{position:relative;height:36px;margin-bottom:20px;text-align:center}.timeline__content[_ngcontent-%COMP%]{position:relative}.timeline__cursor[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;z-index:2;width:2px;height:100%;margin-left:-1px;background:#ffae00}.timeline__cursor[_ngcontent-%COMP%]:after, .timeline__cursor[_ngcontent-%COMP%]:before{content:'';position:absolute;left:-5px;border:10px solid transparent;border-right-width:6px;border-left-width:6px}.timeline__cursor[_ngcontent-%COMP%]:before{border-top-color:#ffae00;top:-8px}.timeline__cursor[_ngcontent-%COMP%]:after{border-bottom-color:#ffae00;bottom:-8px}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline\" [style.width.px]=\"width\">\r\n  <div class=\"timeline__header\">\r\n    <app-timeline-layer-add></app-timeline-layer-add>\r\n    <app-timeline-buttons></app-timeline-buttons>\r\n  </div>\r\n\r\n  <div class=\"timeline__content\">\r\n    <div class=\"timeline__cursor\"></div>\r\n\r\n    <app-timeline-scale></app-timeline-scale>\r\n    <app-timeline-layers></app-timeline-layers>\r\n  </div>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline.component.html","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-timeline-block',\r\n  templateUrl: './timeline-block.component.html',\r\n  styleUrls: ['./timeline-block.component.styl']\r\n})\r\nexport class TimelineBlockComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (window['adsbygoogle'] = window['adsbygoogle'] || []).push({});\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-block/timeline-block.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timeline-block.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./timeline-block.component\";\r\nvar styles_TimelineBlockComponent = [i0.styles];\r\nvar RenderType_TimelineBlockComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineBlockComponent, data: {} });\r\nexport { RenderType_TimelineBlockComponent as RenderType_TimelineBlockComponent };\r\nexport function View_TimelineBlockComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 3, \"div\", [[\"class\", \"timeline-block\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 0, \"ins\", [[\"class\", \"adsbygoogle\"], [\"data-ad-client\", \"ca-pub-4733833642011475\"], [\"data-ad-slot\", \"8828886259\"], [\"style\", \"display:inline-block;width:468px;height:60px\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_TimelineBlockComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timeline-block\", [], null, null, null, View_TimelineBlockComponent_0, RenderType_TimelineBlockComponent)), i1.ɵdid(1, 4308992, null, 0, i2.TimelineBlockComponent, [], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineBlockComponentNgFactory = i1.ɵccf(\"app-timeline-block\", i2.TimelineBlockComponent, View_TimelineBlockComponent_Host_0, {}, {}, []);\r\nexport { TimelineBlockComponentNgFactory as TimelineBlockComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-block/timeline-block.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timeline-block[_ngcontent-%COMP%]{width:468px;margin:40px auto}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-block/timeline-block.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"timeline-block\">\r\n  <ins\r\n    class=\"adsbygoogle\"\r\n    style=\"display:inline-block;width:468px;height:60px\"\r\n    data-ad-client=\"ca-pub-4733833642011475\"\r\n    data-ad-slot=\"8828886259\"\r\n  ></ins>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/timeline/timeline-block/timeline-block.component.html","import { Component, OnInit } from '@angular/core';\r\nimport { Recorder } from '../../entities/recorder';\r\nimport { TimelineStore } from '../../timeline/timeline.store';\r\nimport { PlaybackConfig } from '../../interfaces/playback-config';\r\nimport { Player } from '../../entities/player';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\n\r\n@Component({\r\n  selector: 'app-record-buttons',\r\n  templateUrl: './record-buttons.component.html',\r\n  styleUrls: ['./record-buttons.component.styl'],\r\n})\r\nexport class RecordButtonsComponent implements OnInit {\r\n  repeat = false;\r\n\r\n  constructor(\r\n    private timelineStore: TimelineStore,\r\n    private recorderStore: RecorderStore,\r\n    private recorder: Recorder,\r\n    private player: Player,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  get undoButtonDisabled(): boolean {\r\n    return this.player.playback ||\r\n      this.recorder.recording ||\r\n      this.recorderStore.historyData.appliedTransactionsNumber === 0;\r\n  }\r\n\r\n  onUndoButtonClick() {\r\n    this.recorderStore.undo();\r\n  }\r\n\r\n  get redoButtonDisabled(): boolean {\r\n    return this.player.playback ||\r\n      this.recorder.recording ||\r\n      this.recorderStore.historyData.rollbackTransactionsNumber === 0;\r\n  }\r\n\r\n  onRedoButtonClick() {\r\n    this.recorderStore.redo();\r\n  }\r\n\r\n  onRepeatButtonClick() {\r\n    this.repeat = !this.repeat;\r\n  }\r\n\r\n  get repeatButtonIsDisabled(): boolean {\r\n    return this.player.playback ||\r\n      this.recorder.recording;\r\n  }\r\n\r\n  get playback(): boolean {\r\n    return this.player.playback;\r\n  }\r\n\r\n  get playbackButtonIsDisabled(): boolean {\r\n    return this.recorderStore.recordData.length === 0 || this.recorder.recording;\r\n  }\r\n\r\n  onPlaybackButtonClick() {\r\n    this.togglePlayback();\r\n  }\r\n\r\n  private togglePlayback() {\r\n    if (this.player.playback) {\r\n      this.player.stop();\r\n    } else {\r\n      this.player.play(this.playbackConfig);\r\n    }\r\n  }\r\n\r\n  private get playbackConfig(): PlaybackConfig {\r\n    const currentPosition = this.timelineStore.currentPosition;\r\n    const recordLength = this.recorderStore.recordData.length;\r\n\r\n    const startPosition = currentPosition < recordLength ? currentPosition : 0;\r\n    const endPosition = recordLength;\r\n    const repeat = this.repeat;\r\n\r\n    return {startPosition, endPosition, repeat};\r\n  }\r\n\r\n  onRecordingButtonClick() {\r\n    this.toggleRecording();\r\n  }\r\n\r\n  get recordingButtonIsDisabled(): boolean {\r\n    return this.player.playback;\r\n  }\r\n\r\n  get recording(): boolean {\r\n    return this.recorder.recording;\r\n  }\r\n\r\n  private toggleRecording() {\r\n    this.recording ? this.stopRecording() : this.startRecording();\r\n  }\r\n\r\n  private startRecording() {\r\n    this.recorder.startRecording(this.timelineStore.recordingConfig);\r\n  }\r\n\r\n  private stopRecording() {\r\n    this.recorder.stopRecording();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/record-buttons/record-buttons.component.ts","import { Recorder } from '../../entities/recorder';\r\nimport { TimelineStore } from '../../timeline/timeline.store';\r\nimport { Player } from '../../entities/player';\r\nimport { RecorderStore } from '../../stores/recorder.store';\r\nvar RecordButtonsComponent = /** @class */ (function () {\r\n    function RecordButtonsComponent(timelineStore, recorderStore, recorder, player) {\r\n        this.timelineStore = timelineStore;\r\n        this.recorderStore = recorderStore;\r\n        this.recorder = recorder;\r\n        this.player = player;\r\n        this.repeat = false;\r\n    }\r\n    RecordButtonsComponent.prototype.ngOnInit = function () {\r\n    };\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"undoButtonDisabled\", {\r\n        get: function () {\r\n            return this.player.playback ||\r\n                this.recorder.recording ||\r\n                this.recorderStore.historyData.appliedTransactionsNumber === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecordButtonsComponent.prototype.onUndoButtonClick = function () {\r\n        this.recorderStore.undo();\r\n    };\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"redoButtonDisabled\", {\r\n        get: function () {\r\n            return this.player.playback ||\r\n                this.recorder.recording ||\r\n                this.recorderStore.historyData.rollbackTransactionsNumber === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecordButtonsComponent.prototype.onRedoButtonClick = function () {\r\n        this.recorderStore.redo();\r\n    };\r\n    RecordButtonsComponent.prototype.onRepeatButtonClick = function () {\r\n        this.repeat = !this.repeat;\r\n    };\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"repeatButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.player.playback ||\r\n                this.recorder.recording;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"playback\", {\r\n        get: function () {\r\n            return this.player.playback;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"playbackButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.recorderStore.recordData.length === 0 || this.recorder.recording;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecordButtonsComponent.prototype.onPlaybackButtonClick = function () {\r\n        this.togglePlayback();\r\n    };\r\n    RecordButtonsComponent.prototype.togglePlayback = function () {\r\n        if (this.player.playback) {\r\n            this.player.stop();\r\n        }\r\n        else {\r\n            this.player.play(this.playbackConfig);\r\n        }\r\n    };\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"playbackConfig\", {\r\n        get: function () {\r\n            var currentPosition = this.timelineStore.currentPosition;\r\n            var recordLength = this.recorderStore.recordData.length;\r\n            var startPosition = currentPosition < recordLength ? currentPosition : 0;\r\n            var endPosition = recordLength;\r\n            var repeat = this.repeat;\r\n            return { startPosition: startPosition, endPosition: endPosition, repeat: repeat };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecordButtonsComponent.prototype.onRecordingButtonClick = function () {\r\n        this.toggleRecording();\r\n    };\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"recordingButtonIsDisabled\", {\r\n        get: function () {\r\n            return this.player.playback;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecordButtonsComponent.prototype, \"recording\", {\r\n        get: function () {\r\n            return this.recorder.recording;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecordButtonsComponent.prototype.toggleRecording = function () {\r\n        this.recording ? this.stopRecording() : this.startRecording();\r\n    };\r\n    RecordButtonsComponent.prototype.startRecording = function () {\r\n        this.recorder.startRecording(this.timelineStore.recordingConfig);\r\n    };\r\n    RecordButtonsComponent.prototype.stopRecording = function () {\r\n        this.recorder.stopRecording();\r\n    };\r\n    return RecordButtonsComponent;\r\n}());\r\nexport { RecordButtonsComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/record-buttons/record-buttons.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./record-buttons.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./record-buttons.component\";\r\nimport * as i3 from \"../../timeline/timeline.store\";\r\nimport * as i4 from \"../../stores/recorder.store\";\r\nimport * as i5 from \"../../entities/recorder\";\r\nimport * as i6 from \"../../entities/player\";\r\nvar styles_RecordButtonsComponent = [i0.styles];\r\nvar RenderType_RecordButtonsComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_RecordButtonsComponent, data: {} });\r\nexport { RenderType_RecordButtonsComponent as RenderType_RecordButtonsComponent };\r\nexport function View_RecordButtonsComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 26, \"div\", [[\"class\", \"record-buttons\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 3, \"button\", [[\"class\", \"record-buttons__item record-buttons-repeat\"], [\"title\", \"\\u0417\\u0430\\u0446\\u0438\\u043A\\u043B\\u0438\\u0442\\u044C \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0435\"]], [[2, \"record-buttons-repeat--active\", null], [8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onRepeatButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(4, 0, null, null, 0, \"span\", [[\"class\", \"icon-repeat\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(7, 0, null, null, 3, \"button\", [[\"class\", \"record-buttons__item record-buttons-playback\"], [\"title\", \"\\u0412\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0441\\u0442\\u0438 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onPlaybackButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(9, 0, null, null, 0, \"span\", [], [[2, \"icon-stop\", null], [2, \"icon-play\", null]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(12, 0, null, null, 3, \"button\", [[\"class\", \"record-buttons__item record-buttons-recording\"], [\"title\", \"\\u0417\\u0430\\u043F\\u0438\\u0441\\u044C\"]], [[2, \"record-buttons-recording--active\", null], [8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onRecordingButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(14, 0, null, null, 0, \"span\", [[\"class\", \"record-buttons-recording__icon icon-microphone\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(17, 0, null, null, 3, \"button\", [[\"class\", \"record-buttons__item record-buttons__item--undo\"], [\"title\", \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0435\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onUndoButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(19, 0, null, null, 0, \"span\", [[\"class\", \"icon-undo\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(22, 0, null, null, 3, \"button\", [[\"class\", \"record-buttons__item record-buttons__item--redo\"], [\"title\", \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0435\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"]], [[8, \"disabled\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onRedoButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(24, 0, null, null, 0, \"span\", [[\"class\", \"icon-redo\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.repeat; var currVal_1 = _co.repeatButtonIsDisabled; _ck(_v, 2, 0, currVal_0, currVal_1); var currVal_2 = _co.playbackButtonIsDisabled; _ck(_v, 7, 0, currVal_2); var currVal_3 = _co.playback; var currVal_4 = (false === _co.playback); _ck(_v, 9, 0, currVal_3, currVal_4); var currVal_5 = _co.recording; var currVal_6 = _co.recordingButtonIsDisabled; _ck(_v, 12, 0, currVal_5, currVal_6); var currVal_7 = _co.undoButtonDisabled; _ck(_v, 17, 0, currVal_7); var currVal_8 = _co.redoButtonDisabled; _ck(_v, 22, 0, currVal_8); }); }\r\nexport function View_RecordButtonsComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-record-buttons\", [], null, null, null, View_RecordButtonsComponent_0, RenderType_RecordButtonsComponent)), i1.ɵdid(1, 114688, null, 0, i2.RecordButtonsComponent, [i3.TimelineStore, i4.RecorderStore, i5.Recorder, i6.Player], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar RecordButtonsComponentNgFactory = i1.ɵccf(\"app-record-buttons\", i2.RecordButtonsComponent, View_RecordButtonsComponent_Host_0, {}, {}, []);\r\nexport { RecordButtonsComponentNgFactory as RecordButtonsComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/record-buttons/record-buttons.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".record-buttons[_ngcontent-%COMP%]{text-align:center}.record-buttons__item[_ngcontent-%COMP%]{display:inline-block;width:56px;height:56px;line-height:100%;padding:0;border:none;overflow:hidden;vertical-align:middle;background:0 0;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:pointer;color:#fff}.record-buttons__item--redo[_ngcontent-%COMP%], .record-buttons__item--undo[_ngcontent-%COMP%]{font-size:24px}.record-buttons__item[_ngcontent-%COMP%]:disabled{opacity:.5}.record-buttons-recording[_ngcontent-%COMP%]{margin:0 30px;border:2px solid #fff;border-radius:50%;background:#fff}.record-buttons-recording__icon[_ngcontent-%COMP%]{display:block;width:52px;height:52px;line-height:52px;border:2px solid #3d9fea;border-radius:50%;font-size:25px;color:#3d9fea}.record-buttons-recording--active[_ngcontent-%COMP%]   .record-buttons-recording__icon[_ngcontent-%COMP%]{color:#f44336;border-color:#f44336}.record-buttons-playback[_ngcontent-%COMP%]{font-size:40px}.record-buttons-repeat[_ngcontent-%COMP%]{font-size:18px;opacity:.5}.record-buttons-repeat--active[_ngcontent-%COMP%]{opacity:1}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/record-buttons/record-buttons.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"record-buttons\">\r\n  <button\r\n    class=\"record-buttons__item record-buttons-repeat\"\r\n    [class.record-buttons-repeat--active]=\"repeat\"\r\n    (click)=\"onRepeatButtonClick()\"\r\n    [disabled]=\"repeatButtonIsDisabled\"\r\n    title=\"Loop Playback\"\r\n    i18n-title\r\n  >\r\n    <span class=\"icon-repeat\"></span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"record-buttons__item record-buttons-playback\"\r\n    (click)=\"onPlaybackButtonClick()\"\r\n    [disabled]=\"playbackButtonIsDisabled\"\r\n    title=\"Play the record\"\r\n    i18n-title\r\n  >\r\n    <span\r\n      [class.icon-stop]=\"playback\"\r\n      [class.icon-play]=\"false === playback\"\r\n    ></span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"record-buttons__item record-buttons-recording\"\r\n    [class.record-buttons-recording--active]=\"recording\"\r\n    (click)=\"onRecordingButtonClick()\"\r\n    [disabled]=\"recordingButtonIsDisabled\"\r\n    title=\"Recording\"\r\n    i18n-title\r\n  >\r\n    <span class=\"record-buttons-recording__icon icon-microphone\"></span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"record-buttons__item record-buttons__item--undo\"\r\n    (click)=\"onUndoButtonClick()\"\r\n    [disabled]=\"undoButtonDisabled\"\r\n    title=\"Undo the previous action\"\r\n    i18n-title\r\n  >\r\n    <span class=\"icon-undo\"></span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"record-buttons__item record-buttons__item--redo\"\r\n    (click)=\"onRedoButtonClick()\"\r\n    [disabled]=\"redoButtonDisabled\"\r\n    title=\"Redo the previous action\"\r\n    i18n-title\r\n  >\r\n    <span class=\"icon-redo\"></span>\r\n  </button>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/record-buttons/record-buttons.component.html","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { Hours, Milliseconds, Minutes, Seconds } from '../../types';\r\n\r\nconst millisecondsInSecond = 1000;\r\nconst millisecondsInMinute = 60 * millisecondsInSecond;\r\nconst millisecondsInHour = 60 * millisecondsInMinute;\r\n\r\n@Pipe({\r\n  name: 'milliseconds'\r\n})\r\nexport class MillisecondsPipe implements PipeTransform {\r\n  transform(milliseconds: Milliseconds): string {\r\n    const hours = getHours(milliseconds);\r\n\r\n    milliseconds -= hours * millisecondsInHour;\r\n\r\n    const minutes = getMinutes(milliseconds);\r\n\r\n    milliseconds -= minutes * millisecondsInMinute;\r\n\r\n    const seconds = getSeconds(milliseconds);\r\n\r\n    milliseconds -= seconds * millisecondsInSecond;\r\n\r\n    return padNumber(hours, 2) + ':' +\r\n      padNumber(minutes, 2) + ':' +\r\n      padNumber(seconds, 2) + '.' +\r\n      padNumber(milliseconds, 3);\r\n  }\r\n}\r\n\r\nfunction padNumber(number: number, length: number): string {\r\n  let string: string = number.toString();\r\n\r\n  while (string.length < length) {\r\n    string = '0' + string;\r\n  }\r\n\r\n  return string;\r\n}\r\n\r\nfunction getHours(milliseconds: Milliseconds): Hours {\r\n  return Math.floor(milliseconds / millisecondsInHour);\r\n}\r\n\r\nfunction getMinutes(milliseconds: Milliseconds): Minutes {\r\n  return Math.floor(milliseconds / millisecondsInMinute);\r\n}\r\n\r\nfunction getSeconds(milliseconds: Milliseconds): Seconds {\r\n  return Math.floor(milliseconds / millisecondsInSecond);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/pipes/milliseconds.pipe.ts","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { TimelineStore } from '../../timeline/timeline.store';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\n\r\n@Component({\r\n  selector: 'app-timer',\r\n  templateUrl: 'timer.component.html',\r\n  styleUrls: ['timer.component.styl']\r\n})\r\nexport class TimelineTimerComponent implements OnInit, OnDestroy {\r\n  public milliseconds = 0;\r\n  public subscriber: Subscriber<number>;\r\n\r\n  constructor(public timelineStore: TimelineStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateMilliseconds();\r\n\r\n    this.subscriber = this.timelineStore.currentPositionChange\r\n      .subscribe(() => this.updateMilliseconds());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriber.unsubscribe();\r\n  }\r\n\r\n  updateMilliseconds() {\r\n    this.milliseconds = this.timelineStore.currentPosition;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/timer/timer.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./timer.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"../../pipes/milliseconds.pipe\";\r\nimport * as i3 from \"./timer.component\";\r\nimport * as i4 from \"../../timeline/timeline.store\";\r\nvar styles_TimelineTimerComponent = [i0.styles];\r\nvar RenderType_TimelineTimerComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_TimelineTimerComponent, data: {} });\r\nexport { RenderType_TimelineTimerComponent as RenderType_TimelineTimerComponent };\r\nexport function View_TimelineTimerComponent_0(_l) { return i1.ɵvid(0, [i1.ɵpid(0, i2.MillisecondsPipe, []), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"timer\"], [\"title\", \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0430\\u044F \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E\\u0439 \\u0448\\u043A\\u0430\\u043B\\u044B\"]], null, null, null, null, null)), (_l()(), i1.ɵted(2, null, [\"\\n  \", \"\\n\"])), i1.ɵppd(3, 1), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = i1.ɵunv(_v, 2, 0, _ck(_v, 3, 0, i1.ɵnov(_v, 0), _co.milliseconds)); _ck(_v, 2, 0, currVal_0); }); }\r\nexport function View_TimelineTimerComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-timer\", [], null, null, null, View_TimelineTimerComponent_0, RenderType_TimelineTimerComponent)), i1.ɵdid(1, 245760, null, 0, i3.TimelineTimerComponent, [i4.TimelineStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar TimelineTimerComponentNgFactory = i1.ɵccf(\"app-timer\", i3.TimelineTimerComponent, View_TimelineTimerComponent_Host_0, {}, {}, []);\r\nexport { TimelineTimerComponentNgFactory as TimelineTimerComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/timer/timer.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".timer[_ngcontent-%COMP%]{display:block;margin:30px 0;text-align:center;font-size:50px;font-weight:300;font-family:Lato,sans-serif}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/timer/timer.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div\r\n  class=\"timer\"\r\n  title=\"The current position of the timeline\"\r\n  i18n-title\r\n>\r\n  {{milliseconds | milliseconds}}\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/timer/timer.component.html","import { Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-popup',\r\n  templateUrl: './popup.component.html',\r\n  styleUrls: ['./popup.component.styl']\r\n})\r\nexport class PopupComponent implements OnInit {\r\n  @Input() display: boolean;\r\n  @Output() displayChange: EventEmitter<boolean> = new EventEmitter;\r\n\r\n  constructor(private elementRef: ElementRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  @HostListener('document:mousedown', ['$event']) onDocumentMouseDown(event: MouseEvent) {\r\n    if (this.elementRef.nativeElement.contains(event.target)) {\r\n      return;\r\n    }\r\n\r\n    this.displayChange.emit(false);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/popup/popup.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./popup.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./popup.component\";\r\nvar styles_PopupComponent = [i0.styles];\r\nvar RenderType_PopupComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_PopupComponent, data: {} });\r\nexport { RenderType_PopupComponent as RenderType_PopupComponent };\r\nexport function View_PopupComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"div\", [[\"class\", \"popup\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 3, \"div\", [[\"class\", \"popup__content\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), i1.ɵncd(null, 0), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_PopupComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-popup\", [], null, [[\"document\", \"mousedown\"]], function (_v, en, $event) { var ad = true; if ((\"document:mousedown\" === en)) {\r\n        var pd_0 = (i1.ɵnov(_v, 1).onDocumentMouseDown($event) !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, View_PopupComponent_0, RenderType_PopupComponent)), i1.ɵdid(1, 114688, null, 0, i2.PopupComponent, [i1.ElementRef], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar PopupComponentNgFactory = i1.ɵccf(\"app-popup\", i2.PopupComponent, View_PopupComponent_Host_0, { display: \"display\" }, { displayChange: \"displayChange\" }, [\"*\"]);\r\nexport { PopupComponentNgFactory as PopupComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/popup/popup.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".popup[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;margin-bottom:10px}.popup[_ngcontent-%COMP%]:after{content:'';position:absolute;top:-6px;left:-6px;display:block;width:12px;height:12px;background:#fff;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-box-shadow:-2px 2px 2px rgba(0,0,0,.4);box-shadow:-2px 2px 2px rgba(0,0,0,.4)}.popup__content[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:0;background:#fff;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.4);box-shadow:0 2px 4px rgba(0,0,0,.4);border-radius:5px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/popup/popup.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"popup\">\r\n  <div class=\"popup__content\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/popup/popup.component.html","import { Component, OnInit } from '@angular/core';\r\nimport { RecorderStore } from '../../../stores/recorder.store';\r\nimport { ShareService } from '../../../services/share.service';\r\nimport { MessageService } from '../../../../shared/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-share-link',\r\n  templateUrl: './share-link.component.html',\r\n  styleUrls: ['./share-link.component.styl']\r\n})\r\nexport class ShareLinkComponent implements OnInit {\r\n  processing = false;\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n    private shareService: ShareService,\r\n    private messageService: MessageService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onButtonClick() {\r\n    if (this.processing === true) {\r\n      return;\r\n    }\r\n\r\n    this.processing = true;\r\n\r\n    this.recorderStore.getCompiledRecord()\r\n      .then(mp3Data => this.shareService.upload(mp3Data))\r\n      .then(() => this.processing = false)\r\n      .catch(() => this.messageService.showServerError());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link.component.ts","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { Mp3Data, RecordId, RecordUrl } from '../../types';\r\nimport { environment } from '../../../environments/environment';\r\nimport { RECORD_TOKEN_KEY } from '../../constants';\r\nimport { Router } from '@angular/router';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\ninterface UploadRecordResponse {\r\n  id: string;\r\n  token: string;\r\n}\r\n\r\n@Injectable()\r\nexport class ShareService {\r\n  onRecordUrl: EventEmitter<RecordUrl> = new EventEmitter();\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private router: Router,\r\n  ) {\r\n  }\r\n\r\n  upload(mp3Data: Mp3Data): Promise<RecordUrl> {\r\n    return this.sendResponse(mp3Data)\r\n      .map(response => {\r\n        const url = this.getRecordUrl(response);\r\n        this.onRecordUrl.emit(url);\r\n        return url;\r\n      })\r\n      .toPromise();\r\n  }\r\n\r\n  private sendResponse(mp3Data: Mp3Data): Observable<UploadRecordResponse> {\r\n    return this.http.post(environment.apiUrl + 'records', this.createFormData(mp3Data))\r\n      .map((response: UploadRecordResponse) => {\r\n        localStorage.setItem(RECORD_TOKEN_KEY, response.token);\r\n        return response;\r\n      });\r\n  }\r\n\r\n  private createFormData(mp3Data: Mp3Data): FormData {\r\n    const type = 'audio/mp3';\r\n    const blob = new Blob(mp3Data, {type});\r\n    const file = new File([blob], 'record.mp3', {type});\r\n    const formData: FormData = new FormData();\r\n    const token = localStorage.getItem(RECORD_TOKEN_KEY);\r\n\r\n    formData.append('record', file);\r\n\r\n    if (token) {\r\n      formData.append('token', token);\r\n    }\r\n\r\n    return formData;\r\n  }\r\n\r\n  private getRecordUrl(response: UploadRecordResponse): RecordUrl {\r\n    const recordId: RecordId = response.id;\r\n    const urlBase = document.location.protocol + '//' + document.location.host + document.location.pathname;\r\n    const urlTree = this.router.createUrlTree(['/play', recordId]);\r\n\r\n    return urlBase + '#' + urlTree.toString();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/services/share.service.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./share-link.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"./share-link.component\";\r\nimport * as i4 from \"../../../stores/recorder.store\";\r\nimport * as i5 from \"../../../services/share.service\";\r\nimport * as i6 from \"../../../../shared/services/message.service\";\r\nvar styles_ShareLinkComponent = [i0.styles];\r\nvar RenderType_ShareLinkComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_ShareLinkComponent, data: {} });\r\nexport { RenderType_ShareLinkComponent as RenderType_ShareLinkComponent };\r\nfunction View_ShareLinkComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"span\", [[\"class\", \"share-button__badge\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"WWW\"]))], null, null); }\r\nfunction View_ShareLinkComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"span\", [[\"class\", \"share-button__badge\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 URL\"]))], null, null); }\r\nexport function View_ShareLinkComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 13, \"div\", [[\"class\", \"share-link\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 10, \"button\", [[\"class\", \"share-button\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(4, 0, null, null, 1, \"span\", [[\"class\", \"share-button__title\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443 \\u043D\\u0430 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"])), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareLinkComponent_1)), i1.ɵdid(8, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareLinkComponent_2)), i1.ɵdid(11, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = (_co.processing === false); _ck(_v, 8, 0, currVal_0); var currVal_1 = _co.processing; _ck(_v, 11, 0, currVal_1); }, null); }\r\nexport function View_ShareLinkComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-share-link\", [], null, null, null, View_ShareLinkComponent_0, RenderType_ShareLinkComponent)), i1.ɵdid(1, 114688, null, 0, i3.ShareLinkComponent, [i4.RecorderStore, i5.ShareService, i6.MessageService], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar ShareLinkComponentNgFactory = i1.ɵccf(\"app-share-link\", i3.ShareLinkComponent, View_ShareLinkComponent_Host_0, {}, {}, []);\r\nexport { ShareLinkComponentNgFactory as ShareLinkComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".share-link[_ngcontent-%COMP%]{border-bottom:1px solid #e2e2e2}.share-link[_ngcontent-%COMP%]   .share-button__badge[_ngcontent-%COMP%]{background:#4caf50;font-size:9px}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"share-link\">\r\n  <button class=\"share-button\" (click)=\"onButtonClick()\">\r\n    <span class=\"share-button__title\" i18n>Get a link to the record</span>\r\n    <span class=\"share-button__badge\" *ngIf=\"processing === false\">WWW</span>\r\n    <span class=\"share-button__badge\" *ngIf=\"processing\" i18n>Getting URL</span>\r\n  </button>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-link/share-link.component.html","import { Component, OnInit } from '@angular/core';\r\nimport { RecorderStore } from '../../../stores/recorder.store';\r\nimport { forceDataDownload } from '../../../../shared/helpers/force-download';\r\n\r\n@Component({\r\n  selector: 'app-share-download',\r\n  templateUrl: './share-download.component.html',\r\n  styleUrls: ['./share-download.component.styl']\r\n})\r\nexport class ShareDownloadComponent implements OnInit {\r\n  processing = false;\r\n\r\n  constructor(private recorderStore: RecorderStore) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onButtonClick() {\r\n    if (this.processing === true) {\r\n      return;\r\n    }\r\n\r\n    this.processing = true;\r\n\r\n    this.recorderStore.getCompiledRecord()\r\n      .then(mp3Data => {\r\n        this.processing = false;\r\n\r\n        forceDataDownload(mp3Data, 'audio/mp3', 'dictaphone.audio.mp3');\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-download/share-download.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./share-download.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"./share-download.component\";\r\nimport * as i4 from \"../../../stores/recorder.store\";\r\nvar styles_ShareDownloadComponent = [i0.styles];\r\nvar RenderType_ShareDownloadComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_ShareDownloadComponent, data: {} });\r\nexport { RenderType_ShareDownloadComponent as RenderType_ShareDownloadComponent };\r\nfunction View_ShareDownloadComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"span\", [[\"class\", \"share-button__badge\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"MP3\"]))], null, null); }\r\nfunction View_ShareDownloadComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"span\", [[\"class\", \"share-button__badge\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u041E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0430\"]))], null, null); }\r\nexport function View_ShareDownloadComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 10, \"button\", [[\"class\", \"share-button\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"span\", [[\"class\", \"share-button__title\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C MP3 \\u0444\\u0430\\u0439\\u043B\"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareDownloadComponent_1)), i1.ɵdid(6, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ShareDownloadComponent_2)), i1.ɵdid(9, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = (_co.processing === false); _ck(_v, 6, 0, currVal_0); var currVal_1 = _co.processing; _ck(_v, 9, 0, currVal_1); }, null); }\r\nexport function View_ShareDownloadComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-share-download\", [], null, null, null, View_ShareDownloadComponent_0, RenderType_ShareDownloadComponent)), i1.ɵdid(1, 114688, null, 0, i3.ShareDownloadComponent, [i4.RecorderStore], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar ShareDownloadComponentNgFactory = i1.ɵccf(\"app-share-download\", i3.ShareDownloadComponent, View_ShareDownloadComponent_Host_0, {}, {}, []);\r\nexport { ShareDownloadComponentNgFactory as ShareDownloadComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-download/share-download.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\"\\n/*# sourceMappingURL=src/app/rec/components/share/share-download/share-download.component.css.map */\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-download/share-download.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<button class=\"share-button\" (click)=\"onButtonClick()\">\r\n  <span class=\"share-button__title\" i18n>Download MP3 file</span>\r\n  <span class=\"share-button__badge\" *ngIf=\"processing === false\">MP3</span>\r\n  <span class=\"share-button__badge\" *ngIf=\"processing\" i18n>Processing</span>\r\n</button>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share-download/share-download.component.html","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-share',\r\n  templateUrl: './share.component.html',\r\n  styleUrls: ['./share.component.styl'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ShareComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./share.component.styl.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./share-link/share-link.component.ngfactory\";\r\nimport * as i3 from \"./share-link/share-link.component\";\r\nimport * as i4 from \"../../stores/recorder.store\";\r\nimport * as i5 from \"../../services/share.service\";\r\nimport * as i6 from \"../../../shared/services/message.service\";\r\nimport * as i7 from \"./share-download/share-download.component.ngfactory\";\r\nimport * as i8 from \"./share-download/share-download.component\";\r\nimport * as i9 from \"./share.component\";\r\nvar styles_ShareComponent = [i0.styles];\r\nvar RenderType_ShareComponent = i1.ɵcrt({ encapsulation: 2, styles: styles_ShareComponent, data: {} });\r\nexport { RenderType_ShareComponent as RenderType_ShareComponent };\r\nexport function View_ShareComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 7, \"div\", [[\"class\", \"share\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"app-share-link\", [], null, null, null, i2.View_ShareLinkComponent_0, i2.RenderType_ShareLinkComponent)), i1.ɵdid(3, 114688, null, 0, i3.ShareLinkComponent, [i4.RecorderStore, i5.ShareService, i6.MessageService], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"app-share-download\", [], null, null, null, i7.View_ShareDownloadComponent_0, i7.RenderType_ShareDownloadComponent)), i1.ɵdid(6, 114688, null, 0, i8.ShareDownloadComponent, [i4.RecorderStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { _ck(_v, 3, 0); _ck(_v, 6, 0); }, null); }\r\nexport function View_ShareComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-share\", [], null, null, null, View_ShareComponent_0, RenderType_ShareComponent)), i1.ɵdid(1, 114688, null, 0, i9.ShareComponent, [], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar ShareComponentNgFactory = i1.ɵccf(\"app-share\", i9.ShareComponent, View_ShareComponent_Host_0, {}, {}, []);\r\nexport { ShareComponentNgFactory as ShareComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".share{width:280px}.share-button{position:relative;z-index:1;display:block;width:100%;line-height:20px;padding:12px;border:none;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:left;background:0 0;font-size:14px;color:#000}.share-button:hover{background:rgba(0,0,0,.05)}.share-button__badge{position:absolute;top:50%;right:12px;line-height:20px;margin-top:-10px;padding:0 10px;border-radius:2px;background:#3d9fea;color:#fff;font-weight:700;font-size:10px;text-transform:uppercase}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share.component.styl.ngstyle.js.pre-build-optimizer.js","<div class=\"share\">\r\n  <app-share-link></app-share-link>\r\n  <app-share-download></app-share-download>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/share/share.component.html","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-toolbar-share',\r\n  templateUrl: './toolbar-share.component.html',\r\n  styleUrls: ['./toolbar-share.component.styl']\r\n})\r\nexport class ToolbarShareComponent {\r\n  popupIsDisplayed = false;\r\n\r\n  onButtonClick() {\r\n    this.popupIsDisplayed = !this.popupIsDisplayed;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./toolbar-share.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"../../../../shared/components/popup/popup.component.ngfactory\";\r\nimport * as i3 from \"../../../../shared/components/popup/popup.component\";\r\nimport * as i4 from \"../../share/share.component.ngfactory\";\r\nimport * as i5 from \"../../share/share.component\";\r\nimport * as i6 from \"@angular/common\";\r\nimport * as i7 from \"./toolbar-share.component\";\r\nvar styles_ToolbarShareComponent = [i0.styles];\r\nvar RenderType_ToolbarShareComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_ToolbarShareComponent, data: {} });\r\nexport { RenderType_ToolbarShareComponent as RenderType_ToolbarShareComponent };\r\nfunction View_ToolbarShareComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 5, \"app-popup\", [], null, [[null, \"displayChange\"], [\"document\", \"mousedown\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"document:mousedown\" === en)) {\r\n        var pd_0 = (i1.ɵnov(_v, 1).onDocumentMouseDown($event) !== false);\r\n        ad = (pd_0 && ad);\r\n    } if ((\"displayChange\" === en)) {\r\n        var pd_1 = ((_co.popupIsDisplayed = $event) !== false);\r\n        ad = (pd_1 && ad);\r\n    } return ad; }, i2.View_PopupComponent_0, i2.RenderType_PopupComponent)), i1.ɵdid(1, 114688, null, 0, i3.PopupComponent, [i1.ElementRef], { display: [0, \"display\"] }, { displayChange: \"displayChange\" }), (_l()(), i1.ɵted(-1, 0, [\"\\n    \"])), (_l()(), i1.ɵeld(3, 0, null, 0, 1, \"app-share\", [], null, null, null, i4.View_ShareComponent_0, i4.RenderType_ShareComponent)), i1.ɵdid(4, 114688, null, 0, i5.ShareComponent, [], null, null), (_l()(), i1.ɵted(-1, 0, [\"\\n  \"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.popupIsDisplayed; _ck(_v, 1, 0, currVal_0); _ck(_v, 4, 0); }, null); }\r\nexport function View_ToolbarShareComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 12, \"div\", [[\"class\", \"toolbar-share\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 6, \"button\", [[\"class\", \"toolbar-share-button\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\r\n        var pd_0 = (_co.onButtonClick() !== false);\r\n        ad = (pd_0 && ad);\r\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(4, 0, null, null, 0, \"span\", [[\"class\", \"toolbar-share-button__icon icon-check\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(6, 0, null, null, 1, null, null, null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0438\\u043B\\u0438 \\u043F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F\"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ToolbarShareComponent_1)), i1.ɵdid(11, 16384, null, 0, i6.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.popupIsDisplayed; _ck(_v, 11, 0, currVal_0); }, null); }\r\nexport function View_ToolbarShareComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-toolbar-share\", [], null, null, null, View_ToolbarShareComponent_0, RenderType_ToolbarShareComponent)), i1.ɵdid(1, 49152, null, 0, i7.ToolbarShareComponent, [], null, null)], null, null); }\r\nvar ToolbarShareComponentNgFactory = i1.ɵccf(\"app-toolbar-share\", i7.ToolbarShareComponent, View_ToolbarShareComponent_Host_0, {}, {}, []);\r\nexport { ToolbarShareComponentNgFactory as ToolbarShareComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".toolbar-share[_ngcontent-%COMP%]{position:relative;display:inline-block}.toolbar-share-button[_ngcontent-%COMP%]{position:relative;height:60px;line-height:100%;padding:0 25px 0 55px;border:none;overflow:hidden;-webkit-box-sizing:content-box;box-sizing:content-box;vertical-align:middle;text-align:left;font-size:15px;background:#4caf50;color:#fff}.toolbar-share-button__icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:20px;margin-top:-10px;font-size:20px;color:#fff}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"toolbar-share\">\r\n  <button class=\"toolbar-share-button\" (click)=\"onButtonClick()\">\r\n    <span class=\"toolbar-share-button__icon icon-check\"></span>\r\n    <ng-container i18n>Download or share</ng-container>\r\n  </button>\r\n\r\n  <app-popup *ngIf=\"popupIsDisplayed\" [(display)]=\"popupIsDisplayed\">\r\n    <app-share></app-share>\r\n  </app-popup>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar-share/toolbar-share.component.html","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-toolbar',\r\n  templateUrl: './toolbar.component.html',\r\n  styleUrls: ['./toolbar.component.styl']\r\n})\r\nexport class ToolbarComponent {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar.component.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./toolbar.component.styl.shim.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./toolbar-share/toolbar-share.component.ngfactory\";\r\nimport * as i3 from \"./toolbar-share/toolbar-share.component\";\r\nimport * as i4 from \"./toolbar.component\";\r\nvar styles_ToolbarComponent = [i0.styles];\r\nvar RenderType_ToolbarComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_ToolbarComponent, data: {} });\r\nexport { RenderType_ToolbarComponent as RenderType_ToolbarComponent };\r\nexport function View_ToolbarComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"toolbar\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"app-toolbar-share\", [], null, null, null, i2.View_ToolbarShareComponent_0, i2.RenderType_ToolbarShareComponent)), i1.ɵdid(3, 49152, null, 0, i3.ToolbarShareComponent, [], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], null, null); }\r\nexport function View_ToolbarComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-toolbar\", [], null, null, null, View_ToolbarComponent_0, RenderType_ToolbarComponent)), i1.ɵdid(1, 49152, null, 0, i4.ToolbarComponent, [], null, null)], null, null); }\r\nvar ToolbarComponentNgFactory = i1.ɵccf(\"app-toolbar\", i4.ToolbarComponent, View_ToolbarComponent_Host_0, {}, {}, []);\r\nexport { ToolbarComponentNgFactory as ToolbarComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".toolbar[_ngcontent-%COMP%]{text-align:center}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar.component.styl.shim.ngstyle.js.pre-build-optimizer.js","<div class=\"toolbar\">\r\n  <app-toolbar-share></app-toolbar-share>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/components/toolbar/toolbar.component.html","import { Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { RecordUrl } from '../types';\r\nimport { Subscriber } from 'rxjs/Subscriber';\r\nimport { RecorderStore } from './stores/recorder.store';\r\nimport { ShareService } from './services/share.service';\r\nimport { Recorder } from './entities/recorder';\r\nimport { Player } from './entities/player';\r\nimport { ModalComponent } from '../shared/components/modal/modal.component';\r\n\r\n@Component({\r\n  selector: 'app-rec',\r\n  templateUrl: './rec.component.html',\r\n  styleUrls: ['./rec.component.styl'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class RecComponent implements OnInit, OnDestroy {\r\n  recordUrl: RecordUrl;\r\n  onRecordUrlSubscriber: Subscriber<RecordUrl>;\r\n\r\n  @ViewChild(ModalComponent) shareModal: ModalComponent;\r\n\r\n  constructor(\r\n    private recorderStore: RecorderStore,\r\n    private shareService: ShareService,\r\n    private recorder: Recorder,\r\n    private player: Player,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.onRecordUrlSubscriber = this.shareService.onRecordUrl\r\n      .subscribe(recordUrl => this.onRecordUrl(recordUrl));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onRecordUrlSubscriber.unsubscribe();\r\n  }\r\n\r\n  get playback(): boolean {\r\n    return this.player.playback;\r\n  }\r\n\r\n  get recording(): boolean {\r\n    return this.recorder.recording;\r\n  }\r\n\r\n  get noRecord(): boolean {\r\n    return this.recorderStore.recordData.length === 0;\r\n  }\r\n\r\n  get singleLayer(): boolean {\r\n    return this.recorderStore.recordData.layerIds.length === 1;\r\n  }\r\n\r\n  onRecordUrl(recordUrl: RecordUrl) {\r\n    this.recordUrl = recordUrl;\r\n    this.shareModal.openModal();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.component.ts","import { RecorderStore } from './stores/recorder.store';\r\nimport { ShareService } from './services/share.service';\r\nimport { Recorder } from './entities/recorder';\r\nimport { Player } from './entities/player';\r\nimport { ModalComponent } from '../shared/components/modal/modal.component';\r\nvar RecComponent = /** @class */ (function () {\r\n    function RecComponent(recorderStore, shareService, recorder, player) {\r\n        this.recorderStore = recorderStore;\r\n        this.shareService = shareService;\r\n        this.recorder = recorder;\r\n        this.player = player;\r\n    }\r\n    RecComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.onRecordUrlSubscriber = this.shareService.onRecordUrl\r\n            .subscribe(function (recordUrl) { return _this.onRecordUrl(recordUrl); });\r\n    };\r\n    RecComponent.prototype.ngOnDestroy = function () {\r\n        this.onRecordUrlSubscriber.unsubscribe();\r\n    };\r\n    Object.defineProperty(RecComponent.prototype, \"playback\", {\r\n        get: function () {\r\n            return this.player.playback;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecComponent.prototype, \"recording\", {\r\n        get: function () {\r\n            return this.recorder.recording;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecComponent.prototype, \"noRecord\", {\r\n        get: function () {\r\n            return this.recorderStore.recordData.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RecComponent.prototype, \"singleLayer\", {\r\n        get: function () {\r\n            return this.recorderStore.recordData.layerIds.length === 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RecComponent.prototype.onRecordUrl = function (recordUrl) {\r\n        this.recordUrl = recordUrl;\r\n        this.shareModal.openModal();\r\n    };\r\n    return RecComponent;\r\n}());\r\nexport { RecComponent };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.component.ts.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"./rec.component.styl.ngstyle\";\r\nimport * as i1 from \"@angular/core\";\r\nimport * as i2 from \"./components/share/share-link/share-link-modal/share-link-modal.component.ngfactory\";\r\nimport * as i3 from \"./components/share/share-link/share-link-modal/share-link-modal.component\";\r\nimport * as i4 from \"../shared/components/meta/meta.component.ngfactory\";\r\nimport * as i5 from \"../shared/components/meta/meta.component\";\r\nimport * as i6 from \"@angular/platform-browser\";\r\nimport * as i7 from \"./timeline/timeline.component.ngfactory\";\r\nimport * as i8 from \"./timeline/timeline.component\";\r\nimport * as i9 from \"./timeline/timeline.store\";\r\nimport * as i10 from \"./timeline/timeline-block/timeline-block.component.ngfactory\";\r\nimport * as i11 from \"./timeline/timeline-block/timeline-block.component\";\r\nimport * as i12 from \"./components/record-buttons/record-buttons.component.ngfactory\";\r\nimport * as i13 from \"./components/record-buttons/record-buttons.component\";\r\nimport * as i14 from \"./stores/recorder.store\";\r\nimport * as i15 from \"./entities/recorder\";\r\nimport * as i16 from \"./entities/player\";\r\nimport * as i17 from \"./components/timer/timer.component.ngfactory\";\r\nimport * as i18 from \"./components/timer/timer.component\";\r\nimport * as i19 from \"./components/toolbar/toolbar.component.ngfactory\";\r\nimport * as i20 from \"./components/toolbar/toolbar.component\";\r\nimport * as i21 from \"../shared/components/modal/modal.component.ngfactory\";\r\nimport * as i22 from \"../shared/components/modal/modal.component\";\r\nimport * as i23 from \"@angular/common\";\r\nimport * as i24 from \"./rec.component\";\r\nimport * as i25 from \"./services/share.service\";\r\nvar styles_RecComponent = [i0.styles];\r\nvar RenderType_RecComponent = i1.ɵcrt({ encapsulation: 2, styles: styles_RecComponent, data: {} });\r\nexport { RenderType_RecComponent as RenderType_RecComponent };\r\nfunction View_RecComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-share-link-modal\", [], null, null, null, i2.View_ShareLinkModalComponent_0, i2.RenderType_ShareLinkModalComponent)), i1.ɵdid(1, 114688, null, 0, i3.ShareLinkModalComponent, [], { recordUrl: [0, \"recordUrl\"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.recordUrl; _ck(_v, 1, 0, currVal_0); }, null); }\r\nexport function View_RecComponent_0(_l) { return i1.ɵvid(0, [i1.ɵqud(402653184, 1, { shareModal: 0 }), (_l()(), i1.ɵeld(1, 0, [[\"element\", 1]], null, 38, \"div\", [[\"class\", \"rec\"]], [[2, \"rec--single-layer\", null], [2, \"rec--recording\", null], [2, \"rec--playback\", null], [2, \"rec--no-record\", null]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"app-meta\", [[\"description\", \"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u0437\\u0432\\u0443\\u043A \\u0441 \\u043C\\u0438\\u043A\\u0440\\u043E\\u0444\\u043E\\u043D\\u0430, \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043D\\u0435\\u0443\\u0434\\u0430\\u0447\\u043D\\u044B\\u0435 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\\u044B \\u0438 \\u0441\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0435\\u0433\\u043E \\u043D\\u0430 \\u0441\\u0432\\u043E\\u0439 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0432 \\u0432\\u0438\\u0434\\u0435 MP3 \\u0430\\u0443\\u0434\\u0438\\u043E-\\u0444\\u0430\\u0439\\u043B\\u0430\"], [\"keywords\", \"\\u0434\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D, \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D \\u0434\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D, \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441\\u0430, \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0437\\u0432\\u0443\\u043A\\u0430, \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 \\u0434\\u043B\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438 \\u0437\\u0432\\u0443\\u043A\\u0430\"], [\"title\", \"\\u0414\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D, \\u0437\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441 \\u0438\\u043B\\u0438 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0437\\u0432\\u0443\\u043A\\u0430 \\u0441 \\u043C\\u0438\\u043A\\u0440\\u043E\\u0444\\u043E\\u043D\\u0430\"]], null, null, null, i4.View_MetaComponent_0, i4.RenderType_MetaComponent)), i1.ɵdid(4, 114688, null, 0, i5.MetaComponent, [i6.Title, i6.Meta], { title: [0, \"title\"], description: [1, \"description\"], keywords: [2, \"keywords\"] }, null), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(6, 0, null, null, 16, \"div\", [[\"class\", \"rec__content\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(8, 0, null, null, 13, \"div\", [[\"class\", \"container\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(10, 0, null, null, 1, \"app-timeline\", [], null, null, null, i7.View_TimelineComponent_0, i7.RenderType_TimelineComponent)), i1.ɵdid(11, 49152, null, 0, i8.TimelineComponent, [i9.TimelineStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(13, 0, null, null, 1, \"app-timeline-block\", [], null, null, null, i10.View_TimelineBlockComponent_0, i10.RenderType_TimelineBlockComponent)), i1.ɵdid(14, 4308992, null, 0, i11.TimelineBlockComponent, [], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(16, 0, null, null, 1, \"app-record-buttons\", [], null, null, null, i12.View_RecordButtonsComponent_0, i12.RenderType_RecordButtonsComponent)), i1.ɵdid(17, 114688, null, 0, i13.RecordButtonsComponent, [i9.TimelineStore, i14.RecorderStore, i15.Recorder, i16.Player], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(19, 0, null, null, 1, \"app-timer\", [], null, null, null, i17.View_TimelineTimerComponent_0, i17.RenderType_TimelineTimerComponent)), i1.ɵdid(20, 245760, null, 0, i18.TimelineTimerComponent, [i9.TimelineStore], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(24, 0, null, null, 7, \"div\", [[\"class\", \"rec__toolbar hide-on-recording hide-on-no-record\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵeld(26, 0, null, null, 4, \"div\", [[\"class\", \"container\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"\\n      \"])), (_l()(), i1.ɵeld(28, 0, null, null, 1, \"app-toolbar\", [], null, null, null, i19.View_ToolbarComponent_0, i19.RenderType_ToolbarComponent)), i1.ɵdid(29, 49152, null, 0, i20.ToolbarComponent, [], null, null), (_l()(), i1.ɵted(-1, null, [\"\\n    \"])), (_l()(), i1.ɵted(-1, null, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\\n  \"])), (_l()(), i1.ɵeld(33, 0, null, null, 5, \"app-modal\", [], null, null, null, i21.View_ModalComponent_0, i21.RenderType_ModalComponent)), i1.ɵdid(34, 114688, [[1, 4]], 0, i22.ModalComponent, [], { closeOnBackgroundClick: [0, \"closeOnBackgroundClick\"] }, null), (_l()(), i1.ɵted(-1, 0, [\"\\n    \"])), (_l()(), i1.ɵand(16777216, null, 0, 1, null, View_RecComponent_1)), i1.ɵdid(37, 16384, null, 0, i23.NgIf, [i1.ViewContainerRef, i1.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i1.ɵted(-1, 0, [\"\\n  \"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"])), (_l()(), i1.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_4 = \"\\u0414\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D, \\u0437\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441 \\u0438\\u043B\\u0438 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0437\\u0432\\u0443\\u043A\\u0430 \\u0441 \\u043C\\u0438\\u043A\\u0440\\u043E\\u0444\\u043E\\u043D\\u0430\"; var currVal_5 = \"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u0437\\u0432\\u0443\\u043A \\u0441 \\u043C\\u0438\\u043A\\u0440\\u043E\\u0444\\u043E\\u043D\\u0430, \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043D\\u0435\\u0443\\u0434\\u0430\\u0447\\u043D\\u044B\\u0435 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\\u044B \\u0438 \\u0441\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0435\\u0433\\u043E \\u043D\\u0430 \\u0441\\u0432\\u043E\\u0439 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0432 \\u0432\\u0438\\u0434\\u0435 MP3 \\u0430\\u0443\\u0434\\u0438\\u043E-\\u0444\\u0430\\u0439\\u043B\\u0430\"; var currVal_6 = \"\\u0434\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D, \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D \\u0434\\u0438\\u043A\\u0442\\u043E\\u0444\\u043E\\u043D, \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441\\u0430, \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u0437\\u0432\\u0443\\u043A\\u0430, \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 \\u0434\\u043B\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438 \\u0437\\u0432\\u0443\\u043A\\u0430\"; _ck(_v, 4, 0, currVal_4, currVal_5, currVal_6); _ck(_v, 14, 0); _ck(_v, 17, 0); _ck(_v, 20, 0); var currVal_7 = false; _ck(_v, 34, 0, currVal_7); var currVal_8 = _co.recordUrl; _ck(_v, 37, 0, currVal_8); }, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.singleLayer; var currVal_1 = _co.recording; var currVal_2 = _co.playback; var currVal_3 = _co.noRecord; _ck(_v, 1, 0, currVal_0, currVal_1, currVal_2, currVal_3); }); }\r\nexport function View_RecComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-rec\", [], null, null, null, View_RecComponent_0, RenderType_RecComponent)), i1.ɵdid(1, 245760, null, 0, i24.RecComponent, [i14.RecorderStore, i25.ShareService, i15.Recorder, i16.Player], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\r\nvar RecComponentNgFactory = i1.ɵccf(\"app-rec\", i24.RecComponent, View_RecComponent_Host_0, {}, {}, []);\r\nexport { RecComponentNgFactory as RecComponentNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.component.ngfactory.js.pre-build-optimizer.js","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nvar styles = [\".rec{position:relative;height:100%;padding:0 0 60px;-webkit-box-sizing:border-box;box-sizing:border-box}.rec__header,.rec__toolbar{position:absolute;left:0;width:100%}.rec__header{top:0;line-height:30px;padding:20px 0}.rec__toolbar{bottom:0;height:60px;background:#fff}.rec__content{height:100%;overflow:auto}.rec--no-record .hide-on-no-record,.rec--playback .hide-on-playback,.rec--recording .hide-on-recording,.rec--single-layer .hide-on-single-layer{visibility:hidden}\"];\r\nexport { styles as styles };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.component.styl.ngstyle.js.pre-build-optimizer.js","<div\r\n  class=\"rec\"\r\n  [class.rec--single-layer]=\"singleLayer\"\r\n  [class.rec--recording]=\"recording\"\r\n  [class.rec--playback]=\"playback\"\r\n  [class.rec--no-record]=\"noRecord\"\r\n  #element\r\n>\r\n  <app-meta\r\n    title=\"Voice recorder online, record sound or voice from a microphone\"\r\n    description=\"Record sound from your microphone, overwrite bad stuff and download it to your computer in the form of an audio MP3 file\"\r\n    keywords=\"dictaphone, online dictaphone, voice recorder, online voice recorder, voice recording program, recording of the sound\"\r\n    i18n-title\r\n    i18n-description\r\n    i18n-keywords\r\n  ></app-meta>\r\n\r\n  <div class=\"rec__content\">\r\n    <div class=\"container\">\r\n      <app-timeline></app-timeline>\r\n      <app-timeline-block></app-timeline-block>\r\n      <app-record-buttons></app-record-buttons>\r\n      <app-timer></app-timer>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"rec__toolbar hide-on-recording hide-on-no-record\">\r\n    <div class=\"container\">\r\n      <app-toolbar></app-toolbar>\r\n    </div>\r\n  </div>\r\n\r\n  <app-modal [closeOnBackgroundClick]=\"false\">\r\n    <app-share-link-modal [recordUrl]=\"recordUrl\" *ngIf=\"recordUrl\"></app-share-link-modal>\r\n  </app-modal>\r\n</div>\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.component.html","const AudioContext = window['AudioContext'] || window['webkitAudioContext'];\r\nlet audioContext: AudioContext;\r\n\r\nif (AudioContext) {\r\n  audioContext = new AudioContext();\r\n}\r\n\r\nexport class WebAudioFactory {\r\n\r\n  getAudioContext(): AudioContext {\r\n    return audioContext;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/factories/web-audio.factory.ts","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RecComponent } from './rec.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RecComponent,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class RecRoutingModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec-routing.module.ts","/**\r\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\r\n *\r\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\r\n * tslint:disable\r\n */ \r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./rec.module\";\r\nimport * as i2 from \"./rec.component.ngfactory\";\r\nimport * as i3 from \"@angular/forms\";\r\nimport * as i4 from \"@angular/common/http\";\r\nimport * as i5 from \"@angular/common\";\r\nimport * as i6 from \"../shared/services/document.service\";\r\nimport * as i7 from \"../shared/services/message.service\";\r\nimport * as i8 from \"../shared/services/api.service\";\r\nimport * as i9 from \"./stores/recorder.store\";\r\nimport * as i10 from \"./factories/web-audio.factory\";\r\nimport * as i11 from \"./entities/recorder\";\r\nimport * as i12 from \"./entities/player\";\r\nimport * as i13 from \"./timeline/timeline.store\";\r\nimport * as i14 from \"./timeline/timeline-canvas/timeline-canvas-process-levels.store\";\r\nimport * as i15 from \"./services/share.service\";\r\nimport * as i16 from \"@angular/router\";\r\nimport * as i17 from \"../shared/shared.module\";\r\nimport * as i18 from \"./rec-routing.module\";\r\nimport * as i19 from \"./rec.component\";\r\nvar RecModuleNgFactory = i0.ɵcmf(i1.RecModule, [], function (_l) { return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i2.RecComponentNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(4608, i3.ɵi, i3.ɵi, []), i0.ɵmpd(4608, i4.HttpXsrfTokenExtractor, i4.ɵh, [i5.DOCUMENT, i0.PLATFORM_ID, i4.ɵf]), i0.ɵmpd(4608, i4.ɵi, i4.ɵi, [i4.HttpXsrfTokenExtractor, i4.ɵg]), i0.ɵmpd(5120, i4.HTTP_INTERCEPTORS, function (p0_0) { return [p0_0]; }, [i4.ɵi]), i0.ɵmpd(4608, i4.ɵe, i4.ɵe, []), i0.ɵmpd(6144, i4.XhrFactory, null, [i4.ɵe]), i0.ɵmpd(4608, i4.HttpXhrBackend, i4.HttpXhrBackend, [i4.XhrFactory]), i0.ɵmpd(6144, i4.HttpBackend, null, [i4.HttpXhrBackend]), i0.ɵmpd(4608, i4.HttpHandler, i4.ɵc, [i4.HttpBackend, i0.Injector]), i0.ɵmpd(4608, i4.HttpClient, i4.HttpClient, [i4.HttpHandler]), i0.ɵmpd(4608, i5.NgLocalization, i5.NgLocaleLocalization, [i0.LOCALE_ID, [2, i5.ɵa]]), i0.ɵmpd(4608, i6.DocumentService, i6.DocumentService, []), i0.ɵmpd(4608, i7.MessageService, i7.MessageService, []), i0.ɵmpd(4608, i8.ApiService, i8.ApiService, [i4.HttpClient]), i0.ɵmpd(4608, i9.RecorderStore, i9.RecorderStore, [i0.NgZone]), i0.ɵmpd(4608, i10.WebAudioFactory, i10.WebAudioFactory, []), i0.ɵmpd(4608, i11.Recorder, i11.Recorder, [i9.RecorderStore, i7.MessageService, i10.WebAudioFactory]), i0.ɵmpd(4608, i12.Player, i12.Player, [i9.RecorderStore, i10.WebAudioFactory, i7.MessageService, i0.NgZone]), i0.ɵmpd(4608, i13.TimelineStore, i13.TimelineStore, [i12.Player, i9.RecorderStore]), i0.ɵmpd(4608, i14.TimelineCanvasProcessLevelsStore, i14.TimelineCanvasProcessLevelsStore, [i11.Recorder, i13.TimelineStore]), i0.ɵmpd(4608, i15.ShareService, i15.ShareService, [i4.HttpClient, i16.Router]), i0.ɵmpd(512, i3.ɵba, i3.ɵba, []), i0.ɵmpd(512, i3.FormsModule, i3.FormsModule, []), i0.ɵmpd(512, i4.HttpClientXsrfModule, i4.HttpClientXsrfModule, []), i0.ɵmpd(512, i4.HttpClientModule, i4.HttpClientModule, []), i0.ɵmpd(512, i5.CommonModule, i5.CommonModule, []), i0.ɵmpd(512, i16.RouterModule, i16.RouterModule, [[2, i16.ɵa], [2, i16.Router]]), i0.ɵmpd(512, i17.SharedModule, i17.SharedModule, []), i0.ɵmpd(512, i18.RecRoutingModule, i18.RecRoutingModule, []), i0.ɵmpd(512, i1.RecModule, i1.RecModule, []), i0.ɵmpd(256, i4.ɵf, \"XSRF-TOKEN\", []), i0.ɵmpd(256, i4.ɵg, \"X-XSRF-TOKEN\", []), i0.ɵmpd(256, i0.LOCALE_ID, \"ru\", []), i0.ɵmpd(1024, i16.ROUTES, function () { return [[{ path: \"\", component: i19.RecComponent }]]; }, []), i0.ɵmpd(256, i0.TRANSLATIONS_FORMAT, \"xlf\", [])]); });\r\nexport { RecModuleNgFactory as RecModuleNgFactory };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/rec/rec.module.ngfactory.js.pre-build-optimizer.js"],"sourceRoot":"webpack:///"}