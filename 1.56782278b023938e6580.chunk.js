webpackJsonp([1],{FWr3:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("WT6e"),o=function(){},i=e("Xjw4");function r(n,t){void 0===t&&(t="");var e=document.createElement("a");e.href=n,e.target="_blank",t&&(e.download=t),document.body.appendChild(e),e.click(),document.body.removeChild(e)}var u=function(){function n(){this.copied=!1}return n.prototype.ngOnInit=function(){},n.prototype.onInputFocus=function(){this.inputElement.nativeElement.select()},n.prototype.onCopyButtonClick=function(){var n=this;this.inputElement.nativeElement.select();try{this.copied=document.execCommand("copy")}catch(n){}setTimeout(function(){return n.copied=!1},2e3)},n.prototype.onOpenButtonClick=function(){r(this.recordUrl)},n}(),s=l._2({encapsulation:0,styles:[[".share-link-modal[_ngcontent-%COMP%]{max-width:400px;min-width:280px;padding:20px;border-radius:6px;background:#fff;color:#333;text-align:left}.share-link-modal__title[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px}.share-link-modal-link[_ngcontent-%COMP%]{position:relative;margin:20px 0}.share-link-modal-link__button[_ngcontent-%COMP%], .share-link-modal-link__input[_ngcontent-%COMP%]{line-height:18px;border:none;border-radius:3px}.share-link-modal-link__input[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 12px;-webkit-box-sizing:border-box;box-sizing:border-box;background:#f2f2f2;font-size:14px}.share-link-modal-link__buttons[_ngcontent-%COMP%]{position:absolute;top:3px;right:3px}.share-link-modal-link__button[_ngcontent-%COMP%]{padding:5px 12px;background:#3d9fea;color:#fff;font-size:14px}.share-link-modal-link__button--open[_ngcontent-%COMP%]{background:#4caf50}.share-link-modal__text[_ngcontent-%COMP%]{line-height:18px;margin:20px 0 0;font-size:12px;color:#666}"]],data:{}});function a(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l._23(-1,null,["Copy"]))],null,null)}function c(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l._23(-1,null,["Copied"]))],null,null)}function p(n){return l._25(0,[l._21(402653184,1,{inputElement:0}),(n()(),l._4(1,0,null,null,27,"div",[["class","share-link-modal"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(3,0,null,null,1,"h3",[["class","share-link-modal__title"]],null,null,null,null,null)),(n()(),l._23(-1,null,["Link to the recorded sound"])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(6,0,null,null,18,"div",[["class","share-link-modal-link"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(8,0,[[1,0],["inputElement",1]],null,0,"input",[["class","share-link-modal-link__input"],["type","text"]],[[8,"value",0]],[[null,"focus"]],function(n,t,e){var l=!0;return"focus"===t&&(l=!1!==n.component.onInputFocus()&&l),l},null,null)),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(10,0,null,null,13,"div",[["class","share-link-modal-link__buttons"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(12,0,null,null,7,"button",[["class","share-link-modal-link__button share-link-modal-link__button--copy"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onCopyButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n        "])),(n()(),l.Z(16777216,null,null,1,null,a)),l._3(15,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n        "])),(n()(),l.Z(16777216,null,null,1,null,c)),l._3(18,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n      "])),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(21,0,null,null,1,"button",[["class","share-link-modal-link__button share-link-modal-link__button--open"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onOpenButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["Open"])),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(26,0,null,null,1,"div",[["class","share-link-modal__text"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    The recording will be stored 2 weeks from the date of last access to it. The total storage time is unlimited.\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,15,0,!1===e.copied),n(t,18,0,!0===e.copied)},function(n,t){n(t,8,0,t.component.recordUrl)})}var d,h,f=e("33hi"),_=e("9vnO"),m=e("OE0E"),g=function(){function n(n,t){this.recorderStore=n,this.timelineStore=t}return n.prototype.onButtonClick=function(){this.addLayer()},n.prototype.addLayer=function(){var n=this;this.recorderStore.addLayer().then(function(){return n.timelineStore.selectLastLayer()})},n}(),b=function(){function n(){var n=this;this.state="pending",this.promise=new Promise(function(t,e){n._promiseResolve=t,n._promiseReject=e}),this.promise.then(function(){return n.state="fulfilled"},function(){return n.state="rejected"})}return n.prototype.resolve=function(n){if(!this.isPending())throw new Error("Deferred cannot be resolved twice");this._promiseResolve(n)},n.prototype.reject=function(n){if(!this.isPending())throw new Error("Deferred cannot be resolved twice");this._promiseReject(n)},n.prototype.isResolved=function(){return"pending"!==this.state},n.prototype.isPending=function(){return"pending"===this.state},n.prototype.isFulfilled=function(){return"fulfilled"===this.state},n.prototype.isRejected=function(){return"rejected"===this.state},n}(),y=e("2z0p");!function(n){n[n.ADD_RECORDING_PROGRESS=0]="ADD_RECORDING_PROGRESS",n[n.ADD_LAYER=1]="ADD_LAYER",n[n.REMOVE_LAYER=2]="REMOVE_LAYER",n[n.GET_LEVELS=3]="GET_LEVELS",n[n.START_RECORDING=4]="START_RECORDING",n[n.STOP_RECORDING=5]="STOP_RECORDING",n[n.GET_RECORD_DATA=6]="GET_RECORD_DATA",n[n.GET_COMPILED_RECORD=7]="GET_COMPILED_RECORD",n[n.SET_LAYER_VOLUME=8]="SET_LAYER_VOLUME",n[n.GET_RECORD_LENGTH=9]="GET_RECORD_LENGTH",n[n.UNDO=10]="UNDO",n[n.REDO=11]="REDO",n[n.ON_LAYER_CHANGE=12]="ON_LAYER_CHANGE",n[n.ON_RECORD_CHANGE=13]="ON_RECORD_CHANGE",n[n.ON_HISTORY_CHANGE=14]="ON_HISTORY_CHANGE"}(d||(d={}));var v,P=function(){function n(n){var t=this;if(this.worker=new Worker("assets/worker.js"),this.queue=[],this.recordData={length:0,layerIds:[y.a]},this.historyData={appliedTransactionsNumber:0,rollbackTransactionsNumber:0},this.onRecordChange=new l.m,this.onLayerChange=new l.m,this.onSampleFinish=new l.m,this.onHistoryChange=new l.m,h)return h;h=this,this.worker.addEventListener("message",function(e){return n.run(function(){t.onMessage(e)})}),this.onRecordChange.subscribe(function(n){return t.recordData=n}),this.onHistoryChange.subscribe(function(n){return t.historyData=n})}return Object.defineProperty(n.prototype,"lastLayerId",{get:function(){var n=this.recordData.layerIds;return n[n.length-1]},enumerable:!0,configurable:!0}),n.prototype.undo=function(){return this.postMessage(d.UNDO)},n.prototype.redo=function(){return this.postMessage(d.REDO)},n.prototype.getLevels=function(n){return this.postPromiseMessage(d.GET_LEVELS,n)},n.prototype.getRecordLength=function(){return this.postPromiseMessage(d.GET_RECORD_LENGTH)},n.prototype.addRecordingProgress=function(n){return this.postPromiseMessage(d.ADD_RECORDING_PROGRESS,n)},n.prototype.startRecording=function(n){this.postMessage(d.START_RECORDING,n)},n.prototype.addLayer=function(){return this.postPromiseMessage(d.ADD_LAYER)},n.prototype.removeLayer=function(n){return this.postPromiseMessage(d.REMOVE_LAYER,n)},n.prototype.stopRecording=function(){return this.postPromiseEventMessage(d.STOP_RECORDING,"onSampleFinish")},n.prototype.postPromiseEventMessage=function(n,t,e){var l=this,o=this.postPromiseMessage(n,e);return o.then(function(n){return l[t].emit(n)}),o},n.prototype.getRecordData=function(n){return this.postPromiseMessage(d.GET_RECORD_DATA,n)},n.prototype.getCompiledRecord=function(){return this.postPromiseMessage(d.GET_COMPILED_RECORD)},n.prototype.setLayerVolume=function(n){this.postMessage(d.SET_LAYER_VOLUME,n)},n.prototype.postPromiseMessage=function(n,t){var e=new b;return this.queue.push(e),this.postMessage(n,t),e.promise},n.prototype.postMessage=function(n,t){this.worker.postMessage({type:n,payload:t})},n.prototype.onMessage=function(n){if(n.data){var t=n.data;switch(t.type){case d.ON_RECORD_CHANGE:this.onRecordChange.emit(t.payload);break;case d.ON_LAYER_CHANGE:this.onLayerChange.emit(t.payload);break;case d.ON_HISTORY_CHANGE:this.onHistoryChange.emit(t.payload);break;default:this.queue.shift().resolve(t.payload)}}},n}(),k=function(){function n(n,t){var e=this;if(this.player=n,this.recorderStore=t,this._currentPosition=0,this._zoom=y.q,this._width=y.p,this.currentPositionChange=new l.m,this.zoomChange=new l.m,this.widthChange=new l.m,this.change=new l.m,this.selectedLayerId=y.a,v)return v;v=this,t.onSampleFinish.subscribe(function(n){return e.currentPosition=n.endPosition}),t.onRecordChange.subscribe(function(n){return e.onRecordChange(n)}),n.onPlaybackStart.subscribe(function(n){return e.onPlaybackStart(n)}),n.onPlaybackStop.subscribe(function(){return e.onPlaybackStop()}),n.onPlaybackFinish.subscribe(function(n){return e.onPlaybackFinish(n)})}return n.prototype.onRecordChange=function(n){-1===n.layerIds.indexOf(this.selectedLayerId)&&this.selectLastLayer()},n.prototype.selectLastLayer=function(){this.selectedLayerId=this.recorderStore.lastLayerId},n.prototype.onPlaybackStart=function(n){this.currentPosition=n.startPosition,this.playbackPreviousTime=Date.now(),this.requestPlaybackAnimationFrame()},n.prototype.playbackAnimate=function(){var n=Date.now();this.currentPosition+=n-this.playbackPreviousTime,this.playbackPreviousTime=n,this.requestPlaybackAnimationFrame()},n.prototype.requestPlaybackAnimationFrame=function(){var n=this;this.playbackRequestAnimationFrameId=requestAnimationFrame(function(){return n.playbackAnimate()})},n.prototype.cancelPlaybackAnimationFrame=function(){cancelAnimationFrame(this.playbackRequestAnimationFrameId)},n.prototype.onPlaybackStop=function(){this.cancelPlaybackAnimationFrame()},n.prototype.onPlaybackFinish=function(n){this.cancelPlaybackAnimationFrame(),this.currentPosition=n.endPosition},n.prototype.isMaxZoom=function(){return this._zoom===y.r},n.prototype.isMinZoom=function(){return this._zoom===y.s},Object.defineProperty(n.prototype,"step",{get:function(){return this.convertPixelsToMilliseconds(y.l)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPosition",{get:function(){return this._currentPosition},set:function(n){n=n<0?0:Math.round(n),this._currentPosition!==n&&(this._currentPosition=n,this.currentPositionChange.emit(n),this.change.emit())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recordingConfig",{get:function(){return{layerId:this.selectedLayerId,position:this.currentPosition,step:this.step}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},set:function(n){n>y.r?n=y.r:n<y.s&&(n=y.s),this._zoom=n,this.zoomChange.emit(n),this.change.emit()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n,this.widthChange.emit(n),this.change.emit()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPositionInPixels",{get:function(){return this.convertMillisecondsToPixels(this.currentPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startVisiblePosition",{get:function(){return this.currentPosition-this.halfWidthInMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startVisiblePositionInPixels",{get:function(){return this.convertMillisecondsToPixels(this.startVisiblePosition)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endVisiblePosition",{get:function(){return this.currentPosition+this.halfWidthInMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"widthInMilliseconds",{get:function(){return this.convertPixelsToMilliseconds(this.width)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"halfWidthInMilliseconds",{get:function(){return this.convertPixelsToMilliseconds(this.halfWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0}),n.prototype.convertPixelsToMilliseconds=function(n){return n/this.zoom},n.prototype.convertMillisecondsToPixels=function(n){return Math.round(n*this.zoom)},n}(),C=l._2({encapsulation:0,styles:[[".timeline-layer-add[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:36px;padding:0 12px 0 42px;margin:0 auto;border:none;border-radius:3px;background:rgba(0,0,0,.2);color:#fff;font-size:14px}.timeline-layer-add[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.25)}.timeline-layer-add[_ngcontent-%COMP%]:active{background-color:rgba(0,0,0,.3)}.timeline-layer-add__icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;margin-top:-12px;font-size:24px}"]],data:{}});function x(n){return l._25(0,[(n()(),l._4(0,0,null,null,6,"button",[["class","timeline-layer-add hide-on-recording hide-on-playback"],["title","Add a new layer"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,0,"span",[["class","timeline-layer-add__icon icon-add-box"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(4,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l._23(-1,null,["Add a new layer"])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}function S(n,t){return Math.floor(n/t)*t}function O(n,t){return Math.round(n/t)*t}var M,D,w=function(){function n(n,t,e,l){this.timelineStore=n,this.recorderStore=t,this.recorder=e,this.player=l,this.inButtonIsDisabled=!1,this.outButtonIsDisabled=!1}return n.prototype.ngOnInit=function(){var n=this;this.zoomChangeSubscriber=this.timelineStore.zoomChange.subscribe(function(){return n.onZoomChange()})},n.prototype.ngOnDestroy=function(){this.zoomChangeSubscriber.unsubscribe()},n.prototype.onZoomChange=function(){this.updateButtonStates()},n.prototype.updateButtonStates=function(){this.outButtonIsDisabled=this.timelineStore.isMinZoom(),this.inButtonIsDisabled=this.timelineStore.isMaxZoom()},n.prototype.onZoomOutButtonClick=function(){this.timelineStore.zoom/=2},n.prototype.onZoomInButtonClick=function(){this.timelineStore.zoom*=2},Object.defineProperty(n.prototype,"startButtonIsDisabled",{get:function(){return this.recorder.recording||this.player.playback||0===this.timelineStore.currentPosition},enumerable:!0,configurable:!0}),n.prototype.onStartButtonClick=function(){this.timelineStore.currentPosition=0},Object.defineProperty(n.prototype,"endButtonIsDisabled",{get:function(){return this.recorder.recording||this.player.playback||0===this.recorderStore.recordData.length||this.timelineStore.currentPosition===this.recorderStore.recordData.length},enumerable:!0,configurable:!0}),n.prototype.onEndButtonClick=function(){this.timelineStore.currentPosition=this.recorderStore.recordData.length},Object.defineProperty(n.prototype,"backwardButtonIsDisabled",{get:function(){return 0===this.timelineStore.currentPosition},enumerable:!0,configurable:!0}),n.prototype.onBackwardButtonClick=function(){var n=this.timelineStore.convertPixelsToMilliseconds(y.t),t=this.timelineStore.currentPosition,e=O(this.timelineStore.currentPosition,n);this.timelineStore.currentPosition=t>e?e:e-n},n.prototype.onForwardButtonClick=function(){var n=this.timelineStore.convertPixelsToMilliseconds(y.t),t=this.timelineStore.currentPosition,e=O(this.timelineStore.currentPosition,n);this.timelineStore.currentPosition=t<e?e:e+n},n}(),I=function(){function n(n,t,e){if(this.recorderStore=n,this.messageService=t,this.webAudioFactory=e,this.scriptProcessorBufferSize=y.h,this.recording=!1,this.recordingChange=new l.m,this.onProgress=new l.m,M)return M;M=this,this.onAudioProcess=this.onAudioProcess.bind(this)}return n.prototype.setRecording=function(n){this.recording=n,this.recordingChange.emit(n)},n.prototype.stopRecording=function(){this.stopCollectAudioData()},n.prototype.startRecording=function(n){var t=this;this.config=n,this.hasInfrastructureToBePrepared()?this.prepareInfrastructure().then(function(){return t.preStartCollectAudioData()},function(n){return t.messageService.showError(n)}):this.preStartCollectAudioData()},n.prototype.hasInfrastructureToBePrepared=function(){return void 0===this.mediaStreamAudioSource},n.prototype.prepareInfrastructure=function(){var n=this;return this.requestStream().then(function(){return n.createContext()}).then(function(){return n.createScriptProcessor()}).then(function(){return n.createMediaStreamAudioSource()})},n.prototype.createContext=function(){return this.audioContext=this.webAudioFactory.getAudioContext(),this.audioContext?Promise.resolve():Promise.reject(this.messageService.browserError)},n.prototype.createScriptProcessor=function(){return this.audioContext.createScriptProcessor?(this.scriptProcessor=this.audioContext.createScriptProcessor(this.scriptProcessorBufferSize,1,1),Promise.resolve()):Promise.reject(this.messageService.browserError)},n.prototype.createMediaStreamAudioSource=function(){return this.mediaStreamAudioSource=this.audioContext.createMediaStreamSource(this.mediaStream),Promise.resolve()},n.prototype.requestStream=function(){var n=this;if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!navigator.getUserMedia)return Promise.reject(this.messageService.browserError);var t=new b;return navigator.getUserMedia({audio:!0},function(e){return t.resolve(n.mediaStream=e)},function(e){return t.reject(n.processRequestStreamError(e))}),t.promise},n.prototype.processRequestStreamError=function(n){return n},n.prototype.preStartCollectAudioData=function(){var n=this;"suspended"===this.audioContext.state?this.audioContext.resume().then(function(){return n.startCollectAudioData()}):this.startCollectAudioData()},n.prototype.startCollectAudioData=function(){this.mediaStreamAudioSource.connect(this.scriptProcessor),this.scriptProcessor.connect(this.audioContext.destination),this.scriptProcessor.addEventListener("audioprocess",this.onAudioProcess),this.recorderStore.startRecording(this.config),this.setRecording(!0)},n.prototype.stopCollectAudioData=function(){this.mediaStreamAudioSource.disconnect(this.scriptProcessor),this.scriptProcessor.disconnect(this.audioContext.destination),this.scriptProcessor.removeEventListener("audioprocess",this.onAudioProcess),this.recorderStore.stopRecording(),this.setRecording(!1)},n.prototype.onAudioProcess=function(n){var t=this;this.recorderStore.addRecordingProgress(n.inputBuffer.getChannelData(0)).then(function(n){return t.onProgress.emit(n)})},n}(),R=function(){function n(n,t,e,o){if(this.recorderStore=n,this.webAudioFactory=t,this.messageService=e,this.zone=o,this.playback=!1,this.onPlaybackStart=new l.m,this.onPlaybackStop=new l.m,this.onPlaybackFinish=new l.m,this.onPlaybackEnd=new l.m,D)return D;D=this}return n.prototype.play=function(n){var t=this;this.playbackConfig=n,this.getRecordData().then(function(){return t.playRecordData()})},n.prototype.getRecordData=function(){var n=this;return this.recorderStore.getRecordData(this.playbackConfig.startPosition).then(function(t){return n.recordData=t})},n.prototype.playRecordData=function(){var n=this;if(0!=this.recordData instanceof Float32Array&&0!==this.recordData.length){if(void 0===this.audioContext&&(this.audioContext=this.webAudioFactory.getAudioContext()),void 0===this.audioContext)return this.messageService.showBrowserError();var t=this.audioContext.createBuffer(1,this.recordData.length,44100);t.copyToChannel(this.recordData,0),this.bufferSource=this.audioContext.createBufferSource(),this.bufferSource.onended=function(){return n.zone.run(function(){return n.finish()})},this.bufferSource.buffer=t,this.bufferSource.connect(this.audioContext.destination),this.bufferSource.start(),this.playback=!0,this.onPlaybackStart.emit(this.playbackConfig)}},n.prototype.stop=function(){this.bufferSource.onended=null,this.bufferSource.stop(),this.playback=!1,this.onPlaybackStop.emit(),this.onPlaybackEnd.emit()},n.prototype.finish=function(){this.playback=!1,this.onPlaybackFinish.emit(this.playbackConfig),this.onPlaybackEnd.emit(),this.playbackConfig.repeat?this.playRecordData():this.clearData()},n.prototype.clearData=function(){delete this.recordData},n}(),E=l._2({encapsulation:0,styles:[[".timeline-buttons[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}.timeline-buttons__group[_ngcontent-%COMP%]{margin-left:6px;float:left;opacity:.95}.timeline-buttons__group[_ngcontent-%COMP%]:hover{opacity:1}.timeline-buttons__button[_ngcontent-%COMP%]{display:block;width:32px;height:26px;padding:0;border:none;float:left;font-size:12px;font-family:Verdana;background:center center no-repeat #fff;color:#333;cursor:pointer}.timeline-buttons__button[_ngcontent-%COMP%] + .timeline-buttons__button[_ngcontent-%COMP%]{margin-left:1px}.timeline-buttons__button[_ngcontent-%COMP%]:first-child{border-top-left-radius:3px;border-bottom-left-radius:3px}.timeline-buttons__button[_ngcontent-%COMP%]:last-child{border-top-right-radius:3px;border-bottom-right-radius:3px}.timeline-buttons__button[_ngcontent-%COMP%]:focus, .timeline-buttons__button[_ngcontent-%COMP%]:hover{color:#000}.timeline-buttons__button[_ngcontent-%COMP%]:active{opacity:.95}.timeline-buttons__button[_ngcontent-%COMP%]:disabled{opacity:.5}"]],data:{}});function L(n){return l._25(0,[(n()(),l._4(0,0,null,null,37,"div",[["class","timeline-buttons hide-on-recording hide-on-playback"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,21,"div",[["class","timeline-buttons__group"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(4,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Go to the beginning of the record"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onStartButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(6,0,null,null,0,"span",[["class","icon-start"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(9,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Move back a bit"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onBackwardButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(11,0,null,null,0,"span",[["class","icon-backward"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(14,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Move a little forward"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onForwardButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(16,0,null,null,0,"span",[["class","icon-forward"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(19,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Go to the end of the record"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onEndButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(21,0,null,null,0,"span",[["class","icon-end"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(25,0,null,null,11,"div",[["class","timeline-buttons__group"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(27,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Zoom out"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onZoomOutButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(29,0,null,null,0,"span",[["class","icon-zoom-out"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(32,0,null,null,3,"button",[["class","timeline-buttons__button"],["title","Zoom in"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onZoomInButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(34,0,null,null,0,"span",[["class","icon-zoom-in"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,function(n,t){var e=t.component;n(t,4,0,e.startButtonIsDisabled),n(t,9,0,e.backwardButtonIsDisabled),n(t,19,0,e.endButtonIsDisabled),n(t,27,0,e.outButtonIsDisabled),n(t,32,0,e.inButtonIsDisabled)})}var z=e("EF1m"),T=function(){function n(n){this.timelineStore=n,this.positionInPixels=0}return n.prototype.ngOnInit=function(){var n=this;this.updatePositionInPixels(),this.zoomChangeSubscriber=this.timelineStore.zoomChange.subscribe(function(){return n.updatePositionInPixels()})},n.prototype.ngOnDestroy=function(){this.zoomChangeSubscriber.unsubscribe()},n.prototype.updatePositionInPixels=function(){this.positionInPixels=this.getPositionInPixels()},n.prototype.getPositionInPixels=function(){return this.timelineStore.convertMillisecondsToPixels(this.position)},n}(),A=l._2({encapsulation:0,styles:[[".timeline-scale-tick[_ngcontent-%COMP%]{position:absolute;bottom:0;display:block;height:14px;line-height:12px;padding-left:4px;margin-left:-1px;border-left:1px solid #86bce3}"]],data:{}});function B(n){return l._25(0,[l._17(0,z.a,[]),(n()(),l._4(1,0,null,null,2,"div",[["class","timeline-scale-tick"]],[[4,"left","px"]],null,null,null,null)),(n()(),l._23(2,null,["",""])),l._19(3,1),(n()(),l._23(-1,null,["\n"]))],null,function(n,t){var e=t.component;n(t,1,0,e.positionInPixels),n(t,2,0,l._24(t,2,0,n(t,3,0,l._15(t,0),e.position)))})}var H=function(){function n(n){this.timelineStore=n}return n.prototype.ngOnInit=function(){var n=this;this.updatePosition(),this.changeSubscriber=this.timelineStore.change.subscribe(function(){return n.updatePosition()})},n.prototype.ngOnDestroy=function(){this.changeSubscriber.unsubscribe()},n.prototype.updatePosition=function(){this.element.nativeElement.style.left=this.getPosition()+"px"},n.prototype.getPosition=function(){return this.timelineStore.halfWidth-this.timelineStore.currentPositionInPixels},n}(),N=l._2({encapsulation:0,styles:[[".timeline-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%}"]],data:{}});function j(n){return l._25(0,[l._21(402653184,1,{element:0}),(n()(),l._4(1,0,[[1,0],["element",1]],null,3,"div",[["class","timeline-slider"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),l._14(null,0),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}function F(n,t,e){for(var l=[],o=n<0?0:n;o<=t;)l.push(o),o+=e;return l}var U=function(){function n(n){this.timelineStore=n,this.tickPositions=[]}return n.prototype.ngOnInit=function(){var n=this;this.updateTickPositions(),this.timelineChangeSubscriber=this.timelineStore.change.subscribe(function(){return n.updateTickPositions()})},n.prototype.ngOnDestroy=function(){this.timelineChangeSubscriber.unsubscribe()},n.prototype.updateTickPositions=function(){this.tickPositions=this.getTickPositions()},n.prototype.getTickPositions=function(){var n=this.timelineStore.convertPixelsToMilliseconds(y.t),t=S(this.timelineStore.startVisiblePosition,n),e=S(this.timelineStore.endVisiblePosition,n);return this.shouldPositionsUpdate(t,e,n)?(this.previousStep=n,this.previousStartValue=t,this.previousEndValue=e,F(t,e,n)):this.tickPositions},n.prototype.shouldPositionsUpdate=function(n,t,e){return n!==this.previousStartValue||t!==this.previousEndValue||e!==this.previousStep},n}(),G=l._2({encapsulation:0,styles:[[".timeline-scale[_ngcontent-%COMP%]{position:relative;width:100%;height:20px;margin-bottom:6px;background:#3d9fea;border-radius:2px;font-size:10px;color:#fff;overflow:hidden}"]],data:{}});function V(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"app-timeline-scale-tick",[],null,null,null,B,A)),l._3(1,245760,null,0,T,[k],{position:[0,"position"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function Z(n){return l._25(0,[(n()(),l._4(0,0,null,null,8,"div",[["class","timeline-scale"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,5,"app-timeline-slider",[],null,null,null,j,N)),l._3(3,245760,null,0,H,[k],null,null),(n()(),l._23(-1,0,["\n    "])),(n()(),l.Z(16777216,null,0,1,null,V)),l._3(6,802816,null,0,i.h,[l.N,l.K,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l._23(-1,0,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,3,0),n(t,6,0,e.tickPositions)},null)}var q,X=function(){function n(n,t,e,l){this.timelineStore=n,this.timelineLayerComponent=t,this.recorderStore=e,this.timelineCanvasProcessLevelsStore=l,this.width=y.o,this.height=y.i,this.positionInPixels=0}return n.prototype.ngOnInit=function(){var n=this;this.update(),this.zoomChangeSubscriber=this.timelineStore.zoomChange.subscribe(function(t){return n.update()}),this.onLayerChangeSubscriber=this.recorderStore.onLayerChange.subscribe(function(t){return n.onLayerChange(t)}),this.renderLevelSubscriber=this.timelineCanvasProcessLevelsStore.renderLevel.subscribe(function(t){return n.onRenderLevel(t)})},n.prototype.ngAfterViewInit=function(){this.initCanvasContext()},n.prototype.ngOnDestroy=function(){this.zoomChangeSubscriber.unsubscribe(),this.renderLevelSubscriber.unsubscribe()},n.prototype.onLayerChange=function(n){this.timelineLayerComponent.layerId===n.layerId&&this.requestLevels()},n.prototype.initCanvasContext=function(){this.canvasContext=this.canvasElement.nativeElement.getContext("2d")},n.prototype.requestLevels=function(){var n=this;this.recorderStore.getLevels(this.createRecorderWorkerLevelsRequest()).then(function(t){return n.renderLevels(t)})},n.prototype.createRecorderWorkerLevelsRequest=function(){return{layerId:this.timelineLayerComponent.layerId,startPosition:this.position,length:this.timelineStore.convertPixelsToMilliseconds(y.o),step:this.timelineStore.convertPixelsToMilliseconds(y.l)}},n.prototype.renderLevels=function(n){var t=this.canvasContext,e=y.l;t.clearRect(0,0,y.o,y.i),t.beginPath(),t.lineWidth=y.m,t.strokeStyle=y.j,n.forEach(function(n,l){var o=l*e+1,i=y.k*n,r=(y.i-i)/2;t.moveTo(o,r),t.lineTo(o,r+i)}),t.stroke(),t.closePath()},n.prototype.onRenderLevel=function(n){n.layerId===this.timelineLayerComponent.layerId&&this.isIncludedPosition(n.startPosition)&&this.renderRecordedLevel(n)},n.prototype.isIncludedPosition=function(n){return n>=this.position&&n<=this.endPosition},n.prototype.renderRecordedLevel=function(n){var t=this.canvasContext,e=this.timelineStore.convertMillisecondsToPixels(n.startPosition-this.position),l=y.k*n.level,o=(y.i-l)/2;t.beginPath(),t.lineWidth=y.m,t.strokeStyle=y.n,t.moveTo(e,o),t.lineTo(e,o+l),t.stroke(),t.closePath()},n.prototype.update=function(){this.requestLevels(),this.updatePositions()},n.prototype.updatePositions=function(){this.positionInPixels=this.timelineStore.convertMillisecondsToPixels(this.position),this.endPosition=this.position+this.timelineStore.convertPixelsToMilliseconds(this.width)},n}(),K=function(){function n(n,t,e){this.timelineStore=n,this.recorder=t,this.player=e}return n.prototype.onHorizontalDragStart=function(n){this.dragEventHasHappened=!1},n.prototype.onHorizontalDrag=function(n){this.dragEventHasHappened=!0,!1===this.recorder.recording&&!1===this.player.playback&&(this.timelineStore.currentPosition-=this.timelineStore.convertPixelsToMilliseconds(n.deltaX))},n.prototype.onHorizontalDragEnd=function(n){!1===this.dragEventHasHappened&&(this.timelineStore.selectedLayerId=this.layerId)},n}(),W=function(){function n(n,t){var e=this;if(this.recorder=n,this.timelineStore=t,this.levels=[],this.renderLevel=new l.m,this.shouldTimelineMove=!1,q)return q;q=this,n.onProgress.subscribe(function(n){return e.onRecordingProgress(n)}),n.recordingChange.subscribe(function(n){return e.onRecordingChange(n)})}return n.prototype.onRecordingChange=function(n){n?(this.previousTime=Date.now(),this.shouldTimelineMove=!1,this.requestAnimationFrame()):(this.stopAnimation(),this.shouldTimelineMove=!1)},n.prototype.requestAnimationFrame=function(){var n=this;this.requestAnimationFrameId=requestAnimationFrame(function(){return n.animate()})},n.prototype.stopAnimation=function(){cancelAnimationFrame(this.requestAnimationFrameId)},n.prototype.animate=function(){this.shouldTimelineMove&&this.moveTimeline(),this.renderLevels(),this.requestAnimationFrame()},n.prototype.moveTimeline=function(){var n=this.levels[this.levels.length-1],t=Date.now();n?this.timelineStore.currentPosition=n.endPosition:this.timelineStore.currentPosition+=t-this.previousTime,this.previousTime=t},n.prototype.renderLevels=function(){for(var n;n=this.levels.pop();)this.renderLevel.emit(n)},n.prototype.onRecordingProgress=function(n){var t=this;this.shouldTimelineMove=!0,n&&n.forEach&&n.forEach(function(n){return t.levels.push(n)})},n}(),Y=l._2({encapsulation:0,styles:[[".timeline-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]],data:{}});function $(n){return l._25(0,[l._21(402653184,1,{canvasElement:0}),(n()(),l._4(1,0,[[1,0],["canvas",1]],null,0,"canvas",[["class","timeline-canvas"]],[[1,"width",0],[1,"height",0],[4,"left","px"]],null,null,null,null)),(n()(),l._23(-1,null,["\n"]))],null,function(n,t){var e=t.component;n(t,1,0,e.width,e.height,e.positionInPixels)})}var J=function(){function n(n){this.documentService=n,this.onHorizontalDragStart=new l.m,this.onHorizontalDrag=new l.m,this.onHorizontalDragEnd=new l.m,this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.endDrag=this.endDrag.bind(this)}return n.prototype.ngOnDestroy=function(){this.removeDocumentListeners()},n.prototype.onMouseDown=function(n){this.startDrag(n,n.clientX)},n.prototype.onTouchStart=function(n){this.startDrag(n,n.changedTouches[0].clientX)},n.prototype.startDrag=function(n,t){n.stopPropagation(),this.clientX=t,this.addDocumentListeners(),this.documentService.addDocumentNoUserSelectClass(),this.onHorizontalDragStart.emit({clientX:t,event:n})},n.prototype.addDocumentListeners=function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("mouseup",this.endDrag),document.addEventListener("touchend",this.endDrag)},n.prototype.onMouseMove=function(n){this.drag(n,n.clientX)},n.prototype.onTouchMove=function(n){this.drag(n,n.changedTouches[0].clientX)},n.prototype.drag=function(n,t){var e=t-this.clientX;e&&(this.onHorizontalDrag.emit({clientX:t,deltaX:e,event:n}),this.clientX=t)},n.prototype.endDrag=function(n){this.removeDocumentListeners(),this.documentService.removeDocumentNoUserSelectClass(),this.onHorizontalDragEnd.emit({event:n})},n.prototype.removeDocumentListeners=function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("mouseup",this.endDrag),document.removeEventListener("touchend",this.endDrag)},n}(),Q=e("+6CI"),nn=function(){function n(n){this.timelineStore=n}return n.prototype.ngOnInit=function(){},Object.defineProperty(n.prototype,"selected",{get:function(){return this.timelineStore.selectedLayerId===this.layerId},enumerable:!0,configurable:!0}),n.prototype.onClick=function(){this.timelineStore.selectedLayerId=this.layerId},n}(),tn=l._2({encapsulation:0,styles:[[".timeline-layer-select[_ngcontent-%COMP%]{display:block;height:20px;line-height:20px;padding:0 8px;margin-right:4px;border:none;float:left;border-radius:2px;font-size:10px;text-transform:uppercase;background:#77bcf0;color:#fff;cursor:pointer}.timeline-layer-select--active[_ngcontent-%COMP%]{background:#3d9fea}"]],data:{}});function en(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l._23(-1,null,["Selected"]))],null,null)}function ln(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l._23(-1,null,["Select"]))],null,null)}function on(n){return l._25(0,[(n()(),l._4(0,0,null,null,7,"button",[["class","timeline-layer-select"],["title","Select the layer"]],[[2,"timeline-layer-select--active",null]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l.Z(16777216,null,null,1,null,en)),l._3(3,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n  "])),(n()(),l.Z(16777216,null,null,1,null,ln)),l._3(6,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,3,0,e.selected),n(t,6,0,!1===e.selected)},function(n,t){n(t,0,0,t.component.selected)})}var rn=function(){function n(n){this.recorderStore=n,this.volumeChangeStep=.1,this.volume=1}return n.prototype.ngOnInit=function(){this.volumeBeforeMute=this.volume},Object.defineProperty(n.prototype,"sliderHandlePosition",{get:function(){return 100*this.volume},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"volumeIsHigh",{get:function(){return 1===this.volume},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"volumeIsMedium",{get:function(){return this.volume<1&&this.volume>=.5},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"volumeIsLow",{get:function(){return this.volume>0&&this.volume<.5},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"volumeIsMuted",{get:function(){return 0===this.volume},enumerable:!0,configurable:!0}),n.prototype.onWheel=function(n){n.preventDefault(),n.deltaY>0?this.decreaseVolume():this.increaseVolume()},n.prototype.onHorizontalDragStart=function(n){this.moveToClientX(n.clientX)},n.prototype.onHorizontalDrag=function(n){this.moveToClientX(n.clientX)},n.prototype.moveToClientX=function(n){var t=this.trackElement.nativeElement,e=parseInt(getComputedStyle(t).paddingLeft.replace("px",""),10),l=t.getBoundingClientRect(),o=l.left+e,i=l.width;this.setVolume(n<o?0:n>o+i?1:(n-o)/i)},n.prototype.onIconClick=function(){this.muteOrUnmute()},n.prototype.muteOrUnmute=function(){this.volume?this.mute():this.unmute()},n.prototype.mute=function(){this.volumeBeforeMute=this.volume,this.setVolume(0)},n.prototype.unmute=function(){this.setVolume(this.volumeBeforeMute?this.volumeBeforeMute:1)},n.prototype.onKeyDown=function(n){switch(n.keyCode){case y.e:case y.d:n.preventDefault(),this.increaseVolume();break;case y.b:case y.c:n.preventDefault(),this.decreaseVolume();break;case y.f:n.preventDefault(),this.muteOrUnmute()}},n.prototype.increaseVolume=function(){var n=this.volume+this.volumeChangeStep;this.setVolume(n>1?1:n)},n.prototype.decreaseVolume=function(){var n=this.volume-this.volumeChangeStep;this.setVolume(n<0?0:n)},n.prototype.setVolume=function(n){var t=this.layerId;n=O(n,.01),this.volume=n,this.recorderStore.setLayerVolume({layerId:t,volume:n})},n}(),un=l._2({encapsulation:0,styles:[[".timeline-layer-volume[_ngcontent-%COMP%]{position:relative;display:block;padding:0;border:none;float:left;background:#b06ab3;border-radius:2px;cursor:pointer}.timeline-layer-volume__icon[_ngcontent-%COMP%]{display:block;width:25px;height:20px;line-height:22px;float:left;text-align:center;font-size:12px;color:#fff}.timeline-layer-volume-slider[_ngcontent-%COMP%]{position:relative;display:none;width:60px;height:4px;padding:8px 10px 8px 5px;-webkit-box-sizing:content-box;box-sizing:content-box;float:left;border:none;background:0 0;cursor:pointer}.timeline-layer-volume[_ngcontent-%COMP%]:focus   .timeline-layer-volume-slider[_ngcontent-%COMP%], .timeline-layer-volume[_ngcontent-%COMP%]:hover   .timeline-layer-volume-slider[_ngcontent-%COMP%]{display:block}.timeline-layer-volume-slider-track[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:4px;border-radius:2px;background:#fff}.timeline-layer-volume-slider-track__handle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:block;width:12px;height:12px;padding:0;margin:-6px 0 0 -6px;border-radius:50%;background:#fff}"]],data:{}});function sn(n){return l._25(0,[(n()(),l._4(0,0,null,null,0,"span",[["class","icon-volume-high"]],null,null,null,null,null))],null,null)}function an(n){return l._25(0,[(n()(),l._4(0,0,null,null,0,"span",[["class","icon-volume-medium"]],null,null,null,null,null))],null,null)}function cn(n){return l._25(0,[(n()(),l._4(0,0,null,null,0,"span",[["class","icon-volume-low"]],null,null,null,null,null))],null,null)}function pn(n){return l._25(0,[(n()(),l._4(0,0,null,null,0,"span",[["class","icon-volume-mute"]],null,null,null,null,null))],null,null)}function dn(n){return l._25(0,[l._21(402653184,1,{buttonElement:0}),l._21(402653184,2,{iconElement:0}),l._21(402653184,3,{sliderElement:0}),l._21(402653184,4,{trackElement:0}),(n()(),l._4(4,0,[[1,0],["buttonElement",1]],null,25,"button",[["class","timeline-layer-volume"],["title","Change the volume of the layer"]],null,[[null,"wheel"],[null,"keydown"]],function(n,t,e){var l=!0,o=n.component;return"wheel"===t&&(l=!1!==o.onWheel(e)&&l),"keydown"===t&&(l=!1!==o.onKeyDown(e)&&l),l},null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(6,0,[[2,0],["iconElement",1]],null,13,"span",[["class","timeline-layer-volume__icon"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onIconClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,sn)),l._3(9,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,an)),l._3(12,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,cn)),l._3(15,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,pn)),l._3(18,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(21,0,[[3,0],["sliderElement",1]],null,7,"span",[["appHorizontalDrag",""],["class","timeline-layer-volume-slider"]],null,[[null,"onHorizontalDragStart"],[null,"onHorizontalDrag"],[null,"mousedown"],[null,"touchstart"]],function(n,t,e){var o=!0,i=n.component;return"mousedown"===t&&(o=!1!==l._15(n,22).onMouseDown(e)&&o),"touchstart"===t&&(o=!1!==l._15(n,22).onTouchStart(e)&&o),"onHorizontalDragStart"===t&&(o=!1!==i.onHorizontalDragStart(e)&&o),"onHorizontalDrag"===t&&(o=!1!==i.onHorizontalDrag(e)&&o),o},null,null)),l._3(22,147456,null,0,J,[Q.a],null,{onHorizontalDragStart:"onHorizontalDragStart",onHorizontalDrag:"onHorizontalDrag"}),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(24,0,[[4,0],["trackElement",1]],null,3,"span",[["class","timeline-layer-volume-slider-track"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(26,0,null,null,0,"span",[["class","timeline-layer-volume-slider-track__handle"]],[[4,"left","%"]],null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,9,0,e.volumeIsHigh),n(t,12,0,e.volumeIsMedium),n(t,15,0,e.volumeIsLow),n(t,18,0,e.volumeIsMuted)},function(n,t){n(t,26,0,t.component.sliderHandlePosition)})}var hn=function(){function n(n){this.recorderStore=n}return n.prototype.onClick=function(){this.recorderStore.removeLayer(this.layerId)},n}(),fn=l._2({encapsulation:0,styles:[[".timeline-layer-remove[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;padding:0;border:none;background:0 0;font-size:20px;color:#d2d2d2}.timeline-layer-remove[_ngcontent-%COMP%]:focus, .timeline-layer-remove[_ngcontent-%COMP%]:hover{color:#ea3d3d}"]],data:{}});function _n(n){return l._25(0,[(n()(),l._4(0,0,null,null,3,"button",[["class","timeline-layer-remove hide-on-single-layer hide-on-playback hide-on-recording"],["title","Remove the layer"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,0,"span",[["class","icon-remove"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}var mn=l._2({encapsulation:0,styles:[[".timeline-layer[_ngcontent-%COMP%]{position:relative;height:91px;margin-top:6px;background:#fff;border-radius:2px;overflow:hidden}.timeline-layer[_ngcontent-%COMP%]:before{content:'';position:absolute;top:45px;left:0;display:block;width:100%;height:1px;background:#e5e5e5}.timeline-layer__slider[_ngcontent-%COMP%]{position:relative;height:100%;cursor:-webkit-grabbing;cursor:grabbing}.timeline-layer__slider[_ngcontent-%COMP%]:focus, .timeline-layer__slider[_ngcontent-%COMP%]:hover{color:#ea3d3d}.timeline-layer-buttons[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:4px;-webkit-box-sizing:border-box;box-sizing:border-box}"]],data:{}});function gn(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"app-timeline-canvas",[],null,null,null,$,Y)),l._3(1,4440064,null,0,X,[k,K,P,W],{position:[0,"position"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function bn(n){return l._25(0,[(n()(),l._4(0,0,null,null,24,"div",[["class","timeline-layer"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,9,"div",[["appHorizontalDrag",""],["class","timeline-layer__slider"]],null,[[null,"onHorizontalDragStart"],[null,"onHorizontalDrag"],[null,"onHorizontalDragEnd"],[null,"mousedown"],[null,"touchstart"]],function(n,t,e){var o=!0,i=n.component;return"mousedown"===t&&(o=!1!==l._15(n,3).onMouseDown(e)&&o),"touchstart"===t&&(o=!1!==l._15(n,3).onTouchStart(e)&&o),"onHorizontalDragStart"===t&&(o=!1!==i.onHorizontalDragStart(e)&&o),"onHorizontalDrag"===t&&(o=!1!==i.onHorizontalDrag(e)&&o),"onHorizontalDragEnd"===t&&(o=!1!==i.onHorizontalDragEnd(e)&&o),o},null,null)),l._3(3,147456,null,0,J,[Q.a],null,{onHorizontalDragStart:"onHorizontalDragStart",onHorizontalDrag:"onHorizontalDrag",onHorizontalDragEnd:"onHorizontalDragEnd"}),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(5,0,null,null,5,"app-timeline-slider",[],null,null,null,j,N)),l._3(6,245760,null,0,H,[k],null,null),(n()(),l._23(-1,0,["\n      "])),(n()(),l.Z(16777216,null,0,1,null,gn)),l._3(9,802816,null,0,i.h,[l.N,l.K,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l._23(-1,0,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(13,0,null,null,7,"div",[["class","timeline-layer-buttons"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(15,0,null,null,1,"app-timeline-layer-select",[],null,null,null,on,tn)),l._3(16,114688,null,0,nn,[k],{layerId:[0,"layerId"]},null),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(18,0,null,null,1,"app-timeline-layer-volume",[],null,null,null,dn,un)),l._3(19,114688,null,0,rn,[P],{layerId:[0,"layerId"]},null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(22,0,null,null,1,"app-timeline-layer-remove",[],null,null,null,_n,fn)),l._3(23,49152,null,0,hn,[P],{layerId:[0,"layerId"]},null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,6,0),n(t,9,0,e.canvasPositions),n(t,16,0,e.layerId),n(t,19,0,e.layerId),n(t,23,0,e.layerId)},null)}var yn=function(){function n(n,t){this.timelineStore=n,this.recorderStore=t,this.canvasPositions=[]}return Object.defineProperty(n.prototype,"layerIds",{get:function(){return this.recorderStore.recordData.layerIds},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var n=this;this.updateCanvasPositions(),this.timelineChangeSubscriber=this.timelineStore.change.subscribe(function(){return n.updateCanvasPositions()})},n.prototype.ngOnDestroy=function(){this.timelineChangeSubscriber.unsubscribe()},n.prototype.updateCanvasPositions=function(){this.canvasPositions=this.getCanvasPositions()},n.prototype.getCanvasPositions=function(){var n=this.timelineStore.convertPixelsToMilliseconds(y.o),t=S(this.timelineStore.startVisiblePosition,n),e=S(this.timelineStore.endVisiblePosition,n);return this.shouldPositionsUpdate(t,e,n)?(this.previousStep=n,this.previousStartValue=t,this.previousEndValue=e,F(t,e,n)):this.canvasPositions},n.prototype.shouldPositionsUpdate=function(n,t,e){return n!==this.previousStartValue||t!==this.previousEndValue||e!==this.previousStep},n}(),vn=l._2({encapsulation:0,styles:[["\n/*# sourceMappingURL=src/app/rec/timeline/timeline-layers/timeline-layers.component.css.map */"]],data:{}});function Pn(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"app-timeline-layer",[],null,null,null,bn,mn)),l._3(1,49152,null,0,K,[k,I,R],{layerId:[0,"layerId"],canvasPositions:[1,"canvasPositions"]},null)],function(n,t){n(t,1,0,t.context.$implicit,t.component.canvasPositions)},null)}function kn(n){return l._25(0,[(n()(),l._4(0,0,null,null,4,"div",[["class","timeline-layers"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l.Z(16777216,null,null,1,null,Pn)),l._3(3,802816,null,0,i.h,[l.N,l.K,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){n(t,3,0,t.component.layerIds)},null)}var Cn=function(){function n(n){this.timelineStore=n}return Object.defineProperty(n.prototype,"width",{get:function(){return this.timelineStore.width},enumerable:!0,configurable:!0}),n}(),xn=l._2({encapsulation:0,styles:[[".timeline[_ngcontent-%COMP%]{position:relative;margin:60px 0 40px}.timeline__header[_ngcontent-%COMP%]{position:relative;height:36px;margin-bottom:20px;text-align:center}.timeline__content[_ngcontent-%COMP%]{position:relative}.timeline__cursor[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;z-index:2;width:2px;height:100%;margin-left:-1px;background:#ffae00}.timeline__cursor[_ngcontent-%COMP%]:after, .timeline__cursor[_ngcontent-%COMP%]:before{content:'';position:absolute;left:-5px;border:10px solid transparent;border-right-width:6px;border-left-width:6px}.timeline__cursor[_ngcontent-%COMP%]:before{border-top-color:#ffae00;top:-8px}.timeline__cursor[_ngcontent-%COMP%]:after{border-bottom-color:#ffae00;bottom:-8px}"]],data:{}});function Sn(n){return l._25(0,[(n()(),l._4(0,0,null,null,21,"div",[["class","timeline"]],[[4,"width","px"]],null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,7,"div",[["class","timeline__header"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(4,0,null,null,1,"app-timeline-layer-add",[],null,null,null,x,C)),l._3(5,49152,null,0,g,[P,k],null,null),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(7,0,null,null,1,"app-timeline-buttons",[],null,null,null,L,E)),l._3(8,245760,null,0,w,[k,P,I,R],null,null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(11,0,null,null,9,"div",[["class","timeline__content"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(13,0,null,null,0,"div",[["class","timeline__cursor"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n\n    "])),(n()(),l._4(15,0,null,null,1,"app-timeline-scale",[],null,null,null,Z,G)),l._3(16,245760,null,0,U,[k],null,null),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(18,0,null,null,1,"app-timeline-layers",[],null,null,null,kn,vn)),l._3(19,245760,null,0,yn,[k,P],null,null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){n(t,8,0),n(t,16,0),n(t,19,0)},function(n,t){n(t,0,0,t.component.width)})}var On=function(){function n(){}return n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){(window.adsbygoogle=window.adsbygoogle||[]).push({})},n}(),Mn=l._2({encapsulation:0,styles:[[".timeline-block[_ngcontent-%COMP%]{width:468px;margin:40px auto}"]],data:{}});function Dn(n){return l._25(0,[(n()(),l._4(0,0,null,null,3,"div",[["class","timeline-block"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,0,"ins",[["class","adsbygoogle"],["data-ad-client","ca-pub-4733833642011475"],["data-ad-slot","8828886259"],["style","display:inline-block;width:468px;height:60px"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}var wn=function(){function n(n,t,e,l){this.timelineStore=n,this.recorderStore=t,this.recorder=e,this.player=l,this.repeat=!1}return n.prototype.ngOnInit=function(){},Object.defineProperty(n.prototype,"undoButtonDisabled",{get:function(){return this.player.playback||this.recorder.recording||0===this.recorderStore.historyData.appliedTransactionsNumber},enumerable:!0,configurable:!0}),n.prototype.onUndoButtonClick=function(){this.recorderStore.undo()},Object.defineProperty(n.prototype,"redoButtonDisabled",{get:function(){return this.player.playback||this.recorder.recording||0===this.recorderStore.historyData.rollbackTransactionsNumber},enumerable:!0,configurable:!0}),n.prototype.onRedoButtonClick=function(){this.recorderStore.redo()},n.prototype.onRepeatButtonClick=function(){this.repeat=!this.repeat},Object.defineProperty(n.prototype,"repeatButtonIsDisabled",{get:function(){return this.player.playback||this.recorder.recording},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playback",{get:function(){return this.player.playback},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playbackButtonIsDisabled",{get:function(){return 0===this.recorderStore.recordData.length||this.recorder.recording},enumerable:!0,configurable:!0}),n.prototype.onPlaybackButtonClick=function(){this.togglePlayback()},n.prototype.togglePlayback=function(){this.player.playback?this.player.stop():this.player.play(this.playbackConfig)},Object.defineProperty(n.prototype,"playbackConfig",{get:function(){var n=this.timelineStore.currentPosition,t=this.recorderStore.recordData.length;return{startPosition:n<t?n:0,endPosition:t,repeat:this.repeat}},enumerable:!0,configurable:!0}),n.prototype.onRecordingButtonClick=function(){this.toggleRecording()},Object.defineProperty(n.prototype,"recordingButtonIsDisabled",{get:function(){return this.player.playback},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recording",{get:function(){return this.recorder.recording},enumerable:!0,configurable:!0}),n.prototype.toggleRecording=function(){this.recording?this.stopRecording():this.startRecording()},n.prototype.startRecording=function(){this.recorder.startRecording(this.timelineStore.recordingConfig)},n.prototype.stopRecording=function(){this.recorder.stopRecording()},n}(),In=l._2({encapsulation:0,styles:[[".record-buttons[_ngcontent-%COMP%]{text-align:center}.record-buttons__item[_ngcontent-%COMP%]{display:inline-block;width:56px;height:56px;line-height:100%;padding:0;border:none;overflow:hidden;vertical-align:middle;background:0 0;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:pointer;color:#fff}.record-buttons__item--redo[_ngcontent-%COMP%], .record-buttons__item--undo[_ngcontent-%COMP%]{font-size:24px}.record-buttons__item[_ngcontent-%COMP%]:disabled{opacity:.5}.record-buttons-recording[_ngcontent-%COMP%]{margin:0 30px;border:2px solid #fff;border-radius:50%;background:#fff}.record-buttons-recording__icon[_ngcontent-%COMP%]{display:block;width:52px;height:52px;line-height:52px;border:2px solid #3d9fea;border-radius:50%;font-size:25px;color:#3d9fea}.record-buttons-recording--active[_ngcontent-%COMP%]   .record-buttons-recording__icon[_ngcontent-%COMP%]{color:#f44336;border-color:#f44336}.record-buttons-playback[_ngcontent-%COMP%]{font-size:40px}.record-buttons-repeat[_ngcontent-%COMP%]{font-size:18px;opacity:.5}.record-buttons-repeat--active[_ngcontent-%COMP%]{opacity:1}"]],data:{}});function Rn(n){return l._25(0,[(n()(),l._4(0,0,null,null,26,"div",[["class","record-buttons"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,3,"button",[["class","record-buttons__item record-buttons-repeat"],["title","Loop Playback"]],[[2,"record-buttons-repeat--active",null],[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onRepeatButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(4,0,null,null,0,"span",[["class","icon-repeat"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(7,0,null,null,3,"button",[["class","record-buttons__item record-buttons-playback"],["title","Play the record"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onPlaybackButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(9,0,null,null,0,"span",[],[[2,"icon-stop",null],[2,"icon-play",null]],null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(12,0,null,null,3,"button",[["class","record-buttons__item record-buttons-recording"],["title","Recording"]],[[2,"record-buttons-recording--active",null],[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onRecordingButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(14,0,null,null,0,"span",[["class","record-buttons-recording__icon icon-microphone"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(17,0,null,null,3,"button",[["class","record-buttons__item record-buttons__item--undo"],["title","Undo the previous action"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onUndoButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(19,0,null,null,0,"span",[["class","icon-undo"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(22,0,null,null,3,"button",[["class","record-buttons__item record-buttons__item--redo"],["title","Redo the previous action"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onRedoButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(24,0,null,null,0,"span",[["class","icon-redo"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,function(n,t){var e=t.component;n(t,2,0,e.repeat,e.repeatButtonIsDisabled),n(t,7,0,e.playbackButtonIsDisabled),n(t,9,0,e.playback,!1===e.playback),n(t,12,0,e.recording,e.recordingButtonIsDisabled),n(t,17,0,e.undoButtonDisabled),n(t,22,0,e.redoButtonDisabled)})}var En=function(){function n(){}return n.prototype.transform=function(n){var t=function(n){return Math.floor(n/36e5)}(n),e=function(n){return Math.floor(n/6e4)}(n-=36e5*t),l=function(n){return Math.floor(n/1e3)}(n-=6e4*e);return n-=1e3*l,Ln(t,2)+":"+Ln(e,2)+":"+Ln(l,2)+"."+Ln(n,3)},n}();function Ln(n,t){for(var e=n.toString();e.length<t;)e="0"+e;return e}var zn=function(){function n(n){this.timelineStore=n,this.milliseconds=0}return n.prototype.ngOnInit=function(){var n=this;this.updateMilliseconds(),this.subscriber=this.timelineStore.currentPositionChange.subscribe(function(){return n.updateMilliseconds()})},n.prototype.ngOnDestroy=function(){this.subscriber.unsubscribe()},n.prototype.updateMilliseconds=function(){this.milliseconds=this.timelineStore.currentPosition},n}(),Tn=l._2({encapsulation:0,styles:[[".timer[_ngcontent-%COMP%]{display:block;margin:30px 0;text-align:center;font-size:50px;font-weight:300;font-family:Lato,sans-serif}"]],data:{}});function An(n){return l._25(0,[l._17(0,En,[]),(n()(),l._4(1,0,null,null,2,"div",[["class","timer"],["title","The current position of the timeline"]],null,null,null,null,null)),(n()(),l._23(2,null,["\n  ","\n"])),l._19(3,1),(n()(),l._23(-1,null,["\n"]))],null,function(n,t){var e=t.component;n(t,2,0,l._24(t,2,0,n(t,3,0,l._15(t,0),e.milliseconds)))})}var Bn=function(){function n(n){this.elementRef=n,this.displayChange=new l.m}return n.prototype.ngOnInit=function(){},n.prototype.onDocumentMouseDown=function(n){this.elementRef.nativeElement.contains(n.target)||this.displayChange.emit(!1)},n}(),Hn=l._2({encapsulation:0,styles:[[".popup[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;margin-bottom:10px}.popup[_ngcontent-%COMP%]:after{content:'';position:absolute;top:-6px;left:-6px;display:block;width:12px;height:12px;background:#fff;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-box-shadow:-2px 2px 2px rgba(0,0,0,.4);box-shadow:-2px 2px 2px rgba(0,0,0,.4)}.popup__content[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:0;background:#fff;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.4);box-shadow:0 2px 4px rgba(0,0,0,.4);border-radius:5px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}"]],data:{}});function Nn(n){return l._25(0,[(n()(),l._4(0,0,null,null,6,"div",[["class","popup"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,3,"div",[["class","popup__content"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),l._14(null,0),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}var jn=function(){function n(n,t,e){this.recorderStore=n,this.shareService=t,this.messageService=e,this.processing=!1}return n.prototype.ngOnInit=function(){},n.prototype.onButtonClick=function(){var n=this;!0!==this.processing&&(this.processing=!0,this.recorderStore.getCompiledRecord().then(function(t){return n.shareService.upload(t)}).then(function(){return n.processing=!1}).catch(function(){return n.messageService.showServerError()}))},n}(),Fn=e("kZql"),Un=function(){function n(n,t){this.http=n,this.router=t,this.onRecordUrl=new l.m}return n.prototype.upload=function(n){var t=this;return this.sendResponse(n).map(function(n){var e=t.getRecordUrl(n);return t.onRecordUrl.emit(e),e}).toPromise()},n.prototype.sendResponse=function(n){return this.http.post(Fn.a.apiUrl+"records",this.createFormData(n)).map(function(n){return localStorage.setItem(y.g,n.token),n})},n.prototype.createFormData=function(n){var t=new Blob(n,{type:"audio/mp3"}),e=new File([t],"record.mp3",{type:"audio/mp3"}),l=new FormData,o=localStorage.getItem(y.g);return l.append("record",e),o&&l.append("token",o),l},n.prototype.getRecordUrl=function(n){return document.location.protocol+"//"+document.location.host+document.location.pathname+"#"+this.router.createUrlTree(["/play",n.id]).toString()},n}(),Gn=e("ZTzl"),Vn=l._2({encapsulation:0,styles:[[".share-link[_ngcontent-%COMP%]{border-bottom:1px solid #e2e2e2}.share-link[_ngcontent-%COMP%]   .share-button__badge[_ngcontent-%COMP%]{background:#4caf50;font-size:9px}"]],data:{}});function Zn(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"span",[["class","share-button__badge"]],null,null,null,null,null)),(n()(),l._23(-1,null,["WWW"]))],null,null)}function qn(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"span",[["class","share-button__badge"]],null,null,null,null,null)),(n()(),l._23(-1,null,["Getting URL"]))],null,null)}function Xn(n){return l._25(0,[(n()(),l._4(0,0,null,null,13,"div",[["class","share-link"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,10,"button",[["class","share-button"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(4,0,null,null,1,"span",[["class","share-button__title"]],null,null,null,null,null)),(n()(),l._23(-1,null,["Get a link to the record"])),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,Zn)),l._3(8,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n    "])),(n()(),l.Z(16777216,null,null,1,null,qn)),l._3(11,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,8,0,!1===e.processing),n(t,11,0,e.processing)},null)}var Kn=function(){function n(n){this.recorderStore=n,this.processing=!1}return n.prototype.ngOnInit=function(){},n.prototype.onButtonClick=function(){var n=this;!0!==this.processing&&(this.processing=!0,this.recorderStore.getCompiledRecord().then(function(t){n.processing=!1,r(URL.createObjectURL(new Blob(t,{type:"audio/mp3"})),"dictaphone.audio.mp3")}))},n}(),Wn=l._2({encapsulation:0,styles:[["\n/*# sourceMappingURL=src/app/rec/components/share/share-download/share-download.component.css.map */"]],data:{}});function Yn(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"span",[["class","share-button__badge"]],null,null,null,null,null)),(n()(),l._23(-1,null,["MP3"]))],null,null)}function $n(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"span",[["class","share-button__badge"]],null,null,null,null,null)),(n()(),l._23(-1,null,["Processing"]))],null,null)}function Jn(n){return l._25(0,[(n()(),l._4(0,0,null,null,10,"button",[["class","share-button"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,1,"span",[["class","share-button__title"]],null,null,null,null,null)),(n()(),l._23(-1,null,["Download MP3 file"])),(n()(),l._23(-1,null,["\n  "])),(n()(),l.Z(16777216,null,null,1,null,Yn)),l._3(6,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n  "])),(n()(),l.Z(16777216,null,null,1,null,$n)),l._3(9,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,6,0,!1===e.processing),n(t,9,0,e.processing)},null)}var Qn=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),nt=l._2({encapsulation:2,styles:[[".share{width:280px}.share-button{position:relative;z-index:1;display:block;width:100%;line-height:20px;padding:12px;border:none;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:left;background:0 0;font-size:14px;color:#000}.share-button:hover{background:rgba(0,0,0,.05)}.share-button__badge{position:absolute;top:50%;right:12px;line-height:20px;margin-top:-10px;padding:0 10px;border-radius:2px;background:#3d9fea;color:#fff;font-weight:700;font-size:10px;text-transform:uppercase}"]],data:{}});function tt(n){return l._25(0,[(n()(),l._4(0,0,null,null,7,"div",[["class","share"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,1,"app-share-link",[],null,null,null,Xn,Vn)),l._3(3,114688,null,0,jn,[P,Un,Gn.a],null,null),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(5,0,null,null,1,"app-share-download",[],null,null,null,Jn,Wn)),l._3(6,114688,null,0,Kn,[P],null,null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){n(t,3,0),n(t,6,0)},null)}var et=function(){function n(){this.popupIsDisplayed=!1}return n.prototype.onButtonClick=function(){this.popupIsDisplayed=!this.popupIsDisplayed},n}(),lt=l._2({encapsulation:0,styles:[[".toolbar-share[_ngcontent-%COMP%]{position:relative;display:inline-block}.toolbar-share-button[_ngcontent-%COMP%]{position:relative;height:60px;line-height:100%;padding:0 25px 0 55px;border:none;overflow:hidden;-webkit-box-sizing:content-box;box-sizing:content-box;vertical-align:middle;text-align:left;font-size:15px;background:#4caf50;color:#fff}.toolbar-share-button__icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:20px;margin-top:-10px;font-size:20px;color:#fff}"]],data:{}});function ot(n){return l._25(0,[(n()(),l._4(0,0,null,null,5,"app-popup",[],null,[[null,"displayChange"],["document","mousedown"]],function(n,t,e){var o=!0,i=n.component;return"document:mousedown"===t&&(o=!1!==l._15(n,1).onDocumentMouseDown(e)&&o),"displayChange"===t&&(o=!1!==(i.popupIsDisplayed=e)&&o),o},Nn,Hn)),l._3(1,114688,null,0,Bn,[l.k],{display:[0,"display"]},{displayChange:"displayChange"}),(n()(),l._23(-1,0,["\n    "])),(n()(),l._4(3,0,null,0,1,"app-share",[],null,null,null,tt,nt)),l._3(4,114688,null,0,Qn,[],null,null),(n()(),l._23(-1,0,["\n  "]))],function(n,t){n(t,1,0,t.component.popupIsDisplayed),n(t,4,0)},null)}function it(n){return l._25(0,[(n()(),l._4(0,0,null,null,12,"div",[["class","toolbar-share"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,6,"button",[["class","toolbar-share-button"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onButtonClick()&&l),l},null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(4,0,null,null,0,"span",[["class","toolbar-share-button__icon icon-check"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(6,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l._23(-1,null,["Download or share"])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l.Z(16777216,null,null,1,null,ot)),l._3(11,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){n(t,11,0,t.component.popupIsDisplayed)},null)}var rt=function(){},ut=l._2({encapsulation:0,styles:[[".toolbar[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function st(n){return l._25(0,[(n()(),l._4(0,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(2,0,null,null,1,"app-toolbar-share",[],null,null,null,it,lt)),l._3(3,49152,null,0,et,[],null,null),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],null,null)}var at=e("/cv/"),ct=e("8p/G"),pt=function(){function n(n,t,e,l){this.recorderStore=n,this.shareService=t,this.recorder=e,this.player=l}return n.prototype.ngOnInit=function(){var n=this;this.onRecordUrlSubscriber=this.shareService.onRecordUrl.subscribe(function(t){return n.onRecordUrl(t)})},n.prototype.ngOnDestroy=function(){this.onRecordUrlSubscriber.unsubscribe()},Object.defineProperty(n.prototype,"playback",{get:function(){return this.player.playback},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recording",{get:function(){return this.recorder.recording},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"noRecord",{get:function(){return 0===this.recorderStore.recordData.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"singleLayer",{get:function(){return 1===this.recorderStore.recordData.layerIds.length},enumerable:!0,configurable:!0}),n.prototype.onRecordUrl=function(n){this.recordUrl=n,this.shareModal.openModal()},n}(),dt=l._2({encapsulation:2,styles:[[".rec{position:relative;height:100%;padding:0 0 60px;-webkit-box-sizing:border-box;box-sizing:border-box}.rec__header,.rec__toolbar{position:absolute;left:0;width:100%}.rec__header{top:0;line-height:30px;padding:20px 0}.rec__toolbar{bottom:0;height:60px;background:#fff}.rec__content{height:100%;overflow:auto}.rec--no-record .hide-on-no-record,.rec--playback .hide-on-playback,.rec--recording .hide-on-recording,.rec--single-layer .hide-on-single-layer{visibility:hidden}"]],data:{}});function ht(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"app-share-link-modal",[],null,null,null,p,s)),l._3(1,114688,null,0,u,[],{recordUrl:[0,"recordUrl"]},null)],function(n,t){n(t,1,0,t.component.recordUrl)},null)}function ft(n){return l._25(0,[l._21(402653184,1,{shareModal:0}),(n()(),l._4(1,0,[["element",1]],null,38,"div",[["class","rec"]],[[2,"rec--single-layer",null],[2,"rec--recording",null],[2,"rec--playback",null],[2,"rec--no-record",null]],null,null,null,null)),(n()(),l._23(-1,null,["\n  "])),(n()(),l._4(3,0,null,null,1,"app-meta",[["description","Record sound from your microphone, overwrite bad stuff and download it to your computer in the form of an audio MP3 file"],["keywords","dictaphone, online dictaphone, voice recorder, online voice recorder, voice recording program, recording of the sound"],["title","Voice recorder online, record sound or voice from a microphone"]],null,null,null,f.b,f.a)),l._3(4,114688,null,0,_.a,[m.h,m.g],{title:[0,"title"],description:[1,"description"],keywords:[2,"keywords"]},null),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(6,0,null,null,16,"div",[["class","rec__content"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(8,0,null,null,13,"div",[["class","container"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(10,0,null,null,1,"app-timeline",[],null,null,null,Sn,xn)),l._3(11,49152,null,0,Cn,[k],null,null),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(13,0,null,null,1,"app-timeline-block",[],null,null,null,Dn,Mn)),l._3(14,4308992,null,0,On,[],null,null),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(16,0,null,null,1,"app-record-buttons",[],null,null,null,Rn,In)),l._3(17,114688,null,0,wn,[k,P,I,R],null,null),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(19,0,null,null,1,"app-timer",[],null,null,null,An,Tn)),l._3(20,245760,null,0,zn,[k],null,null),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(24,0,null,null,7,"div",[["class","rec__toolbar hide-on-recording hide-on-no-record"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n    "])),(n()(),l._4(26,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(n()(),l._23(-1,null,["\n      "])),(n()(),l._4(28,0,null,null,1,"app-toolbar",[],null,null,null,st,ut)),l._3(29,49152,null,0,rt,[],null,null),(n()(),l._23(-1,null,["\n    "])),(n()(),l._23(-1,null,["\n  "])),(n()(),l._23(-1,null,["\n\n  "])),(n()(),l._4(33,0,null,null,5,"app-modal",[],null,null,null,at.b,at.a)),l._3(34,114688,[[1,4]],0,ct.a,[],{closeOnBackgroundClick:[0,"closeOnBackgroundClick"]},null),(n()(),l._23(-1,0,["\n    "])),(n()(),l.Z(16777216,null,0,1,null,ht)),l._3(37,16384,null,0,i.i,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l._23(-1,0,["\n  "])),(n()(),l._23(-1,null,["\n"])),(n()(),l._23(-1,null,["\n"]))],function(n,t){var e=t.component;n(t,4,0,"Voice recorder online, record sound or voice from a microphone","Record sound from your microphone, overwrite bad stuff and download it to your computer in the form of an audio MP3 file","dictaphone, online dictaphone, voice recorder, online voice recorder, voice recording program, recording of the sound"),n(t,14,0),n(t,17,0),n(t,20,0),n(t,34,0,!1),n(t,37,0,e.recordUrl)},function(n,t){var e=t.component;n(t,1,0,e.singleLayer,e.recording,e.playback,e.noRecord)})}var _t,mt=l._0("app-rec",pt,function(n){return l._25(0,[(n()(),l._4(0,0,null,null,1,"app-rec",[],null,null,null,ft,dt)),l._3(1,245760,null,0,pt,[P,Un,I,R],null,null)],function(n,t){n(t,1,0)},null)},{},{},[]),gt=e("7DMc"),bt=e("ItHS"),yt=e("HtM4"),vt=window.AudioContext||window.webkitAudioContext;vt&&(_t=new vt);var Pt=function(){function n(){}return n.prototype.getAudioContext=function(){return _t},n}(),kt=e("bfOx"),Ct=e("fAE3"),xt=function(){};e.d(t,"RecModuleNgFactory",function(){return St});var St=l._1(o,[],function(n){return l._11([l._12(512,l.j,l.X,[[8,[mt]],[3,l.j],l.v]),l._12(4608,gt.c,gt.c,[]),l._12(4608,bt.i,bt.o,[i.c,l.z,bt.m]),l._12(4608,bt.p,bt.p,[bt.i,bt.n]),l._12(5120,bt.a,function(n){return[n]},[bt.p]),l._12(4608,bt.l,bt.l,[]),l._12(6144,bt.j,null,[bt.l]),l._12(4608,bt.h,bt.h,[bt.j]),l._12(6144,bt.b,null,[bt.h]),l._12(4608,bt.f,bt.k,[bt.b,l.p]),l._12(4608,bt.c,bt.c,[bt.f]),l._12(4608,i.k,i.j,[l.s,[2,i.o]]),l._12(4608,Q.a,Q.a,[]),l._12(4608,Gn.a,Gn.a,[]),l._12(4608,yt.a,yt.a,[bt.c]),l._12(4608,P,P,[l.x]),l._12(4608,Pt,Pt,[]),l._12(4608,I,I,[P,Gn.a,Pt]),l._12(4608,R,R,[P,Pt,Gn.a,l.x]),l._12(4608,k,k,[R,P]),l._12(4608,W,W,[I,k]),l._12(4608,Un,Un,[bt.c,kt.k]),l._12(512,gt.b,gt.b,[]),l._12(512,gt.a,gt.a,[]),l._12(512,bt.e,bt.e,[]),l._12(512,bt.d,bt.d,[]),l._12(512,i.b,i.b,[]),l._12(512,kt.n,kt.n,[[2,kt.s],[2,kt.k]]),l._12(512,Ct.a,Ct.a,[]),l._12(512,xt,xt,[]),l._12(512,o,o,[]),l._12(256,bt.m,"XSRF-TOKEN",[]),l._12(256,bt.n,"X-XSRF-TOKEN",[]),l._12(1024,kt.i,function(){return[[{path:"",component:pt}]]},[]),l._12(256,l.J,"xlf",[])])})}});
//# sourceMappingURL=1.56782278b023938e6580.chunk.js.map