webpackJsonp([2],{zKft:function(n,l,u){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e=u("WT6e"),t=function(){},i=u("EF1m"),o=u("Xjw4"),r=function(){function n(){this.duration=0,this.currentTime=0}return n.prototype.ngOnInit=function(){},Object.defineProperty(n.prototype,"audioNativeElement",{get:function(){return this.audioElement.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentPosition",{get:function(){if(this.duration){var n=100*this.currentTime/this.duration;return n>100?100:n}return 0},enumerable:!0,configurable:!0}),n.prototype.play=function(){this.audioNativeElement.play(),this.requestAnimationFrame()},n.prototype.requestAnimationFrame=function(){var n=this;this.requestAnimationFrameId=requestAnimationFrame(function(){return n.animate()})},n.prototype.animate=function(){this.currentTime=this.audioNativeElement.currentTime,this.requestAnimationFrame()},n.prototype.pause=function(){cancelAnimationFrame(this.requestAnimationFrameId),this.audioNativeElement.pause()},n.prototype.onTimeUpdate=function(){this.currentTime=this.audioNativeElement.currentTime},n.prototype.onLoadedMetaData=function(){this.duration=this.audioNativeElement.duration},n.prototype.onScaleClick=function(n){var l=this.duration*this.getScaleClickCoefficient(n);l>this.duration&&(l=this.duration),this.audioNativeElement.currentTime=l},n.prototype.getScaleClickCoefficient=function(n){var l=n.currentTarget;return(n.clientX-l.getBoundingClientRect().left)/l.offsetWidth},n}(),a=e._2({encapsulation:0,styles:[[".player[_ngcontent-%COMP%]{width:600px;margin:0 auto}.player-timeline[_ngcontent-%COMP%]{position:relative;margin:20px 0}.player-timeline__time[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;line-height:20px;margin-top:-10px;font-size:14px}.player-timeline__time--duration[_ngcontent-%COMP%]{left:auto;right:0}.player-timeline-scale[_ngcontent-%COMP%]{position:relative;height:30px;margin:30px 60px;border-radius:2px;background:#fff}.player-timeline-scale__handle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:0;height:100%;background:#3d9fea}.player__button[_ngcontent-%COMP%]{display:block;width:48px;height:48px;margin:0 auto;padding:0;border:none;border-radius:50%;background:0 0;font-size:48px;color:#fff}"]],data:{}});function c(n){return e._25(0,[(n()(),e._4(0,0,null,null,3,"button",[["class","player__button"]],null,[[null,"click"]],function(n,l,u){var e=!0;return"click"===l&&(e=!1!==n.component.play()&&e),e},null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(2,0,null,null,0,"span",[["class","icon-play"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "]))],null,null)}function _(n){return e._25(0,[(n()(),e._4(0,0,null,null,3,"button",[["class","player__button"]],null,[[null,"click"]],function(n,l,u){var e=!0;return"click"===l&&(e=!1!==n.component.pause()&&e),e},null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(2,0,null,null,0,"span",[["class","icon-pause"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "]))],null,null)}function p(n){return e._25(0,[e._17(0,i.a,[]),e._21(402653184,1,{audioElement:0}),(n()(),e._4(2,0,null,null,30,"div",[["class","player"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e._4(4,0,[[1,0],["audioElement",1]],null,5,"audio",[],null,[[null,"timeupdate"],[null,"loadedmetadata"]],function(n,l,u){var e=!0,t=n.component;return"timeupdate"===l&&(e=!1!==t.onTimeUpdate()&&e),"loadedmetadata"===l&&(e=!1!==t.onLoadedMetaData()&&e),e},null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(6,0,null,null,0,"source",[["type","audio/ogg"]],[[8,"src",4]],null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(8,0,null,null,0,"source",[["type","audio/mpeg"]],[[8,"src",4]],null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n\n  "])),(n()(),e._4(11,0,null,null,14,"div",[["class","player-timeline"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(13,0,null,null,2,"div",[["class","player-timeline__time"]],null,null,null,null,null)),(n()(),e._23(14,null,["",""])),e._19(15,2),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(17,0,null,null,3,"div",[["class","player-timeline-scale"]],null,[[null,"click"]],function(n,l,u){var e=!0;return"click"===l&&(e=!1!==n.component.onScaleClick(u)&&e),e},null,null)),(n()(),e._23(-1,null,["\n      "])),(n()(),e._4(19,0,null,null,0,"div",[["class","player-timeline-scale__handle"]],[[4,"width","%"]],null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(22,0,null,null,2,"div",[["class","player-timeline__time player-timeline__time--duration"]],null,null,null,null,null)),(n()(),e._23(23,null,["",""])),e._19(24,2),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n\n  "])),(n()(),e.Z(16777216,null,null,1,null,c)),e._3(28,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n  "])),(n()(),e.Z(16777216,null,null,1,null,_)),e._3(31,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n"])),(n()(),e._23(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,28,0,u.audioNativeElement.paused),n(l,31,0,!1===u.audioNativeElement.paused)},function(n,l){var u=l.component;n(l,6,0,u.record.oggUrl),n(l,8,0,u.record.mp3Url),n(l,14,0,e._24(l,14,0,n(l,15,0,e._15(l,0),u.duration,!0))),n(l,19,0,u.percentPosition),n(l,23,0,e._24(l,23,0,n(l,24,0,e._15(l,0),u.currentTime,!0)))})}var s=function(){function n(n,l){this.apiService=n,this.router=l}return n.prototype.ngOnInit=function(){},n.prototype.onButtonClick=function(n){var l=this;confirm(n.target.title)&&this.apiService.deleteRecord(this.record.id).subscribe(function(){return l.router.navigate(["/"])})},n}(),d=u("HtM4"),f=u("bfOx"),m=e._2({encapsulation:0,styles:[[".play-delete-record__button[_ngcontent-%COMP%]{padding:0;border:none;background:0 0;text-decoration:underline;color:#ff0}.play-delete-record__button[_ngcontent-%COMP%]:hover{text-decoration:none}"]],data:{}});function h(n){return e._25(0,[(n()(),e._4(0,0,null,null,10,"div",[["class","play-delete-record"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e._23(-1,null,["You are owner of this record, so you can delete it."])),(n()(),e._23(-1,null,["\n  "])),(n()(),e._4(5,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(7,0,null,null,1,"button",[["class","play-delete-record__button"],["title","Are you sure you want to delete this audio file?"]],null,[[null,"click"]],function(n,l,u){var e=!0;return"click"===l&&(e=!1!==n.component.onButtonClick(u)&&e),e},null,null)),(n()(),e._23(-1,null,["\n      Remove this record\n    "])),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n"])),(n()(),e._23(-1,null,["\n"]))],null,null)}var g=u("33hi"),y=u("9vnO"),v=u("OE0E"),b=function(){function n(n,l){this.route=n,this.apiService=l,this.error=!1}return Object.defineProperty(n.prototype,"recordCanBeDeleted",{get:function(){return this.record&&this.record.owner},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var n=this;this.subscription=this.route.params.subscribe(function(l){return n.onRouteParamsChange(l)})},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.onRouteParamsChange=function(n){this.onRecordIdChange(n.id)},n.prototype.onRecordIdChange=function(n){var l=this;n&&this.apiService.getRecord(n).subscribe(function(n){return l.record=n},function(n){return l.error=!0})},n}(),k=e._2({encapsulation:0,styles:[["\n/*# sourceMappingURL=src/app/play/play.component.css.map */"]],data:{}});function C(n){return e._25(0,[(n()(),e._4(0,0,null,null,1,"app-player",[],null,null,null,p,a)),e._3(1,114688,null,0,r,[],{record:[0,"record"]},null)],function(n,l){n(l,1,0,l.component.record)},null)}function O(n){return e._25(0,[(n()(),e._4(0,0,null,null,1,"div",[["class","page__content"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n      Loading audio file information...\n    "]))],null,null)}function I(n){return e._25(0,[(n()(),e._4(0,0,null,null,1,"div",[["class","page__content"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n      An error occurred while loading audio file information, it may have already been deleted.\n    "]))],null,null)}function E(n){return e._25(0,[(n()(),e._4(0,0,null,null,1,"app-play-delete-record",[],null,null,null,h,m)),e._3(1,114688,null,0,s,[d.a,f.k],{record:[0,"record"]},null)],function(n,l){n(l,1,0,l.component.record)},null)}function N(n){return e._25(0,[(n()(),e._4(0,0,null,null,30,"div",[["class","play page"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,1,"app-meta",[["title","Listening to a recorded audio file"]],null,null,null,g.b,g.a)),e._3(3,114688,null,0,y.a,[v.h,v.g],{title:[0,"title"]},null),(n()(),e._23(-1,null,["\n\n  "])),(n()(),e._4(5,0,null,null,24,"div",[["class","container"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(7,0,null,null,1,"h3",[["class","page__title"]],null,null,null,null,null)),(n()(),e._23(-1,null,["Listening to the recording"])),(n()(),e._23(-1,null,["\n\n    "])),(n()(),e.Z(16777216,null,null,1,null,C)),e._3(11,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n    "])),(n()(),e.Z(16777216,null,null,1,null,O)),e._3(14,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n    "])),(n()(),e.Z(16777216,null,null,1,null,I)),e._3(17,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n    "])),(n()(),e._4(19,0,null,null,9,"div",[["class","page__content"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n      "])),(n()(),e.Z(16777216,null,null,1,null,E)),e._3(22,16384,null,0,o.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n      "])),(n()(),e._4(24,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),e._4(25,0,null,null,2,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,u){var t=!0;return"click"===l&&(t=!1!==e._15(n,26).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t},null,null)),e._3(26,671744,null,0,f.m,[f.k,f.a,o.g],{routerLink:[0,"routerLink"]},null),(n()(),e._23(-1,null,["Record another audio file"])),(n()(),e._23(-1,null,["\n    "])),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n"])),(n()(),e._23(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,3,0,"Listening to a recorded audio file"),n(l,11,0,u.record),n(l,14,0,!u.record&&!u.error),n(l,17,0,u.error),n(l,22,0,u.recordCanBeDeleted),n(l,26,0,"/")},function(n,l){n(l,25,0,e._15(l,26).target,e._15(l,26).href)})}var P=e._0("app-play",b,function(n){return e._25(0,[(n()(),e._4(0,0,null,null,1,"app-play",[],null,null,null,N,k)),e._3(1,245760,null,0,b,[f.a,d.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),M=u("7DMc"),x=u("ItHS"),T=u("+6CI"),K=u("ZTzl"),R=u("fAE3"),F=function(){};u.d(l,"PlayModuleNgFactory",function(){return S});var S=e._1(t,[],function(n){return e._11([e._12(512,e.j,e.X,[[8,[P]],[3,e.j],e.v]),e._12(4608,M.c,M.c,[]),e._12(4608,x.i,x.o,[o.c,e.z,x.m]),e._12(4608,x.p,x.p,[x.i,x.n]),e._12(5120,x.a,function(n){return[n]},[x.p]),e._12(4608,x.l,x.l,[]),e._12(6144,x.j,null,[x.l]),e._12(4608,x.h,x.h,[x.j]),e._12(6144,x.b,null,[x.h]),e._12(4608,x.f,x.k,[x.b,e.p]),e._12(4608,x.c,x.c,[x.f]),e._12(4608,o.k,o.j,[e.s,[2,o.o]]),e._12(4608,T.a,T.a,[]),e._12(4608,K.a,K.a,[]),e._12(4608,d.a,d.a,[x.c]),e._12(512,M.b,M.b,[]),e._12(512,M.a,M.a,[]),e._12(512,x.e,x.e,[]),e._12(512,x.d,x.d,[]),e._12(512,o.b,o.b,[]),e._12(512,f.n,f.n,[[2,f.s],[2,f.k]]),e._12(512,R.a,R.a,[]),e._12(512,F,F,[]),e._12(512,t,t,[]),e._12(256,x.m,"XSRF-TOKEN",[]),e._12(256,x.n,"X-XSRF-TOKEN",[]),e._12(1024,f.i,function(){return[[{path:"",redirectTo:"/",pathMatch:"full"},{path:":id",component:b}]]},[]),e._12(256,e.J,"xlf",[])])})}});
//# sourceMappingURL=2.017c4114eb1d0802ae85.chunk.js.map